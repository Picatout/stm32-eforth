ARM GAS  stm32eforth-fl.s 			page 1


   1              	/* 
   2              	****************************************************
   3              	*  STM32eForth version 7.20
   4              	*  Adapted to blue pill board by Picatout
   5              	*  date: 2020-11-22
   6              	*  IMPLEMENTATION NOTES:
   7              	* 
   8              	*	This version use indirect threaded model. This model enable 
   9              	*	leaving the core Forth system in FLASH memory while the users 
  10              	*	definitions reside in RAM. 
  11              	*	R0 	is used as IP , inner interpreter address pointer 
  12              	*	R4 	is used as WP , working register 
  13              	*	R8 	is used as link register by _NEST macro it is initialized 
  14              	*  		NEST address and MUST BE PRESERVED.
  15              	*
  16              	*     Use USART1 for console I/O
  17              	*     port config: 115200 8N1 
  18              	*     TX on  PA9,  RX on PA10  
  19              	*
  20              	*     eForth is executed from flash, not copied to RAM
  21              	*     eForth use main stack R13 as return stack (thread stack not used) 
  22              	*
  23              	*     Forth return stack is at end of RAM (addr=0x200005000) and reserve 512 bytes
  24              	*     a 128 bytes flwr_buffer is reserved below rstack for flash row writing
  25              	*     a 128 bytes tib is reserved below flwr_buffer 
  26              	*     Forth dstack is below tib and reserve 512 bytes 
  27              	*   
  28              	******************************************************
  29              	
  30              	*****************************************************************************
  31              	*	STM32eForth version 7.20
  32              	*	Chen-Hanson Ting,  July 2014
  33              	
  34              	*	Subroutine Threaded Forth Model
  35              	*	Adapted to STM32F407-Discovery Board
  36              	*	Assembled by Keil uVision 5.10
  37              	
  38              	*	Version 4.03
  39              	*	Direct Threaded Forth Model
  40              	*	Derived from 80386 eForth versin 4.02
  41              	*	and Chien-ja Wu's ARM7 eForth version 1.01
  42              	
  43              	*	Subroutine thread (Branch-Link) model
  44              	*	  Register assignments
  45              	*	IP	 	R0 	*scratch
  46              	*	SP	 	R1  * data stack pointer
  47              	*	RP	 	R2 * return stack pointer 
  48              	*	UP	 	R3 
  49              	*	WP	 	R4	*scratch 
  50              	*	TOS	 	R5  * top of data stack
  51              	*	XP	 	R6 	*scratch
  52              	*	YP	 	R7	*scratch
  53              	*	  All Forth words are called by 
  54              	*	BL.W	addr
  55              	*	  All low level code words are terminaled by
  56              	*	BX	LR 	(_RET)
  57              	*	  All high level Forth words start with
ARM GAS  stm32eforth-fl.s 			page 2


  58              	*	STRFD	RP!,{LR}	(_NEST)
  59              	*	  All high level Forth words end with
  60              	*	LDRFD	RP!,{PC}	(_UNNEST)
  61              	*	  Top of data stack is cached in R5
  62              	*	  USART1 at 115200 baud, 8 data bits, 1 stop bit, no parity
  63              	*	TX on PA9 and RX on PA10.
  64              	
  65              	*	Version 5.02, 09oct04cht
  66              	*	fOR ADuC702x from Analog Devices
  67              	*	Version 6.01, 10apr08cht a
  68              	*	.p2align 2 to at91sam7x256
  69              	*	Tested on Olimax SAM7-EX256 Board with LCD display
  70              	*	Running under uVision3 RealView from Keil
  71              	*	Version 7.01, 29jun14cht
  72              	*	Ported to STM32F407-Discovery Board, under uVision 5.10
  73              	*	.p2aligned to eForth 2 Model
  74              	*	Assembled to flash memory and executed therefrom.
  75              	*	Version 7.10, 30jun14cht
  76              	*	Flash memory mapped to Page 0 where codes are executed
  77              	*	Version 7.20, 02jul14cht
  78              	*	Irreducible Complexity
  79              	*	Code copied from flash to RAM, RAM mapped to Page 0.
  80              	*	TURNKEY saves current application from RAM to flash.
  81              	*********************************************************/
  82              	
  83              	  .syntax unified
  84              	  .cpu cortex-m3
  85              	  .fpu softvfp
  86              	  .thumb
  87              	
  88              	  .include "board/blue-pill/stm32f103.inc"
   1              	/*
   2              	   STM32F103 registers
   3              	*/
   4              	    /* RAM */
   5              	    .equ RAM_ADR, 0x20000000 
   6              	    .equ RAM_SIZE, 0x5000
   7              	    .equ RAM_END, RAM_ADR+RAM_SIZE
   8              	
   9              	   /* RAM bit band alias */
  10              	      .equ RAM_BIT_ALIAS, 0x22000000
  11              	
  12              	    /* FLASH MEMORY */
  13              	    /* memory reported by MCU */
  14              	    .equ FLASH_ADR, 0x8000000 
  15              	    .equ FLASH_SIZE, 0x10000
  16              	    .equ FLASH_END, FLASH_ADR+FLASH_SIZE
  17              	    /* the MCU as 64K flash not reported by MCU */
  18              	    .equ FLASH_HIDDEN_ADR, 0x8010000
  19              	    .equ FLASH_HIDDEN_SIZE, 0x10000
  20              	    .equ FLASH_HIDDEN_END, FLASH_HIDDEN_ADR+FLASH_HIDDEN_SIZE
  21              	    .equ PAGE_SIZE, 1024 // erase block size 
  22              	
  23              	   /* system memory */
  24              	      .equ SYS_MEM, 0x1FFFF000
  25              	      .equ SYS_MEM_SIZE, 0x800
  26              	
ARM GAS  stm32eforth-fl.s 			page 3


  27              	   /* option memory */
  28              	      .equ OPTION, 0x1FFFF800   
  29              	      .equ OPT_SIZE, 16
  30              	
  31              	
  32              	   /* peripherals base address */
  33              	      .equ PER_BASE_ADR,  0x40000000
  34              	   /* PERIPHERALS bit band alias */
  35              	      .equ PER_BIT_ALIAS, 0x42000000 
  36              	
  37              	
  38              	    /* RCC registers address */
  39              	    .equ RCC_BASE_ADR, 0x40021000
  40              	    /* RCC registers offset */
  41              	    .equ RCC_CR, 0
  42              	    .equ RCC_CFGR, 4
  43              	    .equ RCC_CIR, 8
  44              	    .equ RCC_APB2RSTR, 12
  45              	    .equ RCC_APB1RSTR, 16
  46              	    .equ RCC_AHBENR, 20
  47              	    .equ RCC_APB2ENR, 24
  48              	    .equ RCC_APB1ENR, 28
  49              	    .equ RCC_BDCR, 32 
  50              	    .equ RCC_CSR, 36
  51              	
  52              	    /* FLASH registers address */
  53              	    .equ FLASH_BASE_ADR, 0x40022000
  54              	    /* FLASH registers offset */
  55              	    .equ FLASH_ACR, 0
  56              	    .equ FLASH_KEYR, 4
  57              	    .equ FLASH_OPTKEYR, 8
  58              	    .equ FLASH_SR, 12
  59              	    .equ FLASH_CR, 16
  60              	    .equ FLASH_AR, 20
  61              	    .equ FLASH_OBR, 28
  62              	    .equ FLASH_WRPR,32
  63              	    .equ RDPRT_KEY, 0x00A5
  64              	    .equ FLASH_KEY1, 0x45670123
  65              	    .equ FLASH_KEY2, 0xCDEF89AB
  66              	
  67              	    /* GPIOx base address */
  68              	    .equ GPIOA_BASE_ADR, 0x40010800
  69              	    .equ GPIOB_BASE_ADR, 0x40010C00
  70              	    .equ GPIOC_BASE_ADR, 0x40011000
  71              	    .equ GPIOD_BASE_ADR, 0x40011400
  72              	    .equ GPIOE_BASE_ADR, 0x40011800
  73              	    .equ GPIOF_BASE_ADR, 0x40018C00
  74              	    .equ GPIOG_BASE_ADR, 0x40012000
  75              	
  76              	    /* gpiox registers offset from base address */
  77              	    .equ GPIO_CRL, 0
  78              	    .equ GPIO_CRH, 4
  79              	    .equ GPIO_IDR, 8
  80              	    .equ GPIO_ODR, 12
  81              	    .equ GPIO_BSRR, 16
  82              	    .equ GPIO_BRR, 20
  83              	    .equ GPIO_LOCKR, 24 
ARM GAS  stm32eforth-fl.s 			page 4


  84              	    
  85              	
  86              	    /* USART1 registers */
  87              	    .equ USART1_BASE_ADR, 0x40013800
  88              	    /* USARTx registers offset */
  89              	    .equ USART_SR, 0
  90              	    .equ USART_DR,4
  91              	    .equ USART_BRR,8
  92              	    .equ USART_CR1,12
  93              	    .equ USART_CR2,16
  94              	    .equ USART_CR3,20
  95              	    .equ USART_GTPR,24
  96              	
  97              	   /* systick */
  98              	    .equ STK_BASE_ADR, 0xE000E010
  99              	    /* registers offset */
 100              	    .equ STK_CTL, 0
 101              	    .equ STK_LOAD, 4
 102              	    .equ STK_VAL, 8
 103              	    .equ STK_CALIB, 12
 104              	
 105              	   /* system control block */
 106              	   .equ SCB_BASE_ADR, 0xE000ED00
 107              	   /* registers offset */
 108              	   .equ SCB_CPUID, 0
 109              	   .equ SCB_ICSR, 4 
 110              	   .equ SCB_VTOR, 8
 111              	   .equ SCB_AIRCR, 12
 112              	   .equ SCB_SCR, 16
 113              	   .equ SCB_CCR, 20
 114              	   .equ SCB_SHPR1,24
 115              	   .equ SCB_SHPR2,28
 116              	   .equ SCB_SHPR3,32
 117              	   .equ SCB_SHCRS,36
 118              	   .equ SCB_CFSR,40
 119              	   .equ SCB_HFSR,44
 120              	   .equ SCB_MMAR,52
 121              	   .equ SCB_BFAR,56
 122              	   // key to to write in SCB_AIRCR 
 123              	   .equ SCB_VECTKEY,0x5fa 
  89              	
  90              	/* blue pill specific constants */ 
  91              	  .equ LED_GPIO, GPIOC_BASE_ADR
  92              	  .equ LED_PIN, 13
  93              	  .equ UART, USART1_BASE_ADR 
  94              	
  95              	/* eForth specific constants */
  96              	.equ SPP ,	0x20004E80	/*top of data stack (SP0) */
  97              	.equ TIBB ,	0x20004E80	/*terminal input buffer (TIB) */
  98              	.equ RPP ,	0x20004F80	/*top of return stack (RP0) */
  99              	.equ UPP ,	0x20000000	/*start of user area (UP0) */
 100              	.equ DTOP ,	0x20000100	/*start of usable RAM area (HERE) */
 101              	.equ DEND , 0x20004E00  /*usable RAM end */
 102              	 .equ RAMOFFSET ,	0x20000000	// remap
 103              	 .equ RAMEND, 0x20005000 // 20Ko
 104              	
 105              	/*************************************
ARM GAS  stm32eforth-fl.s 			page 5


 106              	   system variables offset from UPP
 107              	*************************************/
 108              	  .equ SEED_OFS, 4    // prng seed 
 109              	  .equ TICKS_OFS, SEED_OFS+4  // millseconds counter
 110              	  .equ TIMER_OFS, TICKS_OFS+4  // count down timer
 111              	  .equ FTRACE_OFS, TIMER_OFS+4  // compile to RAM 
 112              	  .equ IMG_SIGN_OFS, FTRACE_OFS+4  // image signature  
 113              	  .equ BOOT_OFS, IMG_SIGN_OFS+4  // boot program address
 114              	  .equ BASE_OFS, BOOT_OFS+4  // numeric conversion base 
 115              	  .equ TMP_OFS, BASE_OFS+4   // temporary variable
 116              	  .equ SPAN_OFS, TMP_OFS+4  // character count received by expect  
 117              	  .equ TOIN_OFS, SPAN_OFS+4  // >IN  parse pointer in TIB
 118              	  .equ NTIB_OFS, TOIN_OFS+4  // #TIB  characters in TIB 
 119              	  .equ TIB_OFS, NTIB_OFS+4   // TIB buffer address 
 120              	  .equ EVAL_OFS, TIB_OFS+4  // eval|compile vector 
 121              	  .equ HLD_OFS, EVAL_OFS+4   // hold pointer 
 122              	  .equ CTXT_OFS, HLD_OFS+4  // context pointer 
 123              	  .equ FORTH_CTOP_OFS, CTXT_OFS+4  // flash free dictionary address 
 124              	  .equ RAM_CTOP_OFS, FORTH_CTOP_OFS+4  // ram free dictionary address
 125              	  .equ LASTN_OFS, RAM_CTOP_OFS+4     // last word in dictionary link nfa 
 126              	  .equ VARS_END_OFS, LASTN_OFS+4 // end of system variables  
 127              	
 128              	/***********************************************
 129              	* MACROS
 130              	*	Assemble inline direct threaded code ending.
 131              	***********************************************/
 132              		.macro _CALL fn /* low level routine call */ 
 133              	 	PUSH {LR}
 134              		BL \fn  
 135              		POP {LR}
 136              		.endm
 137              		
 138              		.macro	_RET /*exit low level call */
 139              		BX LR 
 140              		.endm
 141              	
 142              		.macro _NEXT /* direct jump INEXT */ 
 143              		B INEXT   
 144              		.endm 
 145              	
 146              	 	.macro	_NEST /*start high level word */
 147              		BX R8 // BX R8 
 148              		NOP.N 
 149              		.endm
 150              	
 151              		.macro _ADR label 
 152              		.word 1+\label  
 153              		.endm 
 154              	
 155              	 	.macro	_UNNEST	/*end high level word */
 156              		_ADR UNNEST 
 157              		.endm
 158              	
 159              	 	.macro	_DOLIT u /*long literals */
 160              		_ADR	DOLIT
 161              		.word	\u 
 162              		.endm
ARM GAS  stm32eforth-fl.s 			page 6


 163              	
 164              		.macro _DOTQP len, text 
 165              		_ADR DOTQP 
 166              		.byte \len 
 167              		.ascii "\text" 
 168              		.p2align 2 
 169              		.endm
 170              	
 171              		.macro _COMPI name 
 172              		_DOLIT \name 
 173              		_ADR CALLC 
 174              		.endm 
 175              	
 176              		.macro _ABORQ len,name 
 177              		_ADR ABORQ 
 178              		.byte \len 
 179              		.ascii "\name"
 180              		.p2align 2 
 181              		.endm
 182              	
 183              		.macro _BRAN label 
 184              		_ADR BRAN 
 185              		.word \label 
 186              		.endm 
 187              	
 188              		.macro _QBRAN label 
 189              		_ADR QBRAN 
 190              		.word \label
 191              		.endm 
 192              	
 193              		.macro _DONXT label 
 194              		_ADR DONXT
 195              		.word \label 
 196              		.endm 
 197              	
 198              	 	.macro	_PUSH	/*push R5 on data stack*/
 199              		STR	R5,[R1,#-4]!
 200              		.endm
 201              	
 202              	 	.macro	_POP /*pop data stack to R5 */
 203              		LDR	R5,[R1],#4
 204              		.endm
 205              	
 206              	/*************************************
 207              	*   interrupt service vectors table 
 208              	**************************************/
 209              	   .section  .isr_vector,"a",%progbits
 210              	  .type  isr_vectors, %object
 211              	
 212              	isr_vectors:
 213 0000 00000000 	  .word   _mstack          /* main return stack address */
 214 0004 00000000 	  .word   reset_handler    /* startup address */
 215              	/* core interrupts || exceptions */
 216 0008 00000000 	  .word   default_handler  /*  NMI */
 217 000c 00000000 	  .word   default_handler  /*  HardFault */
 218 0010 00000000 	  .word   default_handler  /*  Memory Management */
 219 0014 00000000 	  .word   default_handler  /* Bus fault */
ARM GAS  stm32eforth-fl.s 			page 7


 220 0018 00000000 	  .word   default_handler  /* Usage fault */
 221 001c 00000000 	  .word   0
 222 0020 00000000 	  .word   0
 223 0024 00000000 	  .word   0
 224 0028 00000000 	  .word   0
 225 002c 00000000 	  .word   default_handler  /* SWI instruction */
 226 0030 00000000 	  .word   default_handler  /* Debug monitor */
 227 0034 00000000 	  .word   0
 228 0038 00000000 	  .word   default_handler  /* PendSV */
 229 003c 00000000 	  .word   systick_handler  /* Systick */
 230              	  
 231              	  /* External Interrupts */
 232 0040 00000000 	  .word      default_handler /* IRQ0, Window WatchDog              */                              
 233 0044 00000000 	  .word      default_handler /* IRQ1, PVD_VDM */                        
 234 0048 00000000 	  .word      default_handler /* IRQ2, TAMPER */            
 235 004c 00000000 	  .word      default_handler /* IRQ3, RTC  */                      
 236 0050 00000000 	  .word      default_handler /* IRQ4, FLASH */                                          
 237 0054 00000000 	  .word      default_handler /* IRQ5, RCC */                                            
 238 0058 00000000 	  .word      default_handler /* IRQ6, EXTI Line0 */                        
 239 005c 00000000 	  .word      default_handler /* IRQ7, EXTI Line1  */                          
 240 0060 00000000 	  .word      default_handler /* IRQ8, EXTI Line2 */                          
 241 0064 00000000 	  .word      default_handler /* IRQ9, EXTI Line3 */                          
 242 0068 00000000 	  .word      default_handler /* IRQ10, EXTI Line4 */                          
 243 006c 00000000 	  .word      default_handler /* IRQ11, DMA1 CH1 */                  
 244 0070 00000000 	  .word      default_handler /* IRQ12, DMA1 CH2 */                   
 245 0074 00000000 	  .word      default_handler /* IRQ13, DMA1 CH3 */                   
 246 0078 00000000 	  .word      default_handler /* IRQ14, DMA1 CH4  */                   
 247 007c 00000000 	  .word      default_handler /* IRQ15, DMA1 CH5 */                   
 248 0080 00000000 	  .word      default_handler /* IRQ16, DMA1 CH6 */                   
 249 0084 00000000 	  .word      default_handler /* IRQ17, DMA1 CH7 */                   
 250 0088 00000000 	  .word      default_handler /* IRQ18, ADC1, ADC2 global interrupt */                   
 251 008c 00000000 	  .word      default_handler /* IRQ19, USB High priority */                         
 252 0090 00000000 	  .word      default_handler /* IRQ20, USB low priority */                          
 253 0094 00000000 	  .word      default_handler /* IRQ21, CAN_RX1 */                          
 254 0098 00000000 	  .word      default_handler /* IRQ22, CAN1_SCE */                          
 255 009c 00000000 	  .word      default_handler /* IRQ23, External Line[9:5]s */                          
 256 00a0 00000000 	  .word      default_handler /* IRQ24, TIM1 Break and TIM15 global */         
 257 00a4 00000000 	  .word      default_handler /* IRQ25, TIM1 Update and TIM16 global */         
 258 00a8 00000000 	  .word      default_handler /* IRQ26, TIM1 Trigger and Commutation and TIM17 */
 259 00ac 00000000 	  .word      default_handler /* IRQ27, TIM1 Capture Compare */                          
 260 00b0 00000000 	  .word      default_handler /* IRQ28, TIM2 */                   
 261 00b4 00000000 	  .word      default_handler /* IRQ29, TIM3 */                   
 262 00b8 00000000 	  .word      default_handler /* IRQ30, TIM4 */                   
 263 00bc 00000000 	  .word      default_handler /* IRQ31, I2C1 Event and exti line 23 */                          
 264 00c0 00000000 	  .word      default_handler /* IRQ32, I2C1 Error */                          
 265 00c4 00000000 	  .word      default_handler /* IRQ33, I2C2 Event and exti line 24 */                          
 266 00c8 00000000 	  .word      default_handler /* IRQ34, I2C2 Error */                            
 267 00cc 00000000 	  .word      default_handler /* IRQ35, SPI1 */                   
 268 00d0 00000000 	  .word      default_handler /* IRQ36, SPI2 */                   
 269 00d4 00000000 	  .word      default_handler /* IRQ37, USART1 */                   
 270 00d8 00000000 	  .word      default_handler /* IRQ38, USART2 */                   
 271 00dc 00000000 	  .word      default_handler /* IRQ39, USART3 */                   
 272 00e0 00000000 	  .word      default_handler /* IRQ40, External Line[15:10]s */                          
 273 00e4 00000000 	  .word      default_handler /* IRQ41, RTC Alarm */                 
 274 00e8 00000000 	  .word      default_handler /* IRQ42, USB Wakeup*/                       
 275 00ec 00000000 	  .word      default_handler /* IRQ43, TIM8 Break */         
 276 00f0 00000000 	  .word      default_handler /* IRQ44, TIM8 Update*/         
ARM GAS  stm32eforth-fl.s 			page 8


 277 00f4 00000000 	  .word      default_handler /* IRQ45, TIM8 Trigger and Commutation */
 278 00f8 00000000 	  .word      default_handler /* IRQ46, TIM8 Capture Compare */                          
 279 00fc 00000000 	  .word      default_handler /* IRQ47, ADC3 global */                          
 280 0100 00000000 	  .word      default_handler /* IRQ48, FSMC */                   
 281 0104 00000000 	  .word      default_handler /* IRQ49, SDIO */                   
 282 0108 00000000 	  .word      default_handler /* IRQ50, TIM5 */                   
 283 010c 00000000 	  .word      default_handler /* IRQ51, SPI3 */                   
 284 0110 00000000 	  .word      default_handler /* IRQ52, UART4 */                   
 285 0114 00000000 	  .word      default_handler /* IRQ53, UART5 */                   
 286 0118 00000000 	  .word      default_handler /* IRQ54, TIM6 */                   
 287 011c 00000000 	  .word      default_handler /* IRQ55, TIM7 */
 288 0120 00000000 	  .word      default_handler /* IRQ56, DMA2 CH1 */                   
 289 0124 00000000 	  .word      default_handler /* IRQ57, DMA2 CH2 */                   
 290 0128 00000000 	  .word      default_handler /* IRQ58, DMA2 CH3 */                   
 291 012c 00000000 	  .word      default_handler /* IRQ59, DMA2 CH4 & CH5 */                   
 292              	  .size  isr_vectors, .-isr_vectors
 293              	
 294 0130 00000000 		.p2align 8
 294      00000000 
 294      00000000 
 294      00000000 
 294      00000000 
 295              	
 296              	UZERO:
 297 0200 00000000 		.word 0  			/*Reserved */
 298 0204 55AA0000 		.word 0xaa55 /* SEED  */ 
 299 0208 00000000 		.word 0      /* MSEC */
 300 020c 00000000 	    .word 0     /* TIMER */
 301 0210 00000000 		.word 0    /* FTRACE */ 
 302 0214 494D4147 		.ascii "IMAG" /* signature */ 
 303 0218 38290000 		.word HI  /*'BOOT */
 304 021c 0A000000 		.word BASEE 	/*BASE */
 305 0220 00000000 		.word 0			/*tmp */
 306 0224 00000000 		.word 0			/*SPAN */
 307 0228 00000000 		.word 0			/*>IN */
 308 022c 00000000 		.word 0			/*#TIB */
 309 0230 804E0020 		.word TIBB	/*TIB */
 310 0234 8C1A0000 		.word INTER	/*'EVAL */
 311 0238 00000000 		.word 0			/*HLD */
 312 023c A8290000 		.word LASTN	/*CONTEXT */
 313 0240 1C2A0000 		.word CTOP	/* FCP end of system dictionnary */
 314 0244 00010020 		.word DTOP	/* CP end of RAM dictionary RAM */
 315 0248 A8290000 		.word LASTN	/*LAST word in dictionary */
 316 024c 00000000 		.word 0,0			/*reserved */
 316      00000000 
 317              	ULAST:
 318              	
 319              	/*****************************************************
 320              	* default isr handler called on unexpected interrupt
 321              	*****************************************************/
 322              	    .section  .text,"ax",%progbits
 323              	  .type default_handler, %function
 324              	  .p2align 2 
 325              	  .global default_handler
 326              	default_handler:
 327 0000 054F     		ldr r7,exception_msg 
 328 0002 17F8010B 		ldrb r0,[r7],#1 
ARM GAS  stm32eforth-fl.s 			page 9


 329 0006 41F8045D 	1:	_PUSH 
 330 000a 17F8015B 		ldrb r5,[r7],#1
 331 000e 00F09BFA 		bl EMIT 
 332 0012 0138     		subs r0,r0,#1 
 333 0014 F7D1     		bne 1b 	
 334 0016 0BE0     		b REBOOT   
 335              	  .size  default_handler, .-default_handler
 336              	exception_msg:
 337 0018 1C000000 		.word .+4 
 338 001c 12       		.byte 18
 339 001d 0A0D6578 		.ascii "\n\rexeption reboot!"
 339      65707469 
 339      6F6E2072 
 339      65626F6F 
 339      7421
 340 002f 00       		.p2align 2
 341              	REBOOT:
 342 0030 0348     		ldr r0,scb_adr 
 343 0032 C168     		ldr r1,[r0,#SCB_AIRCR]
 344 0034 41F00401 		orr r1,#(1<<2)
 345 0038 C0F2FA51 		movt r1,#SCB_VECTKEY
 346 003c C160     		str r1,[r0,#SCB_AIRCR]
 347 003e FEE7     		b . 
 348              		.p2align 2
 349              	scb_adr:
 350 0040 00ED00E0 		.word SCB_BASE_ADR 
 351              	
 352              	/*********************************
 353              		system milliseconds counter
 354              	*********************************/	
 355              	  .type systick_handler, %function
 356              	  .p2align 2 
 357              	  .global systick_handler
 358              	systick_handler:
 359 0044 4FF00003 	  mov r3,#UPP&0xffff
 360 0048 C2F20003 	  movt r3,#UPP>>16  	
 361 004c 9868     	  ldr r0,[r3,#TICKS_OFS]  
 362 004e 00F10100 	  add r0,#1
 363 0052 9860     	  str r0,[r3,#TICKS_OFS]
 364 0054 D868     	  ldr r0,[r3,#TIMER_OFS]
 365 0056 10B1     	  cbz r0, systick_exit
 366 0058 A0F10100 	  sub r0,#1
 367 005c D860     	  str r0,[r3,#TIMER_OFS]
 368              	systick_exit:
 369 005e 7047     	  bx lr
 370              	
 371              	
 372              	/**************************************
 373              	  reset_handler execute at MCU reset
 374              	***************************************/
 375              	//    .section  .text.reset_handler
 376              	  .type  reset_handler, %function
 377              	  .p2align 2 
 378              	  .global reset_handler
 379              	reset_handler:
 380 0060 00F074F8 		bl	remap 
 381 0064 00F00AF8 		bl	init_devices	 	/* RCC, GPIOs, USART */
ARM GAS  stm32eforth-fl.s 			page 10


 382 0068 01F0C4FD 		bl	unlock			/* unlock flash memory */
 383 006c DFF80880 		ldr r8,nest_adr 
 384 0070 48F00108 		orr r8,r8,#1  
 385 0074 02F09CFC 		bl	COLD
 386              	nest_adr: 
 387 0078 0C040000 		.word NEST 
 388              	
 389              	  .type init_devices, %function
 390              	  .p2align 2 
 391              	init_devices:
 392              	/* init clock to HSE 72 Mhz */
 393              	/* set 2 wait states in FLASH_ACR_LATENCY */
 394 007c 4FF40050 		mov r0,#FLASH_BASE_ADR&0xffff
 395 0080 C4F20200 		movt r0,#FLASH_BASE_ADR>>16 
 396 0084 4FF01202 	  mov r2,#0x12
 397 0088 0260     	  str r2,[r0,#FLASH_ACR]
 398              	/* configure clock for HSE, 8 Mhz crystal */
 399              	/* enable HSE in RCC_CR */
 400 008a 4FF48050 	  mov r0,#RCC_BASE_ADR&0xFFFF
 401 008e C4F20200 	  movt r0,#RCC_BASE_ADR>>16
 402 0092 0168     	  ldr r1,[r0,#RCC_CR]
 403 0094 41F48031 	  orr r1,r1,#(1<<16) /* HSEON bit */
 404 0098 0160     	  str r1,[r0,#RCC_CR] /* enable HSE */
 405              	/* wait HSERDY loop */
 406              	wait_hserdy:
 407 009a 0168     	  ldr r1,[r0,#RCC_CR]
 408 009c 11F4003F 	  tst r1,#(1<<17)
 409 00a0 FBD0     	  beq wait_hserdy
 410              	
 411              	/************************************************* 
 412              	   configure PLL mul factor and source 
 413              	   SYSCLOCK=72 Mhz
 414              	   select HSE as  PLL source clock
 415              	   multiply frequency by 9 
 416              	   APB1 clock is limited to 36 Mhz so divide by 2 
 417              	****************************************************/
 418 00a2 4FF48061 	  mov r1,#(4<<8) /* PLLMUL=7|PLLSCR=HSE|PPRE1=HCLK/2| */
 419 00a6 C0F21D01 	  movt r1,#(7<<2)|1
 420 00aa 4160     	  str r1,[r0,#RCC_CFGR]
 421              	  /* enable PLL */
 422 00ac 0168     	  ldr r1,[r0,#RCC_CR]
 423 00ae 41F08071 	  orr r1, #1<<24 
 424 00b2 0160     	  str r1,[r0,#RCC_CR]
 425              	/* wait for PLLRDY */
 426              	wait_pllrdy:
 427 00b4 0168     	  ldr r1,[r0,#RCC_CR]
 428 00b6 11F0007F 	  tst r1,#(1<<25)
 429 00ba FBD0     	  beq wait_pllrdy 
 430              	/* select PLL as sysclock */
 431 00bc 4168     	  ldr r1,[r0,#RCC_CFGR]
 432 00be 4FF6FC72 	  mov r2,#0xfffc
 433 00c2 CFF6FF72 	  movt r2,#0xffff
 434 00c6 01EA0201 	  and r1,r1,r2 
 435 00ca 4FF00202 	  mov r2,#2
 436 00ce 41EA0201 	  orr r1,r1,r2
 437 00d2 4160     	  str r1,[r0,#RCC_CFGR] /* PLL selected as sysclock */
 438              	/* wait for SWS==2 */
ARM GAS  stm32eforth-fl.s 			page 11


 439              	wait_sws:
 440 00d4 4168     	  ldr r1,[r0,#RCC_CFGR]
 441 00d6 11F0080F 	  tst r1,#(2<<2)
 442 00da FBD0     	  beq wait_sws
 443              	/* now sysclock is 72 Mhz */
 444              	
 445              	/* enable peripheral clock for GPIOA, GPIOC and USART1 */
 446 00dc 4FF48050 	  mov r0,#RCC_BASE_ADR&0xFFFF
 447 00e0 C4F20200 	  movt r0,#RCC_BASE_ADR>>16
 448 00e4 44F21401 	  mov	r1, #(1<<2)|(1<<4)|(1<<14)		/* GPIOAEN|GPIOCEN|USART1EN */
 449 00e8 8161     	  str	r1, [r0, #RCC_APB2ENR]
 450              	
 451              	/* configure GPIOC:13 as output for user LED */
 452 00ea 4FF48050 	  mov r0,#GPIOC_BASE_ADR&0xffff
 453 00ee C4F20100 	  movt r0,#GPIOC_BASE_ADR>>16
 454 00f2 4168     	  ldr r1,[r0,#GPIO_CRH]
 455 00f4 6FF47002 	  mvn r2,#(15<<20)
 456 00f8 01EA0201 	  and r1,r1,r2
 457 00fc 4FF4C002 	  mov r2,#(6<<20)
 458 0100 41EA0201 	  orr r1,r1,r2
 459 0104 4160     	  str r1,[r0,#GPIO_CRH]
 460              	
 461              	/* configure USART1 */
 462              	/* set GPIOA PIN 9, uart TX  */
 463 0106 4FF40060 	  mov r0,#GPIOA_BASE_ADR&0XFFFF
 464 010a C4F20100 	  movt r0,#GPIOA_BASE_ADR>>16	
 465 010e 4168     	  ldr r1,[r0,#GPIO_CRH]
 466 0110 6FF0F002 	  mvn r2,#(15<<4)
 467 0114 01EA0201 	  and r1,r1,r2
 468 0118 4FF0A002 	  mov r2,#(0xA<<4)
 469 011c 41EA0201 	  orr r1,r1,r2 
 470 0120 4160     	  str r1,[r0,#GPIO_CRH]
 471              	
 472 0122 4FF46050 	  mov r0,#UART&0xFFFF
 473 0126 C4F20100 	  movt r0,#UART>>16	
 474              	/* BAUD rate */
 475 012a 40F27121 	  mov r1,#(39<<4)+1  /* (72Mhz/16)/115200=39,0625, quotient=39, reste=0,0625*16=1 */
 476 012e 8160     	  str r1,[r0,#USART_BRR]
 477 0130 42F20C01 	  mov r1,#(3<<2)+(1<<13)
 478 0134 C160     	  str r1,[r0,#USART_CR1] /*enable usart*/
 479              	/* configure systicks for 1msec ticks */
 480 0136 4EF21000 	  mov r0,#STK_BASE_ADR&0xFFFF
 481 013a CEF20000 	  movt r0,#STK_BASE_ADR>>16	
 482 013e 42F22831 	  mov r1,#9000 /* reload value for 1msec */
 483 0142 4160     	  str r1,[r0,#STK_LOAD]
 484 0144 4FF00301 	  mov r1,#3
 485 0148 0160     	  str r1,[r0,STK_CTL]
 486 014a 7047     	  bx lr  
 487              	
 488              	/* copy system to RAM */ 
 489              	//	.type remap, %function 
 490              	remap:
 491 014c 0B48     		ldr r0,remap_dest  
 492 014e 0A49     		ldr r1,remap_src 
 493 0150 4FF05402 		mov r2,#ULAST-UZERO 
 494 0154 51F8043B 	1:	ldr r3,[r1],#4 
 495 0158 40F8043B 		str r3,[r0],#4 
ARM GAS  stm32eforth-fl.s 			page 12


 496 015c 043A     		subs R2,#4 
 497 015e F9D1     		bne 1b
 498              	// zero end of RAM 
 499 0160 4FF4A042 		mov r2,#0x5000
 500 0164 C2F20002 		movt r2,#0x2000
 501 0168 83EA0303 		eor r3,r3,r3 
 502 016c 40F8043B 	2:  str r3,[r0],#4
 503 0170 9042     		cmp r0,r2 
 504 0172 FBDB     		blt 2b 
 505 0174 7047     		bx lr  
 506 0176 00BF     		.p2align 2
 507              	remap_src:
 508 0178 00020000 		.word UZERO 
 509              	remap_dest:
 510 017c 00000020 		.word RAM_ADR  
 511              	
 512              	/********************
 513              	* Version control
 514              	*******************/
 515              	.equ VER ,	0x01	/*major release version */
 516              	.equ EXT ,	0x00	/*minor extension */
 517              	
 518              	/* Constants */
 519              	
 520              	.equ COMPO ,	0x040	/*lexicon compile only */ 
 521              	.equ IMEDD ,	0x080	/*lexicon immediate bit */
 522              	.equ MASKK ,	0x0FFFFFF1F	/*lexicon bit mask, allowed for Chineze character */
 523              	
 524              	.equ CELLL ,	4	/*size of a cell */
 525              	.equ BASEE ,	10	/*default radix */
 526              	.equ VOCSS ,	8	/*depth of vocabulary stack */
 527              	
 528              	.equ BKSPP ,	8	/*backspace */
 529              	.equ LF ,	10	  /*line feed */
 530              	.equ CRR ,	13	/*carriage return */
 531              	.equ ERR ,	27	/*error escape */
 532              	.equ TIC ,	39	/*tick */
 533              	
 534              	/********************************************************
 535              	* RAM memory mapping
 536              	* 	0x20000000	RAM base address
 537              	*	0x20000000  system variables	
 538              	* 	0x20000100	Forth dictionary
 539              	* 	0x2000????	top of dictionary, HERE
 540              	* 	0x2000????	WORD buffer, HERE+16
 541              	*   0x20004E00  end of user space
 542              	* 	0x20004E80	top of data stack  R2
 543              	* 	0x20004E80	TIB terminal input buffer
 544              	* 	0x20004F80	top of return stack  R1
 545              	* 	0x20005000	top of hardware stack for interrupts R14
 546              	********************************************************/
 547              	
 548              	
 549              	/******************************************************
 550              	*  COLD start moves the following to USER variables.
 551              	*  MUST BE IN SAME ORDER AS USER VARIABLES.
 552              	******************************************************/
ARM GAS  stm32eforth-fl.s 			page 13


 553 0180 00000000 		.p2align 10
 553      00000000 
 553      00000000 
 553      00000000 
 553      00000000 
 554              	
 555              	
 556              	 
 557              	
 558              	/***********************************
 559              	//  Start of eForth system 
 560              	***********************************/
 561              	
 562              		.p2align 2 
 563              	
 564              	// PUSH R5, to be used in colon definition 
 565              	TPUSH:
 566 0400 41F8045D 		_PUSH
 567 0404 06E0     		_NEXT
 568              	
 569              	// POP R5, to be used in colon defintion  
 570              	TPOP:
 571 0406 51F8045B 		_POP 
 572 040a 03E0     		_NEXT
 573              	
 574              	
 575              	// hi level word enter 
 576              	NEST: 
 577 040c 42F8040D 		STMFD	R2!,{R0}
 578 0410 04F10300 		ADD R0,R4,#3
 579              	// inner interprer
 580              	INEXT: 
 581              	/*
 582              		ADD R6,R3,#FTRACE_OFS
 583              		LDR R6,[R6]
 584              		CBZ r6, 1f
 585              		_PUSH 
 586              		LDR R5,[R0]
 587              		SUB R5,#1
 588              		B DBG_PRT
 589              	*/
 590 0414 50F8044B 	1:	LDR R4,[R0],#4 
 591 0418 A047     		BLX R4 
 592              	UNNEST:
 593 041a 01CA     		LDMFD R2!,{R0}
 594 041c FAE7     		B INEXT 
 595              	
 596 041e 00BF     		.p2align 2 
 597              	
 598              	// compile "BX 	R8" 
 599              	// this is the only way 
 600              	// a colon defintion in RAM 
 601              	// can jump to NEST
 602              	// R8 is initialized to NEST address 
 603              	// and must be preserved   
 604              	COMPI_NEST:
 605 0420 03F14406 		add r6,r3,#RAM_CTOP_OFS 
ARM GAS  stm32eforth-fl.s 			page 14


 606 0424 3668     		ldr r6,[r6]
 607 0426 44F24077 		mov r7,#0x4700+(8<<3)
 608 042a 26F8027B 		strh r7,[r6],#2
 609 042e 4FF43F47 		mov r7,#0xbf00 // NOP.N   
 610 0432 26F8027B 		strh r7,[r6],#2 
 611 0436 03F14407 		add r7,r3,#RAM_CTOP_OFS 
 612 043a 3E60     		str r6,[r7]
 613 043c EAE7     		_NEXT  
 614              	
 615              	// RANDOM ( n1 -- {0..n1-1} )
 616              	// return pseudo random number 
 617              	// REF: https://en.wikipedia.org/wiki/Xorshift
 618              	
 619 043e 00000000 		.word 0
 620 0442 06       	_RAND: .byte 6
 621 0443 52414E44 		.ascii "RANDOM"
 621      4F4D
 622 0449 0000BF   		.p2align 2 
 623              	RAND:
 624 044c 404700BF 		_NEST 
 625 0450 350A0000 		_ADR SEED 
 626 0454 E9050000 		_ADR AT 
 627 0458 91060000 		_ADR DUPP 
 628 045c 6D050000 		_DOLIT 13
 628      0D000000 
 629 0464 45070000 		_ADR LSHIFT 
 630 0468 FD060000 		_ADR XORR  
 631 046c 91060000 		_ADR DUPP 
 632 0470 6D050000 		_DOLIT 17 
 632      11000000 
 633 0478 2D070000 		_ADR RSHIFT 
 634 047c FD060000 		_ADR XORR 
 635 0480 91060000 		_ADR DUPP
 636 0484 6D050000 		_DOLIT 5 
 636      05000000 
 637 048c 45070000 		_ADR LSHIFT 
 638 0490 FD060000 		_ADR XORR  
 639 0494 91060000 		_ADR DUPP 
 640 0498 350A0000 		_ADR SEED 
 641 049c D5050000 		_ADR STORE 
 642 04a0 F5080000 		_ADR ABSS
 643 04a4 A1060000 		_ADR SWAP 
 644 04a8 E50C0000 		_ADR MODD 
 645 04ac 1B040000 		_UNNEST 
 646              	
 647              	
 648              	// PAUSE ( u -- ) 
 649              	// suspend execution for u milliseconds
 650 04b0 42040000 		.word _RAND
 651 04b4 05       	_PAUSE: .byte 5
 652 04b5 50415553 		.ascii "PAUSE"
 652      45
 653 04ba 00BF     		.p2align 2
 654              	PAUSE:
 655 04bc 404700BF 		_NEST 
 656 04c0 5D0A0000 		_ADR TIMER 
 657 04c4 D5050000 		_ADR STORE 
ARM GAS  stm32eforth-fl.s 			page 15


 658              	PAUSE_LOOP:
 659 04c8 5D0A0000 		_ADR TIMER 
 660 04cc E9050000 		_ADR AT 
 661 04d0 A9050000 		_QBRAN PAUSE_EXIT 
 661      E0040000 
 662 04d8 BB050000 		_BRAN PAUSE_LOOP 
 662      C8040000 
 663              	PAUSE_EXIT: 		
 664 04e0 1B040000 		_UNNEST 
 665              	
 666              	//  ULED ( T|F -- )
 667              	// control user LED, -1 ON, 0 OFF  
 668 04e4 B4040000 		.word _PAUSE
 669 04e8 04       	_ULED: .byte 4
 670 04e9 554C4544 		.ascii "ULED"
 671 04ed 0000BF   		.p2align 2
 672              		.type ULED, %function 
 673              	ULED:
 674 04f0 4FF40056 		mov r6,#(1<<LED_PIN)
 675 04f4 4FF48054 		mov r4,#LED_GPIO&0xffff
 676 04f8 C4F20104 		movt r4,#LED_GPIO>>16
 677 04fc 2D00     		movs r5,r5 
 678 04fe 51F8045B 		_POP
 679 0502 01D0     		beq ULED_OFF 
 680 0504 6661     		str r6,[r4,#GPIO_BRR]
 681 0506 85E7     		_NEXT 
 682              	ULED_OFF:
 683 0508 2661     		str r6,[r4,#GPIO_BSRR]
 684 050a 83E7     		_NEXT    
 685              	
 686              	//    ?RX	 ( -- c T | F )
 687              	// 	Return input character and true, or a false if no input.
 688 050c E8040000 		.word	_ULED
 689 0510 04       	_QRX:	.byte   4
 690 0511 3F4B4559 		.ascii "?KEY"
 691 0515 0000BF   		.p2align 2 
 692              	QKEY:
 693              	QRX: 
 694 0518 41F8045D 		_PUSH
 695 051c 4FF46054 		mov r4,#UART&0xFFFF
 696 0520 C4F20104 		movt r4,#UART>>16
 697 0524 2688     		ldrh	r6, [r4, #USART_SR]
 698 0526 16F02006 		ands	r6, #0x20		//  RXE
 699 052a 05D0     		BEQ	QRX1
 700 052c 6568     	 	LDR	R5, [R4, #USART_DR]
 701 052e 41F8045D 		_PUSH
 702 0532 18BF     	    IT NE 
 703 0534 6FF00005 		MVNNE	R5,#0
 704              	QRX1:
 705 0538 08BF     		IT EQ 
 706 053a 0025     	    MOVEQ	R5,#0
 707 053c 6AE7     		_NEXT 
 708              	
 709              	//    TX!	 ( c -- )
 710              	// 	Send character c to the output device.
 711              	
 712 053e 10050000 		.word	_QRX
ARM GAS  stm32eforth-fl.s 			page 16


 713 0542 04       	_TXSTO:	.byte 4
 714 0543 454D4954 		.ascii "EMIT"
 715 0547 00       		.p2align 2 	
 716              	TXSTO:
 717              	EMIT:
 718              	TECHO:
 719 0548 4FF46054 		mov r4,#UART&0xFFFF
 720 054c C4F20104 		movt r4,#UART>>16
 721              	TX1:
 722 0550 2688     		ldrh	r6, [r4, #USART_SR]	
 723 0552 16F08006 		ands	r6, #0x80		//  TXE bit 
 724 0556 FBD0     		beq	TX1
 725 0558 A580     		strh	r5, [r4, #USART_DR]	
 726 055a 51F8045B 		_POP
 727 055e 59E7     		_NEXT 
 728              		
 729              	/***************
 730              	//  The kernel
 731              	***************/
 732              	
 733              	//    NOP	( -- )
 734              	// 	do nothing.
 735              	
 736 0560 42050000 		.word	_TXSTO
 737 0564 03       	_NOP:	.byte   3
 738 0565 4E4F50   		.ascii "NOP"
 739              		.p2align 2 	
 740              	NOP:
 741 0568 54E7     		_NEXT 
 742              	 
 743              	
 744              	//    doLIT	( -- w )
 745              	// 	Push an inline literal.
 746              	
 747              	// 	.word	_NOP
 748              	// _LIT	.byte   COMPO+5
 749              	// 	.ascii "doLIT"
 750 056a 00BF     	 	.p2align 2 	
 751              	DOLIT:
 752 056c 41F8045D 		_PUSH				//  store R5 on data stack
 753 0570 50F8045B 		LDR	R5,[R0],#4		//  get literal at word boundary
 754 0574 4EE7     		_NEXT 
 755              	
 756              	//    EXECUTE	( ca -- )
 757              	// 	Execute the word at ca.
 758              	
 759 0576 64050000 		.word	_NOP
 760 057a 07       	_EXECU:	.byte   7
 761 057b 45584543 		.ascii "EXECUTE"
 761      555445
 762 0582 00BF     		.p2align 2 	
 763              	EXECU: 
 764 0584 45F00104 		ORR	R4,R5,#1 
 765 0588 51F8045B 		_POP
 766 058c 2047     		BX R4 
 767 058e 41E7     		_NEXT 
 768              	
ARM GAS  stm32eforth-fl.s 			page 17


 769              	//    next	( -- ) counter on R:
 770              	// 	Run time code for the single index loop.
 771              	// 	: next ( -- ) \ hilevel model
 772              	// 	 r> r> dup if 1 - >r @ >r exit then drop cell+ >r // 
 773              	
 774              	// 	.word	_EXECU
 775              	// _DONXT	.byte   COMPO+4
 776              	// 	.ascii "next"
 777              	// 	.p2align 2 	
 778              	DONXT:
 779 0590 1668     		LDR	R6,[R2]   // ( -- u )  
 780 0592 26B9     		CBNZ R6,NEXT1 
 781              		/* loop done */
 782 0594 02F10402 		ADD	R2,R2,#4 // drop counter 
 783 0598 00F10400 		ADD	R0,R0,#4 // skip after loop address 
 784 059c 3AE7     		_NEXT
 785              	NEXT1:
 786              		/* decrement loop counter */
 787 059e A6F10106 		SUB	R6,R6,#1
 788 05a2 1660     		STR	R6,[R2]
 789 05a4 0068     		LDR	R0,[R0]	// go begining of loop 
 790 05a6 35E7     		_NEXT 
 791              	
 792              	//    ?branch	( f -- )
 793              	// 	Branch if flag is zero.
 794              	
 795              	// 	.word	_DONXT
 796              	// _QBRAN	.byte   COMPO+7
 797              	// 	.ascii "?branch"
 798              	// 	.p2align 2 	
 799              	QBRAN:
 800 05a8 2D00     		MOVS	R5,R5
 801 05aa 51F8045B 		_POP
 802 05ae 01D1     		BNE	QBRAN1
 803 05b0 0068     		LDR	R0,[R0]
 804 05b2 2FE7     		_NEXT
 805              	QBRAN1:
 806 05b4 00F10400 	 	ADD	R0,R0,#4
 807 05b8 2CE7     		_NEXT
 808              	
 809              	//    branch	( -- )
 810              	// 	Branch to an inline address.
 811              	
 812              	// 	.word	_QBRAN
 813              	// _BRAN	.byte   COMPO+6
 814              	// 	.ascii "branch"
 815              	// 	.p2align 2 	
 816              	BRAN:
 817 05ba 0068     		LDR	R0,[R0]
 818 05bc 2AE7     		_NEXT
 819              	
 820              	//    EXIT	(  -- )
 821              	// 	Exit the currently executing command.
 822              	
 823 05be 7A050000 		.word	_EXECU
 824 05c2 04       	_EXIT:	.byte   4
 825 05c3 45584954 		.ascii "EXIT"
ARM GAS  stm32eforth-fl.s 			page 18


 826 05c7 00       		.p2align 2 	
 827              	EXIT:
 828 05c8 1B040000 		_UNNEST
 829              	
 830              	//    !	   ( w a -- )
 831              	// 	Pop the data stack to memory.
 832              	
 833 05cc C2050000 		.word	_EXIT
 834 05d0 01       	_STORE:	.byte   1
 835 05d1 21       		.ascii "!"
 836 05d2 00BF     		.p2align 2 	
 837              	STORE:
 838 05d4 51F8044B 		LDR	R4,[R1],#4
 839 05d8 2C60     		STR	R4,[R5]
 840 05da 51F8045B 		_POP
 841 05de 19E7     		_NEXT 
 842              	
 843              	//    @	   ( a -- w )
 844              	// 	Push memory location to the data stack.
 845              	
 846 05e0 D0050000 		.word	_STORE
 847 05e4 01       	_AT:	.byte   1
 848 05e5 40       		.ascii "@"
 849 05e6 00BF     		.p2align 2 	
 850              	AT:
 851 05e8 2D68     		LDR	R5,[R5]
 852 05ea 13E7     		_NEXT 
 853              	
 854              	//    C!	  ( c b -- )
 855              	// 	Pop the data stack to byte memory.
 856              	
 857 05ec E4050000 		.word	_AT
 858 05f0 02       	_CSTOR:	.byte   2
 859 05f1 4321     		.ascii "C!"
 860 05f3 00       		.p2align 2 	
 861              	CSTOR:
 862 05f4 51F8044B 		LDR	R4,[R1],#4
 863 05f8 2C70     		STRB R4,[R5]
 864 05fa 51F8045B 		_POP
 865 05fe 09E7     		_NEXT
 866              	
 867              	//    C@	  ( b -- c )
 868              	// 	Push byte memory location to the data stack.
 869              	
 870 0600 F0050000 		.word	_CSTOR
 871 0604 02       	_CAT:	.byte   2
 872 0605 4340     		.ascii "C@"
 873 0607 00       		.p2align 2 	
 874              	CAT:
 875 0608 2D78     		LDRB	R5,[R5]
 876 060a 03E7     		_NEXT 
 877              	
 878              	//    R>	  ( -- w )
 879              	// 	Pop the return stack to the data stack.
 880              	
 881 060c 04060000 		.word	_CAT
 882 0610 02       	_RFROM:	.byte   2
ARM GAS  stm32eforth-fl.s 			page 19


 883 0611 523E     		.ascii "R>"
 884 0613 00       		.p2align 2 	
 885              	RFROM:
 886 0614 41F8045D 		_PUSH
 887 0618 52F8045B 		LDR	R5,[R2],#4
 888 061c FAE6     		_NEXT 
 889              	
 890              	//    R@	  ( -- w )
 891              	// 	Copy top of return stack to the data stack.
 892              	
 893 061e 10060000 		.word	_RFROM
 894 0622 02       	_RAT:	.byte   2
 895 0623 5240     		.ascii "R@"
 896 0625 0000BF   		.p2align 2 	
 897              	RAT:
 898 0628 41F8045D 		_PUSH
 899 062c 1568     		LDR	R5,[R2]
 900 062e F1E6     		_NEXT 
 901              	
 902              	//    >R	  ( w -- )
 903              	// 	Push the data stack to the return stack.
 904              	
 905 0630 22060000 		.word	_RAT
 906 0634 42       	_TOR:	.byte   COMPO+2
 907 0635 3E52     		.ascii ">R"
 908 0637 00       		.p2align 2 	
 909              	TOR:
 910 0638 42F8045D 		STR	R5,[R2,#-4]!
 911 063c 51F8045B 		_POP
 912 0640 E8E6     		_NEXT
 913              	
 914              	//	RP! ( u -- )
 915              	// initialize RPP with u 
 916 0642 34060000 		.word _TOR 
 917 0646 03       	_RPSTOR: .byte 3 
 918 0647 525021   		.ascii "RP!" 
 919 064a 00BF     		.p2align 2 
 920              	RPSTOR:
 921 064c 2A46     		MOV R2,R5 
 922 064e 51F8045B 		_POP  
 923 0652 DFE6     		_NEXT 
 924              	
 925              	
 926              	//	SP! ( u -- )
 927              	// initialize SPP with u 
 928 0654 46060000 		.word _RPSTOR  
 929 0658 03       	_SPSTOR: .byte 3 
 930 0659 535021   		.ascii "SP!" 
 931              		.p2align 2 
 932              	SPSTOR:
 933 065c 2946     		MOV R1,R5 
 934 065e 85EA0505 		EOR R5,R5,R5 
 935 0662 D7E6     		_NEXT 
 936              	
 937              	//    SP@	 ( -- a )
 938              	// 	Push the current data stack pointer.
 939              	
ARM GAS  stm32eforth-fl.s 			page 20


 940 0664 58060000 		.word	_SPSTOR
 941 0668 03       	_SPAT:	.byte   3
 942 0669 535040   		.ascii "SP@"
 943              		.p2align 2 	
 944              	SPAT:
 945 066c 41F8045D 		_PUSH
 946 0670 0D46     		MOV	R5,R1
 947 0672 CFE6     		_NEXT
 948              	
 949              	//    DROP	( w -- )
 950              	// 	Discard top stack item.
 951              	
 952 0674 68060000 		.word	_SPAT
 953 0678 04       	_DROP:	.byte   4
 954 0679 44524F50 		.ascii "DROP"
 955 067d 0000BF   		.p2align 2 	
 956              	DROP:
 957 0680 51F8045B 		_POP
 958 0684 C6E6     		_NEXT 
 959              	
 960              	//    DUP	 ( w -- w w )
 961              	// 	Duplicate the top stack item.
 962              	
 963 0686 78060000 		.word	_DROP
 964 068a 03       	_DUPP:	.byte   3
 965 068b 445550   		.ascii "DUP"
 966 068e 00BF     		.p2align 2 	
 967              	DUPP:
 968 0690 41F8045D 		_PUSH
 969 0694 BEE6     		_NEXT 
 970              	
 971              	//    SWAP	( w1 w2 -- w2 w1 )
 972              	// 	Exchange top two stack items.
 973              	
 974 0696 8A060000 		.word	_DUPP
 975 069a 04       	_SWAP:	.byte   4
 976 069b 53574150 		.ascii "SWAP"
 977 069f 00       		.p2align 2 	
 978              	SWAP:
 979 06a0 0C68     		LDR	R4,[R1]
 980 06a2 0D60     		STR	R5,[R1]
 981 06a4 2546     		MOV	R5,R4
 982 06a6 B5E6     		_NEXT 
 983              	
 984              	//    OVER	( w1 w2 -- w1 w2 w1 )
 985              	// 	Copy second stack item to top.
 986              	
 987 06a8 9A060000 		.word	_SWAP
 988 06ac 04       	_OVER:	.byte   4
 989 06ad 4F564552 		.ascii "OVER"
 990 06b1 0000BF   		.p2align 2 	
 991              	OVER:
 992 06b4 41F8045D 		_PUSH
 993 06b8 4D68     		LDR	R5,[R1,#4]
 994 06ba ABE6     		_NEXT 
 995              	
 996              	//    0<	  ( n -- t )
ARM GAS  stm32eforth-fl.s 			page 21


 997              	// 	Return true if n is negative.
 998              	
 999 06bc AC060000 		.word	_OVER
 1000 06c0 02       	_ZLESS:	.byte   2
 1001 06c1 303C     		.ascii "0<"
 1002 06c3 00       		.p2align 2 	
 1003              	ZLESS:
 1004              	//	MOV	R4,#0
 1005              	//	ADD	R5,R4,R5,ASR #32
 1006 06c4 4FEAE575 		ASR R5,#31
 1007 06c8 A4E6     		_NEXT 
 1008              	
 1009              	//    AND	 ( w w -- w )
 1010              	// 	Bitwise AND.
 1011              	
 1012 06ca C0060000 		.word	_ZLESS
 1013 06ce 03       	_ANDD:	.byte   3
 1014 06cf 414E44   		.ascii "AND"
 1015 06d2 00BF     		.p2align 2 	
 1016              	ANDD:
 1017 06d4 51F8044B 		LDR	R4,[R1],#4
 1018 06d8 05EA0405 		AND	R5,R5,R4
 1019 06dc 9AE6     		_NEXT 
 1020              	
 1021              	//    OR	  ( w w -- w )
 1022              	// 	Bitwise inclusive OR.
 1023              	
 1024 06de CE060000 		.word	_ANDD
 1025 06e2 02       	_ORR:	.byte   2
 1026 06e3 4F52     		.ascii "OR"
 1027 06e5 0000BF   		.p2align 2 	
 1028              	ORR:
 1029 06e8 51F8044B 		LDR	R4,[R1],#4
 1030 06ec 45EA0405 		ORR	R5,R5,R4
 1031 06f0 90E6     		_NEXT 
 1032              	
 1033              	//    XOR	 ( w w -- w )
 1034              	// 	Bitwise exclusive OR.
 1035              	
 1036 06f2 E2060000 		.word	_ORR
 1037 06f6 03       	_XORR:	.byte   3
 1038 06f7 584F52   		.ascii "XOR"
 1039 06fa 00BF     		.p2align 2 	
 1040              	XORR:
 1041 06fc 51F8044B 		LDR	R4,[R1],#4
 1042 0700 85EA0405 		EOR	R5,R5,R4
 1043 0704 86E6     		_NEXT 
 1044              	
 1045              	//    UM+	 ( w w -- w cy )
 1046              	// 	Add two numbers, return the sum and carry flag.
 1047              	
 1048 0706 F6060000 		.word	_XORR
 1049 070a 03       	_UPLUS:	.byte   3
 1050 070b 554D2B   		.ascii "UM+"
 1051 070e 00BF     		.p2align 2 	
 1052              	UPLUS:
 1053 0710 0C68     		LDR	R4,[R1]
ARM GAS  stm32eforth-fl.s 			page 22


 1054 0712 6419     		ADDS	R4,R4,R5
 1055 0714 4FF00005 		MOV	R5,#0
 1056 0718 45F10005 		ADC	R5,R5,#0
 1057 071c 0C60     		STR	R4,[R1]
 1058 071e 79E6     		_NEXT 
 1059              	
 1060              	//    RSHIFT	 ( w # -- w )
 1061              	// 	arithmetic Right shift # bits.
 1062              	
 1063 0720 0A070000 		.word	_UPLUS
 1064 0724 06       	_RSHIFT:	.byte   6
 1065 0725 52534849 		.ascii "RSHIFT"
 1065      4654
 1066 072b 00       		.p2align 2 	
 1067              	RSHIFT:
 1068 072c 51F8044B 		LDR	R4,[R1],#4
 1069 0730 44FA05F5 		MOV	R5,R4,ASR R5
 1070 0734 6EE6     		_NEXT 
 1071              	
 1072              	//    LSHIFT	 ( w # -- w )
 1073              	// 	Right shift # bits.
 1074              	
 1075 0736 24070000 		.word	_RSHIFT
 1076 073a 06       	_LSHIFT:	.byte   6
 1077 073b 4C534849 		.ascii "LSHIFT"
 1077      4654
 1078 0741 0000BF   		.p2align 2 	
 1079              	LSHIFT:
 1080 0744 51F8044B 		LDR	R4,[R1],#4
 1081 0748 04FA05F5 		MOV	R5,R4,LSL R5
 1082 074c 62E6     		_NEXT
 1083              	
 1084              	//    +	 ( w w -- w )
 1085              	// 	Add.
 1086              	
 1087 074e 3A070000 		.word	_LSHIFT
 1088 0752 01       	_PLUS:	.byte   1
 1089 0753 2B       		.ascii "+"
 1090              		.p2align 2 	
 1091              	PLUS:
 1092 0754 51F8044B 		LDR	R4,[R1],#4
 1093 0758 2544     		ADD	R5,R5,R4
 1094 075a 5BE6     		_NEXT 
 1095              	
 1096              	//    -	 ( w w -- w )
 1097              	// 	Subtract.
 1098              	
 1099 075c 52070000 		.word	_PLUS
 1100 0760 01       	_SUBB:	.byte   1
 1101 0761 2D       		.ascii "-"
 1102 0762 00BF     		.p2align 2 	
 1103              	SUBB:
 1104 0764 51F8044B 		LDR	R4,[R1],#4
 1105 0768 C5EB0405 		RSB	R5,R5,R4
 1106 076c 52E6     		_NEXT 
 1107              	
 1108              	//    *	 ( w w -- w )
ARM GAS  stm32eforth-fl.s 			page 23


 1109              	// 	Multiply.
 1110              	
 1111 076e 60070000 		.word	_SUBB
 1112 0772 01       	_STAR:	.byte   1
 1113 0773 2A       		.ascii "*"
 1114              		.p2align 2 	
 1115              	STAR:
 1116 0774 51F8044B 		LDR	R4,[R1],#4
 1117 0778 04FB05F5 		MUL	R5,R4,R5
 1118 077c 4AE6     		_NEXT 
 1119              	
 1120              	//    UM*	 ( w w -- ud )
 1121              	// 	Unsigned multiply.
 1122              	
 1123 077e 72070000 		.word	_STAR
 1124 0782 03       	_UMSTA:	.byte   3
 1125 0783 554D2A   		.ascii "UM*"
 1126 0786 00BF     		.p2align 2 	
 1127              	UMSTA:
 1128 0788 0C68     		LDR	R4,[R1]
 1129 078a A5FB0467 		UMULL	R6,R7,R5,R4
 1130 078e 0E60     		STR	R6,[R1]
 1131 0790 3D46     		MOV	R5,R7
 1132 0792 3FE6     		_NEXT 
 1133              	
 1134              	//    M*	 ( w w -- d )
 1135              	// 	signed multiply.
 1136              	
 1137 0794 82070000 		.word	_UMSTA
 1138 0798 02       	_MSTAR:	.byte   2
 1139 0799 4D2A     		.ascii "M*"
 1140 079b 00       		.p2align 2 	
 1141              	MSTAR:
 1142 079c 0C68     		LDR	R4,[R1]
 1143 079e 85FB0467 		SMULL	R6,R7,R5,R4
 1144 07a2 0E60     		STR	R6,[R1]
 1145 07a4 3D46     		MOV	R5,R7
 1146 07a6 35E6     		_NEXT 
 1147              	
 1148              	//    1+	 ( w -- w+1 )
 1149              	// 	Add 1.
 1150              	
 1151 07a8 98070000 		.word	_MSTAR
 1152 07ac 02       	_ONEP:	.byte   2
 1153 07ad 312B     		.ascii "1+"
 1154 07af 00       		.p2align 2 	
 1155              	ONEP:
 1156 07b0 05F10105 		ADD	R5,R5,#1
 1157 07b4 2EE6     		_NEXT 
 1158              	
 1159              	//    1-	 ( w -- w-1 )
 1160              	// 	Subtract 1.
 1161              	
 1162 07b6 AC070000 		.word	_ONEP
 1163 07ba 02       	_ONEM:	.byte   2
 1164 07bb 312D     		.ascii "1-"
 1165 07bd 0000BF   		.p2align 2 	
ARM GAS  stm32eforth-fl.s 			page 24


 1166              	ONEM:
 1167 07c0 A5F10105 		SUB	R5,R5,#1
 1168 07c4 26E6     		_NEXT 
 1169              	
 1170              	//    2+	 ( w -- w+2 )
 1171              	// 	Add 1.
 1172              	
 1173 07c6 BA070000 		.word	_ONEM
 1174 07ca 02       	_TWOP:	.byte   2
 1175 07cb 322B     		.ascii "2+"
 1176 07cd 0000BF   		.p2align 2 	
 1177              	TWOP:
 1178 07d0 05F10205 		ADD	R5,R5,#2
 1179 07d4 1EE6     		_NEXT
 1180              	
 1181              	//    2-	 ( w -- w-2 )
 1182              	// 	Subtract 2.
 1183              	
 1184 07d6 CA070000 		.word	_TWOP
 1185 07da 02       	_TWOM:	.byte   2
 1186 07db 322D     		.ascii "2-"
 1187 07dd 0000BF   		.p2align 2 	
 1188              	TWOM:
 1189 07e0 A5F10205 		SUB	R5,R5,#2
 1190 07e4 16E6     		_NEXT
 1191              	
 1192              	//    CELL+	( w -- w+4 )
 1193              	// 	Add CELLL.
 1194              	
 1195 07e6 DA070000 		.word	_TWOM
 1196 07ea 05       	_CELLP:	.byte   5
 1197 07eb 43454C4C 		.ascii "CELL+"
 1197      2B
 1198              		.p2align 2 	
 1199              	CELLP:
 1200 07f0 05F10405 		ADD	R5,R5,#CELLL
 1201 07f4 0EE6     		_NEXT
 1202              	
 1203              	//    CELL-	( w -- w-4 )
 1204              	// 	Subtract CELLL.
 1205              	
 1206 07f6 EA070000 		.word	_CELLP
 1207 07fa 05       	_CELLM:	.byte   5
 1208 07fb 43454C4C 		.ascii "CELL-"
 1208      2D
 1209              		.p2align 2 	
 1210              	CELLM:
 1211 0800 A5F10405 		SUB	R5,R5,#CELLL
 1212 0804 06E6     		_NEXT
 1213              	 
 1214              	//    BL	( -- 32 )
 1215              	// 	Blank (ASCII space).
 1216              	
 1217 0806 FA070000 		.word	_CELLM
 1218 080a 02       	_BLANK:	.byte   2
 1219 080b 424C     		.ascii "BL"
 1220 080d 0000BF   		.p2align 2 	
ARM GAS  stm32eforth-fl.s 			page 25


 1221              	BLANK:
 1222 0810 41F8045D 		_PUSH
 1223 0814 4FF02005 		MOV	R5,#32
 1224 0818 FCE5     		_NEXT 
 1225              	
 1226              	//    CELLS	( w -- w*4 )
 1227              	// 	Multiply 4.
 1228              	
 1229 081a 0A080000 		.word	_BLANK
 1230 081e 05       	_CELLS:	.byte   5
 1231 081f 43454C4C 		.ascii "CELLS"
 1231      53
 1232              		.p2align 2 	
 1233              	CELLS:
 1234 0824 4FEA8505 		MOV	R5,R5,LSL#2
 1235 0828 F4E5     		_NEXT
 1236              	
 1237              	//    CELL/	( w -- w/4 )
 1238              	// 	Divide by 4.
 1239              	
 1240 082a 1E080000 		.word	_CELLS
 1241 082e 05       	_CELLSL:	.byte   5
 1242 082f 43454C4C 		.ascii "CELL/"
 1242      2F
 1243              		.p2align 2 	
 1244              	CELLSL:
 1245 0834 4FEAA505 		MOV	R5,R5,ASR#2
 1246 0838 ECE5     		_NEXT
 1247              	
 1248              	//    2*	( w -- w*2 )
 1249              	// 	Multiply 2.
 1250              	
 1251 083a 2E080000 		.word	_CELLSL
 1252 083e 02       	_TWOST:	.byte   2
 1253 083f 322A     		.ascii "2*"
 1254 0841 0000BF   		.p2align 2 	
 1255              	TWOST:
 1256 0844 4FEA4505 		MOV	R5,R5,LSL#1
 1257 0848 E4E5     		_NEXT
 1258              	
 1259              	//    2/	( w -- w/2 )
 1260              	// 	Divide by 2.
 1261              	
 1262 084a 3E080000 		.word	_TWOST
 1263 084e 02       	_TWOSL:	.byte   2
 1264 084f 322F     		.ascii "2/"
 1265 0851 0000BF   		.p2align 2 	
 1266              	TWOSL:
 1267 0854 4FEA6505 		MOV	R5,R5,ASR#1
 1268 0858 DCE5     		_NEXT
 1269              	
 1270              	//    ?DUP	( w -- w w | 0 )
 1271              	// 	Conditional duplicate.
 1272              	
 1273 085a 4E080000 		.word	_TWOSL
 1274 085e 04       	_QDUP:	.byte   4
 1275 085f 3F445550 		.ascii "?DUP"
ARM GAS  stm32eforth-fl.s 			page 26


 1276 0863 00       		.p2align 2 	
 1277              	QDUP:
 1278 0864 2C00     		MOVS	R4,R5
 1279 0866 18BF     		IT NE 
 1280 0868 41F8045D 	    STRNE	R5,[R1,#-4]!
 1281 086c D2E5     		_NEXT
 1282              	
 1283              	//    ROT	( w1 w2 w3 -- w2 w3 w1 )
 1284              	// 	Rotate top 3 items.
 1285              	
 1286 086e 5E080000 		.word	_QDUP
 1287 0872 03       	_ROT:	.byte   3
 1288 0873 524F54   		.ascii "ROT"
 1289 0876 00BF     		.p2align 2 	
 1290              	ROT:
 1291 0878 0C68     		LDR	R4,[R1]  // r4=w2 
 1292 087a 0D60     		STR	R5,[R1]  // w3 replace w2 
 1293 087c 4D68     		LDR	R5,[R1,#4] // w1 replace w3 
 1294 087e 4C60     		STR	R4,[R1,#4] // w2 rpelace w1 
 1295 0880 C8E5     		_NEXT
 1296              	
 1297              	//    2DROP	( w1 w2 -- )
 1298              	// 	Drop top 2 items.
 1299              	
 1300 0882 72080000 		.word	_ROT
 1301 0886 05       	_DDROP:	.byte   5
 1302 0887 3244524F 		.ascii "2DROP"
 1302      50
 1303              		.p2align 2 	
 1304              	DDROP:
 1305 088c 51F8045B 		_POP
 1306 0890 51F8045B 		_POP
 1307 0894 BEE5     		_NEXT 
 1308              	
 1309              	//    2DUP	( w1 w2 -- w1 w2 w1 w2 )
 1310              	// 	Duplicate top 2 items.
 1311              	
 1312 0896 86080000 		.word	_DDROP
 1313 089a 04       	_DDUP:	.byte   4
 1314 089b 32445550 		.ascii "2DUP"
 1315 089f 00       		.p2align 2 	
 1316              	DDUP:
 1317 08a0 0C68     		LDR	R4,[R1] // r4=w1
 1318 08a2 41F8045D 		STR	R5,[R1,#-4]! // push w2  
 1319 08a6 41F8044D 		STR	R4,[R1,#-4]! // push w1 
 1320 08aa B3E5     		_NEXT
 1321              	
 1322              	//    D+	( d1 d2 -- d3 )
 1323              	// 	Add top 2 double numbers.
 1324              	
 1325 08ac 9A080000 		.word	_DDUP
 1326 08b0 02       	_DPLUS:	.byte   2
 1327 08b1 442B     		.ascii "D+"
 1328 08b3 00       		.p2align 2 	
 1329              	DPLUS:
 1330 08b4 51F8044B 		LDR	R4,[R1],#4
 1331 08b8 51F8046B 		LDR	R6,[R1],#4
ARM GAS  stm32eforth-fl.s 			page 27


 1332 08bc 0F68     		LDR	R7,[R1]
 1333 08be E419     		ADDS	R4,R4,R7
 1334 08c0 0C60     		STR	R4,[R1]
 1335 08c2 45EB0605 		ADC	R5,R5,R6
 1336 08c6 A5E5     		_NEXT
 1337              	
 1338              	//    NOT	 ( w -- !w )
 1339              	// 	1"s complement.
 1340              	
 1341 08c8 B0080000 		.word	_DPLUS
 1342 08cc 03       	_INVER:	.byte   3
 1343 08cd 4E4F54   		.ascii "NOT"
 1344              		.p2align 2 	
 1345              	INVER:
 1346 08d0 6FEA0505 		MVN	R5,R5
 1347 08d4 9EE5     		_NEXT
 1348              	
 1349              	//    NEGATE	( w -- -w )
 1350              	// 	2's complement.
 1351              	
 1352 08d6 CC080000 		.word	_INVER
 1353 08da 06       	_NEGAT:	.byte   6
 1354 08db 4E454741 		.ascii "NEGATE"
 1354      5445
 1355 08e1 0000BF   		.p2align 2 	
 1356              	NEGAT:
 1357 08e4 C5F10005 		RSB	R5,R5,#0
 1358 08e8 94E5     		_NEXT
 1359              	
 1360              	//    ABS	 ( w -- |w| )
 1361              	// 	Absolute.
 1362              	
 1363 08ea DA080000 		.word	_NEGAT
 1364 08ee 03       	_ABSS:	.byte   3
 1365 08ef 414253   		.ascii "ABS"
 1366 08f2 00BF     		.p2align 2 	
 1367              	ABSS:
 1368 08f4 15F0004F 		TST	R5,#0x80000000
 1369 08f8 18BF     		IT NE
 1370 08fa 6D42     	    RSBNE   R5,R5,#0
 1371 08fc 8AE5     		_NEXT
 1372              	
 1373              	//  0= ( w -- f )
 1374              	// TOS==0?
 1375              	
 1376 08fe EE080000 		.word _ABSS
 1377 0902 02       	_ZEQUAL: .byte 2
 1378 0903 303D     		.ascii "0="
 1379 0905 0000BF   		.p2align 2
 1380              	ZEQUAL:
 1381 0908 15B9     		cbnz r5,1f
 1382 090a 4FF0FF35 		mov r5,#-1
 1383 090e 81E5     		_NEXT 
 1384 0910 85EA0505 	1:  eor r5,r5,r5  
 1385 0914 7EE5     		_NEXT 	
 1386              	
 1387              	//    =	 ( w w -- t )
ARM GAS  stm32eforth-fl.s 			page 28


 1388              	// 	Equal?
 1389              	
 1390 0916 02090000 		.word	_ZEQUAL
 1391 091a 01       	_EQUAL:	.byte   1
 1392 091b 3D       		.ascii "="
 1393              		.p2align 2 	
 1394              	EQUAL:
 1395 091c 51F8044B 		LDR	R4,[R1],#4
 1396 0920 A542     		CMP	R5,R4
 1397 0922 0CBF     		ITE EQ 
 1398 0924 6FF00005 	    MVNEQ	R5,#0
 1399 0928 0025     		MOVNE	R5,#0
 1400 092a 73E5     		_NEXT
 1401              	
 1402              	//    U<	 ( w w -- t )
 1403              	// 	Unsigned equal?
 1404              	
 1405 092c 1A090000 		.word	_EQUAL
 1406 0930 02       	_ULESS:	.byte   2
 1407 0931 553C     		.ascii "U<"
 1408 0933 00       		.p2align 2 	
 1409              	ULESS:
 1410 0934 51F8044B 		LDR	R4,[R1],#4
 1411 0938 AC42     		CMP	R4,R5
 1412 093a 34BF     		ITE CC 
 1413 093c 6FF00005 		MVNCC	R5,#0
 1414 0940 0025     		MOVCS	R5,#0
 1415 0942 67E5     		_NEXT
 1416              	
 1417              	//    <	( w w -- t )
 1418              	// 	Less?
 1419              	
 1420 0944 30090000 		.word	_ULESS
 1421 0948 01       	_LESS:	.byte   1
 1422 0949 3C       		.ascii "<"
 1423 094a 00BF     		.p2align 2 	
 1424              	LESS:
 1425 094c 51F8044B 		LDR	R4,[R1],#4
 1426 0950 AC42     		CMP	R4,R5
 1427 0952 B4BF     	    ITE LT
 1428 0954 6FF00005 		MVNLT	R5,#0
 1429 0958 0025     		MOVGE	R5,#0
 1430 095a 5BE5     		_NEXT 
 1431              	
 1432              	//    >	( w w -- t )
 1433              	// 	greater?
 1434              	
 1435 095c 48090000 		.word	_LESS
 1436 0960 01       	_GREAT:	.byte   1
 1437 0961 3E       		.ascii ">"
 1438 0962 00BF     		.p2align 2 	
 1439              	GREAT:
 1440 0964 51F8044B 		LDR	R4,[R1],#4
 1441 0968 AC42     		CMP	R4,R5
 1442 096a CCBF     		ITE GT
 1443 096c 6FF00005 	    MVNGT	R5,#0
 1444 0970 0025     		MOVLE	R5,#0
ARM GAS  stm32eforth-fl.s 			page 29


 1445 0972 4FE5     		_NEXT
 1446              	
 1447              	//    MAX	 ( w w -- max )
 1448              	// 	Leave maximum.
 1449              	
 1450 0974 60090000 		.word	_GREAT
 1451 0978 03       	_MAX:	.byte   3
 1452 0979 4D4158   		.ascii "MAX"
 1453              		.p2align 2 	
 1454              	MAX:
 1455 097c 51F8044B 		LDR	R4,[R1],#4
 1456 0980 AC42     		CMP	R4,R5
 1457 0982 C8BF     		IT GT 
 1458 0984 2546     		MOVGT	R5,R4
 1459 0986 45E5     		_NEXT 
 1460              	
 1461              	//    MIN	 ( w w -- min )
 1462              	// 	Leave minimum.
 1463              	
 1464 0988 78090000 		.word	_MAX
 1465 098c 03       	_MIN:	.byte   3
 1466 098d 4D494E   		.ascii "MIN"
 1467              		.p2align 2 	
 1468              	MIN:
 1469 0990 51F8044B 		LDR	R4,[R1],#4
 1470 0994 AC42     		CMP	R4,R5
 1471 0996 B8BF     		IT LT
 1472 0998 2546     		MOVLT	R5,R4
 1473 099a 3BE5     		_NEXT
 1474              	
 1475              	//    +!	 ( w a -- )
 1476              	// 	Add to memory.
 1477              	
 1478 099c 8C090000 		.word	_MIN
 1479 09a0 02       	_PSTOR:	.byte   2
 1480 09a1 2B21     		.ascii "+!"
 1481 09a3 00       		.p2align 2 	
 1482              	PSTOR:
 1483 09a4 51F8044B 		LDR	R4,[R1],#4
 1484 09a8 2E68     		LDR	R6,[R5]
 1485 09aa 2644     		ADD	R6,R6,R4
 1486 09ac 2E60     		STR	R6,[R5]
 1487 09ae 51F8045B 		_POP
 1488 09b2 2FE5     		_NEXT
 1489              	
 1490              	//    2!	 ( d a -- )
 1491              	// 	Store double number.
 1492              	
 1493 09b4 A0090000 		.word	_PSTOR
 1494 09b8 02       	_DSTOR:	.byte   2
 1495 09b9 3221     		.ascii "2!"
 1496 09bb 00       		.p2align 2 	
 1497              	DSTOR:
 1498 09bc 51F8044B 		LDR	R4,[R1],#4
 1499 09c0 51F8046B 		LDR	R6,[R1],#4
 1500 09c4 45F8044B 		STR	R4,[R5],#4
 1501 09c8 2E60     		STR	R6,[R5]
ARM GAS  stm32eforth-fl.s 			page 30


 1502 09ca 51F8045B 		_POP
 1503 09ce 21E5     		_NEXT
 1504              	
 1505              	//    2@	 ( a -- d )
 1506              	// 	Fetch double number.
 1507              	
 1508 09d0 B8090000 		.word	_DSTOR
 1509 09d4 02       	_DAT:	.byte   2
 1510 09d5 3240     		.ascii "2@"
 1511 09d7 00       		.p2align 2 	
 1512              	DAT:
 1513 09d8 6C68     		LDR	R4,[R5,#4]
 1514 09da 41F8044D 		STR	R4,[R1,#-4]!
 1515 09de 2D68     		LDR	R5,[R5]
 1516 09e0 18E5     		_NEXT
 1517              	
 1518              	//    COUNT	( b -- b+1 c )
 1519              	// 	Fetch length of string.
 1520              	
 1521 09e2 D4090000 		.word	_DAT
 1522 09e6 05       	_COUNT:	.byte   5
 1523 09e7 434F554E 		.ascii "COUNT"
 1523      54
 1524              		.p2align 2 	
 1525              	COUNT:
 1526 09ec 15F8014B 		LDRB	R4,[R5],#1
 1527 09f0 41F8045D 		_PUSH
 1528 09f4 2546     		MOV	R5,R4
 1529 09f6 0DE5     		_NEXT
 1530              	
 1531              	//    DNEGATE	( d -- -d )
 1532              	// 	Negate double number.
 1533              	
 1534 09f8 E6090000 		.word	_COUNT
 1535 09fc 07       	_DNEGA:	.byte   7
 1536 09fd 444E4547 		.ascii "DNEGATE"
 1536      415445
 1537              		.p2align 2 	
 1538              	DNEGA:
 1539 0a04 0C68     		LDR	R4,[R1]
 1540 0a06 A6EB0606 		SUB	R6,R6,R6
 1541 0a0a 341B     		SUBS R4,R6,R4
 1542 0a0c 66EB0505 		SBC	R5,R6,R5
 1543 0a10 0C60     		STR	R4,[R1]
 1544 0a12 FFE4     		_NEXT
 1545              	
 1546              	// **************************************************************************
 1547              	//  System and user variables
 1548              	
 1549              	//    doVAR	( -- a )
 1550              	// 	Run time routine for VARIABLE and CREATE.
 1551              	
 1552              	// 	.word	_DNEGA
 1553              	// _DOVAR	.byte  COMPO+5
 1554              	// 	.ascii "doVAR"
 1555              	// 	.p2align 2 	
 1556              	DOVAR:
ARM GAS  stm32eforth-fl.s 			page 31


 1557 0a14 41F8045D 		_PUSH
 1558 0a18 0546     		MOV R5,R0
 1559 0a1a 00F10400 		ADD R0,R0,#4 
 1560 0a1e FCE4     		B UNNEST 
 1561              	
 1562              	//    doCON	( -- a ) 
 1563              	// 	Run time routine for CONSTANT.
 1564              	
 1565              	// 	.word	_DOVAR
 1566              	// _DOCON	.byte  COMPO+5
 1567              	// 	.ascii "doCON"
 1568              	// 	.p2align 2 	
 1569              	DOCON:
 1570 0a20 41F8045D 		_PUSH
 1571 0a24 50F8045B 		LDR.W R5,[R0],#4 
 1572 0a28 F7E4     		B UNNEST 
 1573              	
 1574              	/***********************
 1575              	  system variables 
 1576              	***********************/
 1577              	
 1578              	 // SEED ( -- a)
 1579              	 // return PRNG seed address 
 1580              	
 1581 0a2a FC090000 		.word _DNEGA
 1582 0a2e 04       	_SEED: .byte 4
 1583 0a2f 53454544 		.ascii "SEED"
 1584 0a33 00       		.p2align 2
 1585              	SEED:
 1586 0a34 41F8045D 		_PUSH 
 1587 0a38 03F10405 		ADD R5,R3,#SEED_OFS
 1588 0a3c EAE4     		_NEXT 	
 1589              	
 1590              	//  MSEC ( -- a)
 1591              	// return address of milliseconds counter
 1592 0a3e 2E0A0000 	  .word _SEED 
 1593 0a42 04       	_MSEC: .byte 4
 1594 0a43 4D534543 	  .ascii "MSEC"
 1595 0a47 00       	  .p2align 2 
 1596              	MSEC:
 1597 0a48 41F8045D 	  _PUSH
 1598 0a4c 03F10805 	  ADD R5,R3,#TICKS_OFS
 1599 0a50 E0E4     	  _NEXT 
 1600              	
 1601              	// TIMER ( -- a )
 1602              	// count down timer 
 1603 0a52 420A0000 	  .word _MSEC
 1604 0a56 05       	_TIMER:  .byte 5
 1605 0a57 54494D45 	  .ascii "TIMER"
 1605      52
 1606              	  .p2align 2 
 1607              	TIMER:
 1608 0a5c 41F8045D 	  _PUSH 
 1609 0a60 03F10C05 	  ADD R5,R3,#TIMER_OFS
 1610 0a64 D6E4     	  _NEXT
 1611              	
 1612              	//    'BOOT	 ( -- a )
ARM GAS  stm32eforth-fl.s 			page 32


 1613              	// 	Application.
 1614              	
 1615 0a66 560A0000 		.word	_TIMER
 1616 0a6a 05       	_TBOOT:	.byte   5
 1617 0a6b 27424F4F 		.ascii "'BOOT"
 1617      54
 1618              		.p2align 2 	
 1619              	TBOOT:
 1620 0a70 41F8045D 		_PUSH
 1621 0a74 03F11805 		ADD	R5,R3,#BOOT_OFS 
 1622 0a78 CCE4     		_NEXT
 1623              		
 1624              	//    BASE	( -- a )
 1625              	// 	Storage of the radix base for numeric I/O.
 1626              	
 1627 0a7a 6A0A0000 		.word	_TBOOT
 1628 0a7e 04       	_BASE:	.byte   4
 1629 0a7f 42415345 		.ascii "BASE"
 1630 0a83 00       		.p2align 2 	
 1631              	BASE:
 1632 0a84 41F8045D 		_PUSH
 1633 0a88 03F11C05 		ADD	R5,R3,#BASE_OFS
 1634 0a8c C2E4     		_NEXT
 1635              	
 1636              	//    tmp	 ( -- a )
 1637              	// 	A temporary storage location used in parse and find.
 1638              	
 1639              	// 	.word	_BASE
 1640              	// _TEMP	.byte   COMPO+3
 1641              	// 	.ascii "tmp"
 1642              	// 	.p2align 2 	
 1643              	TEMP:
 1644 0a8e 41F8045D 		_PUSH
 1645 0a92 03F12005 		ADD	R5,R3,#TMP_OFS
 1646 0a96 BDE4     		_NEXT
 1647              	
 1648              	//    SPAN	( -- a )
 1649              	// 	Hold character count received by EXPECT.
 1650              	
 1651 0a98 7E0A0000 		.word	_BASE
 1652 0a9c 04       	_SPAN:	.byte   4
 1653 0a9d 5350414E 		.ascii "SPAN"
 1654 0aa1 0000BF   		.p2align 2 	
 1655              	SPAN:
 1656 0aa4 41F8045D 		_PUSH
 1657 0aa8 03F12405 		ADD	R5,R3,#SPAN_OFS
 1658 0aac B2E4     		_NEXT
 1659              	
 1660              	//    >IN	 ( -- a )
 1661              	// 	Hold the character pointer while parsing input stream.
 1662              	
 1663 0aae 9C0A0000 		.word	_SPAN
 1664 0ab2 03       	_INN:	.byte   3
 1665 0ab3 3E494E   		.ascii ">IN"
 1666 0ab6 00BF     		.p2align 2 	
 1667              	INN:
 1668 0ab8 41F8045D 		_PUSH
ARM GAS  stm32eforth-fl.s 			page 33


 1669 0abc 03F12805 		ADD	R5,R3,#TOIN_OFS
 1670 0ac0 A8E4     		_NEXT
 1671              	
 1672              	//    #TIB	( -- a )
 1673              	// 	Hold the current count and address of the terminal input buffer.
 1674              	
 1675 0ac2 B20A0000 		.word	_INN
 1676 0ac6 04       	_NTIB:	.byte   4
 1677 0ac7 23544942 		.ascii "#TIB"
 1678 0acb 00       		.p2align 2 	
 1679              	NTIB:
 1680 0acc 41F8045D 		_PUSH
 1681 0ad0 03F12C05 		ADD	R5,R3,#NTIB_OFS
 1682 0ad4 9EE4     		_NEXT
 1683              	
 1684              	//    'EVAL	( -- a )
 1685              	// 	Execution vector of EVAL.
 1686              	
 1687 0ad6 C60A0000 		.word	_NTIB
 1688 0ada 05       	_TEVAL:	.byte   5
 1689 0adb 27455641 		.ascii "'EVAL"
 1689      4C
 1690              		.p2align 2 	
 1691              	TEVAL:
 1692 0ae0 41F8045D 		_PUSH
 1693 0ae4 03F13405 		ADD	R5,R3,#EVAL_OFS
 1694 0ae8 94E4     		_NEXT
 1695              	
 1696              	//    HLD	 ( -- a )
 1697              	// 	Hold a pointer in building a numeric output string.
 1698              	
 1699 0aea DA0A0000 		.word	_TEVAL
 1700 0aee 03       	_HLD:	.byte   3
 1701 0aef 484C44   		.ascii "HLD"
 1702 0af2 00BF     		.p2align 2 	
 1703              	HLD:
 1704 0af4 41F8045D 		_PUSH
 1705 0af8 03F13805 		ADD	R5,R3,#HLD_OFS
 1706 0afc 8AE4     		_NEXT
 1707              	
 1708              	//    CONTEXT	( -- a )
 1709              	// 	A area to specify vocabulary search order.
 1710              	
 1711 0afe EE0A0000 		.word	_HLD
 1712 0b02 07       	_CNTXT:	.byte   7
 1713 0b03 434F4E54 		.ascii "CONTEXT"
 1713      455854
 1714 0b0a 00BF     		.p2align 2 	
 1715              	CNTXT:
 1716              	CRRNT:
 1717 0b0c 41F8045D 		_PUSH
 1718 0b10 03F13C05 		ADD	R5,R3,#CTXT_OFS
 1719 0b14 7EE4     		_NEXT
 1720              	
 1721              	//    CP	( -- a )
 1722              	// 	Point to top name in RAM vocabulary.
 1723              	
ARM GAS  stm32eforth-fl.s 			page 34


 1724 0b16 020B0000 		.word	_CNTXT
 1725 0b1a 02       	_CP:	.byte   2
 1726 0b1b 4350     		.ascii "CP"
 1727 0b1d 0000BF   		.p2align 2 	
 1728              	CPP:
 1729 0b20 41F8045D 		_PUSH
 1730 0b24 03F14405 		ADD	R5,R3,#RAM_CTOP_OFS
 1731 0b28 74E4     		_NEXT
 1732              	
 1733              	//   FCP ( -- a )
 1734              	//  Point ot top of Forth system dictionary
 1735 0b2a 1A0B0000 		.word _CP
 1736 0b2e 03       	_FCP: .byte 3            
 1737 0b2f 464350   		.ascii "FCP"
 1738 0b32 00BF     		.p2align 2 
 1739              	FCP: 
 1740 0b34 41F8045D 		_PUSH 
 1741 0b38 03F14005 		ADD R5,R3,#FORTH_CTOP_OFS 
 1742 0b3c 6AE4     		_NEXT 
 1743              	
 1744              	//    LAST	( -- a )
 1745              	// 	Point to the last name in the name dictionary.
 1746              	
 1747 0b3e 2E0B0000 		.word	_FCP
 1748 0b42 04       	_LAST:	.byte   4
 1749 0b43 4C415354 		.ascii "LAST"
 1750 0b47 00       		.p2align 2 	
 1751              	LAST:
 1752 0b48 41F8045D 		_PUSH
 1753 0b4c 03F14805 		ADD	R5,R3,#LASTN_OFS
 1754 0b50 60E4     		_NEXT
 1755              	
 1756              	//	FTRACE ( -- a )
 1757              	// return trace flag address 
 1758 0b52 420B0000 		.word _LAST  
 1759 0b56 06       	_FTRACE: .byte 6
 1760 0b57 46545241 		.ascii "FTRACE"
 1760      4345
 1761 0b5d 0000BF   		.p2align 2 
 1762              	FTRACE:	
 1763 0b60 41F8045D 		_PUSH 
 1764 0b64 03F11005 		ADD R5,R3,#FTRACE_OFS 
 1765 0b68 54E4     		_NEXT 
 1766              	
 1767              	/***********************
 1768              		system constants 
 1769              	***********************/
 1770              	
 1771              	//	USER_BEGIN ( -- a )
 1772              	//  where user area begin in RAM
 1773 0b6a 560B0000 		.word _FTRACE
 1774 0b6e 0A       	_USER_BGN: .byte 10
 1775 0b6f 55534552 		.ascii "USER_BEGIN"
 1775      5F424547 
 1775      494E
 1776 0b79 0000BF   		.p2align 2
 1777              	USER_BEGIN:
ARM GAS  stm32eforth-fl.s 			page 35


 1778 0b7c 41F8045D 		_PUSH 
 1779 0b80 004D     		ldr r5,USR_BGN_ADR 
 1780 0b82 47E4     		_NEXT 
 1781              	USR_BGN_ADR:
 1782 0b84 00010020 	.word  DTOP 
 1783              	
 1784              	//  USER_END ( -- a )
 1785              	//  where user area end in RAM 
 1786 0b88 6E0B0000 		.word _USER_BGN
 1787 0b8c 08       	_USER_END: .byte 8 
 1788 0b8d 55534552 		.ascii "USER_END" 
 1788      5F454E44 
 1789 0b95 0000BF   		.p2align 2 
 1790              	USER_END:
 1791 0b98 41F8045D 		_PUSH 
 1792 0b9c 004D     		ldr r5,USER_END_ADR 
 1793 0b9e 39E4     		_NEXT 
 1794              	USER_END_ADR:
 1795 0ba0 004E0020 		.word DEND 
 1796              	
 1797              	//  IMG_ADR ( -- a )
 1798              	//  where user image is saved in FLASH
 1799 0ba4 8C0B0000 		.word _USER_END
 1800 0ba8 07       	_IMG_ADR: .byte 7
 1801 0ba9 494D475F 		.ascii "IMG_ADR"
 1801      414452
 1802              		.p2align 2 
 1803              	IMG_ADR:
 1804 0bb0 41F8045D 		_PUSH
 1805 0bb4 004D     		ldr r5,USR_IMG_ADR   
 1806 0bb6 2DE4     		_NEXT 
 1807              	USR_IMG_ADR:
 1808 0bb8 00000000 		.word USER_SPACE 
 1809              	
 1810              	// IMG_SIGN ( -- a )
 1811              	// image signature 
 1812 0bbc A80B0000 		.word _IMG_ADR 
 1813 0bc0 08       	_IMG_SIGN: .byte 8
 1814 0bc1 494D475F 		.ascii "IMG_SIGN"
 1814      5349474E 
 1815 0bc9 0000BF   		.p2align 2
 1816              	IMG_SIGN: 
 1817 0bcc 41F8045D 		_PUSH 
 1818 0bd0 03F11405 		ADD r5,r3,#IMG_SIGN_OFS 
 1819 0bd4 1EE4     		_NEXT 
 1820              	
 1821              	/* *********************
 1822              	  Common functions
 1823              	***********************/
 1824              	
 1825              	//    WITHIN	( u ul uh -- t )
 1826              	// 	Return true if u is within the range of ul and uh.
 1827              	
 1828 0bd6 C00B0000 		.word	_IMG_SIGN
 1829 0bda 06       	_WITHI:	.byte   6
 1830 0bdb 57495448 		.ascii "WITHIN"
 1830      494E
ARM GAS  stm32eforth-fl.s 			page 36


 1831 0be1 0000BF   		.p2align 2 	
 1832              	WITHI:
 1833 0be4 404700BF 		_NEST
 1834 0be8 B5060000 		_ADR	OVER
 1835 0bec 65070000 		_ADR	SUBB
 1836 0bf0 39060000 		_ADR	TOR
 1837 0bf4 65070000 		_ADR	SUBB
 1838 0bf8 15060000 		_ADR	RFROM
 1839 0bfc 35090000 		_ADR	ULESS
 1840 0c00 1B040000 		_UNNEST
 1841              	
 1842              	//  Divide
 1843              	
 1844              	//    UM/MOD	( udl udh u -- ur uq )
 1845              	// 	Unsigned divide of a double by a single. Return mod and quotient.
 1846              	
 1847 0c04 DA0B0000 		.word	_WITHI
 1848 0c08 06       	_UMMOD:	.byte   6
 1849 0c09 554D2F4D 		.ascii "UM/MOD"
 1849      4F44
 1850 0c0f 00       		.p2align 2 	
 1851              	UMMOD:
 1852 0c10 4FF00107 		MOV	R7,#1
 1853 0c14 51F8044B 		LDR	R4,[R1],#4
 1854 0c18 0E68     		LDR	R6,[R1]
 1855              	UMMOD0:
 1856 0c1a B619     		ADDS	R6,R6,R6
 1857 0c1c 6441     		ADCS	R4,R4,R4
 1858 0c1e 04D3     		BCC	UMMOD1
 1859 0c20 A4EB0504 		SUB	R4,R4,R5
 1860 0c24 06F10106 		ADD	R6,R6,#1
 1861 0c28 04E0     		B UMMOD2
 1862              	UMMOD1:
 1863 0c2a 641B     		SUBS	R4,R4,R5 
 1864 0c2c 28BF     		IT CS 
 1865 0c2e 0136     		ADDCS	R6,R6,#1
 1866 0c30 00D2     		BCS	UMMOD2
 1867 0c32 2C44     		ADD	R4,R4,R5
 1868              	UMMOD2:
 1869 0c34 FF19     		ADDS	R7,R7,R7
 1870 0c36 F0D3     		BCC	UMMOD0
 1871 0c38 3546     		MOV	R5,R6
 1872 0c3a 0C60     		STR	R4,[R1]
 1873 0c3c FFF7EABB 		_NEXT
 1874              	
 1875              	//    M/MOD	( d n -- r q )
 1876              	// 	Signed floored divide of double by single. Return mod and quotient.
 1877              	
 1878 0c40 080C0000 		.word	_UMMOD
 1879 0c44 05       	_MSMOD:	.byte  5
 1880 0c45 4D2F4D4F 		.ascii "M/MOD"
 1880      44
 1881 0c4a 00BF     		.p2align 2 	
 1882              	MSMOD:	
 1883 0c4c 404700BF 		_NEST
 1884 0c50 91060000 		_ADR	DUPP
 1885 0c54 C5060000 		_ADR	ZLESS
ARM GAS  stm32eforth-fl.s 			page 37


 1886 0c58 91060000 		_ADR	DUPP
 1887 0c5c 39060000 		_ADR	TOR
 1888 0c60 A9050000 		_QBRAN MMOD1
 1888      780C0000 
 1889 0c68 E5080000 		_ADR	NEGAT
 1890 0c6c 39060000 		_ADR	TOR
 1891 0c70 050A0000 		_ADR	DNEGA
 1892 0c74 15060000 		_ADR	RFROM
 1893              	MMOD1:
 1894 0c78 39060000 		_ADR	TOR
 1895 0c7c 91060000 		_ADR	DUPP
 1896 0c80 C5060000 		_ADR	ZLESS
 1897 0c84 A9050000 		_QBRAN MMOD2
 1897      940C0000 
 1898 0c8c 29060000 		_ADR	RAT
 1899 0c90 55070000 		_ADR	PLUS
 1900              	MMOD2:
 1901 0c94 15060000 		_ADR	RFROM
 1902 0c98 110C0000 		_ADR	UMMOD
 1903 0c9c 15060000 		_ADR	RFROM
 1904 0ca0 A9050000 		_QBRAN	MMOD3
 1904      B40C0000 
 1905 0ca8 A1060000 		_ADR	SWAP
 1906 0cac E5080000 		_ADR	NEGAT
 1907 0cb0 A1060000 		_ADR	SWAP
 1908              	MMOD3:   
 1909 0cb4 1B040000 		_UNNEST
 1910              	
 1911              	//    /MOD	( n n -- r q )
 1912              	// 	Signed divide. Return mod and quotient.
 1913              	
 1914 0cb8 440C0000 		.word	_MSMOD
 1915 0cbc 04       	_SLMOD:	.byte   4
 1916 0cbd 2F4D4F44 		.ascii "/MOD"
 1917 0cc1 0000BF   		.p2align 2 	
 1918              	SLMOD:
 1919 0cc4 404700BF 		_NEST
 1920 0cc8 B5060000 		_ADR	OVER
 1921 0ccc C5060000 		_ADR	ZLESS
 1922 0cd0 A1060000 		_ADR	SWAP
 1923 0cd4 4D0C0000 		_ADR	MSMOD
 1924 0cd8 1B040000 		_UNNEST
 1925              	
 1926              	//    MOD	 ( n n -- r )
 1927              	// 	Signed divide. Return mod only.
 1928              	
 1929 0cdc BC0C0000 		.word	_SLMOD
 1930 0ce0 03       	_MODD:	.byte  3
 1931 0ce1 4D4F44   		.ascii "MOD"
 1932              		.p2align 2 	
 1933              	MODD:
 1934 0ce4 404700BF 		_NEST
 1935 0ce8 C50C0000 		_ADR	SLMOD
 1936 0cec 81060000 		_ADR	DROP
 1937 0cf0 1B040000 		_UNNEST
 1938              	
 1939              	//    /	   ( n n -- q )
ARM GAS  stm32eforth-fl.s 			page 38


 1940              	// 	Signed divide. Return quotient only.
 1941              	
 1942 0cf4 E00C0000 		.word	_MODD
 1943 0cf8 01       	_SLASH:	.byte  1
 1944 0cf9 2F       		.ascii "/"
 1945 0cfa 00BF     		.p2align 2 	
 1946              	SLASH:
 1947 0cfc 404700BF 		_NEST
 1948 0d00 C50C0000 		_ADR	SLMOD
 1949 0d04 A1060000 		_ADR	SWAP
 1950 0d08 81060000 		_ADR	DROP
 1951 0d0c 1B040000 		_UNNEST
 1952              	
 1953              	//    */MOD	( n1 n2 n3 -- r q )
 1954              	// 	Multiply n1 and n2, then divide by n3. Return mod and quotient.
 1955              	
 1956 0d10 F80C0000 		.word	_SLASH
 1957 0d14 05       	_SSMOD:	.byte  5
 1958 0d15 2A2F4D4F 		.ascii "*/MOD"
 1958      44
 1959 0d1a 00BF     		.p2align 2 	
 1960              	SSMOD:
 1961 0d1c 404700BF 		_NEST
 1962 0d20 39060000 		_ADR	TOR
 1963 0d24 9D070000 		_ADR	MSTAR
 1964 0d28 15060000 		_ADR	RFROM
 1965 0d2c 4D0C0000 		_ADR	MSMOD
 1966 0d30 1B040000 		_UNNEST
 1967              	
 1968              	//    */	  ( n1 n2 n3 -- q )
 1969              	// 	Multiply n1 by n2, then divide by n3. Return quotient only.
 1970              	
 1971 0d34 140D0000 		.word	_SSMOD
 1972 0d38 02       	_STASL:	.byte  2
 1973 0d39 2A2F     		.ascii "*/"
 1974 0d3b 00       		.p2align 2 	
 1975              	STASL:
 1976 0d3c 404700BF 		_NEST
 1977 0d40 1D0D0000 		_ADR	SSMOD
 1978 0d44 A1060000 		_ADR	SWAP
 1979 0d48 81060000 		_ADR	DROP
 1980 0d4c 1B040000 		_UNNEST
 1981              	
 1982              	// **************************************************************************
 1983              	//  Miscellaneous
 1984              	
 1985              	//    ALIGNED	( b -- a )
 1986              	// 	Align address to the cell boundary.
 1987              	
 1988 0d50 380D0000 		.word	_STASL
 1989 0d54 07       	_ALGND:	.byte   7
 1990 0d55 414C4947 		.ascii "ALIGNED"
 1990      4E4544
 1991              		.p2align 2 	
 1992              	ALGND:
 1993 0d5c 05F10305 		ADD	R5,R5,#3
 1994 0d60 6FF00304 		MVN	R4,#3
ARM GAS  stm32eforth-fl.s 			page 39


 1995 0d64 05EA0405 		AND	R5,R5,R4
 1996 0d68 FFF754BB 		_NEXT
 1997              	
 1998              	//    >CHAR	( c -- c )
 1999              	// 	Filter non-printing characters.
 2000              	
 2001 0d6c 540D0000 		.word	_ALGND
 2002 0d70 05       	_TCHAR:	.byte  5
 2003 0d71 3E434841 		.ascii ">CHAR"
 2003      52
 2004 0d76 00BF     		.p2align 2 	
 2005              	TCHAR:
 2006 0d78 404700BF 		_NEST
 2007 0d7c 6D050000 		_DOLIT  0x7F
 2007      7F000000 
 2008 0d84 D5060000 		_ADR	ANDD
 2009 0d88 91060000 		_ADR	DUPP	// mask msb
 2010 0d8c 11080000 		_ADR	BLANK
 2011 0d90 6D050000 		_DOLIT 	127
 2011      7F000000 
 2012 0d98 E50B0000 		_ADR	WITHI	// check for printable
 2013 0d9c D1080000 		_ADR	INVER
 2014 0da0 A9050000 		_QBRAN	TCHA1
 2014      B40D0000 
 2015 0da8 81060000 		_ADR	DROP
 2016 0dac 6D050000 		_DOLIT 	'_'	// replace non-printables
 2016      5F000000 
 2017              	TCHA1:
 2018 0db4 1B040000 		  _UNNEST
 2019              	
 2020              	//    DEPTH	( -- n )
 2021              	// 	Return the depth of the data stack.
 2022              	
 2023 0db8 700D0000 		.word	_TCHAR
 2024 0dbc 05       	_DEPTH:	.byte  5
 2025 0dbd 44455054 		.ascii "DEPTH"
 2025      48
 2026 0dc2 00BF     		.p2align 2 	
 2027              	DEPTH:
 2028 0dc4 44F68066 		MOVW	R6,#SPP&0xffff
 2029 0dc8 C2F20006 	 	MOVT	R6,#SPP>>16 
 2030 0dcc A6EB0106 		SUB	R6,R6,R1
 2031 0dd0 41F8045D 		_PUSH
 2032 0dd4 4FEAA605 		ASR	R5,R6,#2
 2033 0dd8 FFF71CBB 		_NEXT
 2034              	
 2035              	//    PICK	( ... +n -- ... w )
 2036              	// 	Copy the nth stack item to tos.
 2037              	
 2038 0ddc BC0D0000 		.word	_DEPTH
 2039 0de0 04       	_PICK:	.byte  4
 2040 0de1 5049434B 		.ascii "PICK"
 2041 0de5 0000BF   		.p2align 2 	
 2042              	PICK:
 2043 0de8 404700BF 		_NEST
 2044 0dec B1070000 		_ADR	ONEP
 2045 0df0 25080000 		_ADR	CELLS
ARM GAS  stm32eforth-fl.s 			page 40


 2046 0df4 6D060000 		_ADR	SPAT
 2047 0df8 55070000 		_ADR	PLUS
 2048 0dfc E9050000 		_ADR	AT
 2049 0e00 1B040000 		_UNNEST
 2050              	
 2051              	// **************************************************************************
 2052              	//  Memory access
 2053              	
 2054              	//    HERE	( -- a )
 2055              	// 	Return the top of the code dictionary.
 2056              	
 2057 0e04 E00D0000 		.word	_PICK
 2058 0e08 04       	_HERE:	.byte  4
 2059 0e09 48455245 		.ascii "HERE"
 2060 0e0d 0000BF   		.p2align 2 	
 2061              	HERE:
 2062 0e10 404700BF 		_NEST
 2063 0e14 210B0000 		_ADR	CPP
 2064 0e18 E9050000 		_ADR	AT
 2065 0e1c 1B040000 		_UNNEST
 2066              		
 2067              	//    PAD	 ( -- a )
 2068              	// 	Return the address of a temporary buffer.
 2069              	
 2070 0e20 080E0000 		.word	_HERE
 2071 0e24 03       	_PAD:	.byte  3
 2072 0e25 504144   		.ascii "PAD"
 2073              		.p2align 2 	
 2074              	PAD:
 2075 0e28 404700BF 		_NEST
 2076 0e2c 110E0000 		_ADR	HERE
 2077 0e30 6D050000 		_DOLIT 80
 2077      50000000 
 2078 0e38 55070000 		_ADR PLUS 
 2079 0e3c 1B040000 		_UNNEST
 2080              	
 2081              	//    TIB	 ( -- a )
 2082              	// 	Return the address of the terminal input buffer.
 2083              	
 2084 0e40 240E0000 		.word	_PAD
 2085 0e44 03       	_TIB:	.byte  3
 2086 0e45 544942   		.ascii "TIB"
 2087              		.p2align 2 	
 2088              	TIB:
 2089 0e48 41F8045D 		_PUSH
 2090 0e4c 1D6B     		ldr r5,[r3,#TIB_OFS]
 2091 0e4e FFF7E1BA 		_NEXT
 2092              	
 2093              	//    @EXECUTE	( a -- )
 2094              	// 	Execute vector stored in address a.
 2095              	
 2096 0e52 440E0000 		.word	_TIB
 2097 0e56 08       	_ATEXE:	.byte   8
 2098 0e57 40455845 		.ascii "@EXECUTE"
 2098      43555445 
 2099 0e5f 00       		.p2align 2 	
 2100              	ATEXE: 
ARM GAS  stm32eforth-fl.s 			page 41


 2101 0e60 2C00     		MOVS	R4,R5
 2102 0e62 51F8045B 		_POP
 2103 0e66 2468     		LDR	R4,[R4]
 2104 0e68 44F00104 		ORR	R4,R4,#1
 2105 0e6c 18BF     	    IT NE 
 2106 0e6e 2047     		BXNE	R4
 2107 0e70 FFF7D0BA 		_NEXT
 2108              	
 2109              	//    CMOVE	( b1 b2 u -- )
 2110              	// 	Copy u bytes from b1 to b2.
 2111              	
 2112 0e74 560E0000 		.word	_ATEXE
 2113 0e78 05       	_CMOVE:	.byte   5
 2114 0e79 434D4F56 		.ascii "CMOVE"
 2114      45
 2115 0e7e 00BF     		.p2align 2 	
 2116              	CMOVE:
 2117 0e80 51F8046B 		LDR	R6,[R1],#4
 2118 0e84 51F8047B 		LDR	R7,[R1],#4
 2119 0e88 03E0     		B CMOV1
 2120              	CMOV0:
 2121 0e8a 17F8014B 		LDRB	R4,[R7],#1
 2122 0e8e 06F8014B 		STRB	R4,[R6],#1
 2123              	CMOV1:
 2124 0e92 2D00     		MOVS	R5,R5
 2125 0e94 02D0     		BEQ	CMOV2
 2126 0e96 A5F10105 		SUB	R5,R5,#1
 2127 0e9a F6E7     		B CMOV0
 2128              	CMOV2:
 2129 0e9c 51F8045B 		_POP
 2130 0ea0 FFF7B8BA 		_NEXT
 2131              	
 2132              	//    MOVE	( a1 a2 u -- )
 2133              	// 	Copy u words from a1 to a2.
 2134              	
 2135 0ea4 780E0000 		.word	_CMOVE
 2136 0ea8 04       	_MOVE:	.byte   4
 2137 0ea9 4D4F5645 		.ascii "MOVE"
 2138 0ead 0000BF   		.p2align 2 	
 2139              	MOVE:
 2140 0eb0 25F00305 		AND	R5,R5,#-4
 2141 0eb4 51F8046B 		LDR	R6,[R1],#4
 2142 0eb8 51F8047B 		LDR	R7,[R1],#4
 2143 0ebc 03E0     		B MOVE1
 2144              	MOVE0:
 2145 0ebe 57F8044B 		LDR	R4,[R7],#4
 2146 0ec2 46F8044B 		STR	R4,[R6],#4
 2147              	MOVE1:
 2148 0ec6 2D00     		MOVS	R5,R5
 2149 0ec8 02D0     		BEQ	MOVE2
 2150 0eca A5F10405 		SUB	R5,R5,#4
 2151 0ece F6E7     		B MOVE0
 2152              	MOVE2:
 2153 0ed0 51F8045B 		_POP
 2154 0ed4 FFF79EBA 		_NEXT
 2155              	
 2156              	//    FILL	( b u c -- )
ARM GAS  stm32eforth-fl.s 			page 42


 2157              	// 	Fill u bytes of character c to area beginning at b.
 2158              	
 2159 0ed8 A80E0000 		.word	_MOVE
 2160 0edc 04       	_FILL:	.byte   4
 2161 0edd 46494C4C 		.ascii "FILL"
 2162 0ee1 0000BF   		.p2align 2 	
 2163              	FILL:
 2164 0ee4 51F8046B 		LDR	R6,[R1],#4
 2165 0ee8 51F8047B 		LDR	R7,[R1],#4
 2166              	FILL0:
 2167 0eec 00E0     		B FILL1
 2168 0eee 2D46     		MOV	R5,R5
 2169              	FILL1:
 2170 0ef0 07F8015B 		STRB	R5,[R7],#1
 2171 0ef4 3600     		MOVS	R6,R6
 2172 0ef6 02D0     		BEQ	FILL2
 2173 0ef8 A6F10106 		SUB	R6,R6,#1
 2174 0efc F6E7     		B FILL0
 2175              	FILL2:
 2176 0efe 51F8045B 		_POP
 2177 0f02 FFF787BA 		_NEXT
 2178              	
 2179              	//    PACK$	( b u a -- a )
 2180              	// 	Build a counted word with u characters from b. Null fill.
 2181              	
 2182 0f06 DC0E0000 		.word	_FILL
 2183 0f0a 05       	_PACKS:	.byte  5
 2184 0f0b 5041434B 		.ascii "PACK$$"
 2184      2424
 2185 0f11 0000BF   		.p2align 2 	
 2186              	PACKS:
 2187 0f14 404700BF 		_NEST
 2188 0f18 5D0D0000 		_ADR	ALGND
 2189 0f1c 91060000 		_ADR	DUPP
 2190 0f20 39060000 		_ADR	TOR			// strings only on cell boundary
 2191 0f24 B5060000 		_ADR	OVER
 2192 0f28 55070000 		_ADR	PLUS
 2193 0f2c B1070000 		_ADR	ONEP
 2194 0f30 6D050000 		_DOLIT 	0xFFFFFFFC
 2194      FCFFFFFF 
 2195 0f38 D5060000 		_ADR	ANDD			// count mod cell
 2196 0f3c 6D050000 		_DOLIT 	0
 2196      00000000 
 2197 0f44 A1060000 		_ADR	SWAP
 2198 0f48 D5050000 		_ADR	STORE			// null fill cell
 2199 0f4c 29060000 		_ADR	RAT
 2200 0f50 A1080000 		_ADR	DDUP
 2201 0f54 F5050000 		_ADR	CSTOR
 2202 0f58 B1070000 		_ADR	ONEP			// save count
 2203 0f5c A1060000 		_ADR	SWAP
 2204 0f60 810E0000 		_ADR	CMOVE
 2205 0f64 15060000 		_ADR	RFROM
 2206 0f68 1B040000 		_UNNEST   			// move string
 2207              	
 2208              	// **************************************************************************
 2209              	//  Numeric output, single precision
 2210              	
ARM GAS  stm32eforth-fl.s 			page 43


 2211              	//    DIGIT	( u -- c )
 2212              	// 	Convert digit u to a character.
 2213              	
 2214 0f6c 0A0F0000 		.word	_PACKS
 2215 0f70 05       	_DIGIT:	.byte  5
 2216 0f71 44494749 		.ascii "DIGIT"
 2216      54
 2217 0f76 00BF     		.p2align 2 	
 2218              	DIGIT:
 2219 0f78 404700BF 		_NEST
 2220 0f7c 6D050000 		_DOLIT 9
 2220      09000000 
 2221 0f84 B5060000 		_ADR	OVER
 2222 0f88 4D090000 		_ADR	LESS
 2223 0f8c 6D050000 		_DOLIT	7
 2223      07000000 
 2224 0f94 D5060000 		_ADR	ANDD
 2225 0f98 55070000 		_ADR	PLUS
 2226 0f9c 6D050000 		_DOLIT	'0'
 2226      30000000 
 2227 0fa4 55070000 		_ADR	PLUS 
 2228 0fa8 1B040000 		_UNNEST
 2229              	
 2230              	//    EXTRACT	( n base -- n c )
 2231              	// 	Extract the least significant digit from n.
 2232              	
 2233 0fac 700F0000 		.word	_DIGIT
 2234 0fb0 07       	_EXTRC:	.byte  7
 2235 0fb1 45585452 		.ascii "EXTRACT"
 2235      414354
 2236              		.p2align 2 	
 2237              	EXTRC:
 2238 0fb8 404700BF 		_NEST
 2239 0fbc 6D050000 		_DOLIT 0
 2239      00000000 
 2240 0fc4 A1060000 		_ADR	SWAP
 2241 0fc8 110C0000 		_ADR	UMMOD
 2242 0fcc A1060000 		_ADR	SWAP
 2243 0fd0 790F0000 		_ADR	DIGIT
 2244 0fd4 1B040000 		_UNNEST
 2245              	
 2246              	//    <#	  ( -- )
 2247              	// 	Initiate the numeric output process.
 2248              	
 2249 0fd8 B00F0000 		.word	_EXTRC
 2250 0fdc 02       	_BDIGS:	.byte  2
 2251 0fdd 3C23     		.ascii "<#"
 2252 0fdf 00       		.p2align 2 	
 2253              	BDIGS:
 2254 0fe0 404700BF 		_NEST
 2255 0fe4 290E0000 		_ADR	PAD
 2256 0fe8 F50A0000 		_ADR	HLD
 2257 0fec D5050000 		_ADR	STORE
 2258 0ff0 1B040000 		_UNNEST
 2259              	
 2260              	//    HOLD	( c -- )
 2261              	// 	Insert a character into the numeric output string.
ARM GAS  stm32eforth-fl.s 			page 44


 2262              	
 2263 0ff4 DC0F0000 		.word	_BDIGS
 2264 0ff8 04       	_HOLD:	.byte  4
 2265 0ff9 484F4C44 		.ascii "HOLD"
 2266 0ffd 0000BF   		.p2align 2 	
 2267              	HOLD:
 2268 1000 404700BF 		_NEST
 2269 1004 F50A0000 		_ADR	HLD
 2270 1008 E9050000 		_ADR	AT
 2271 100c C1070000 		_ADR	ONEM
 2272 1010 91060000 		_ADR	DUPP
 2273 1014 F50A0000 		_ADR	HLD
 2274 1018 D5050000 		_ADR	STORE
 2275 101c F5050000 		_ADR	CSTOR
 2276 1020 1B040000 		_UNNEST
 2277              	
 2278              	//    #	   ( u -- u )
 2279              	// 	Extract one digit from u and append the digit to output string.
 2280              	
 2281 1024 F80F0000 		.word	_HOLD
 2282 1028 01       	_DIG:	.byte  1
 2283 1029 23       		.ascii "#"
 2284 102a 00BF     		.p2align 2 	
 2285              	DIG:
 2286 102c 404700BF 		_NEST
 2287 1030 850A0000 		_ADR	BASE
 2288 1034 E9050000 		_ADR	AT
 2289 1038 B90F0000 		_ADR	EXTRC
 2290 103c 01100000 		_ADR	HOLD
 2291 1040 1B040000 		_UNNEST
 2292              	
 2293              	//    #S	  ( u -- 0 )
 2294              	// 	Convert u until all digits are added to the output string.
 2295              	
 2296 1044 28100000 		.word	_DIG
 2297 1048 02       	_DIGS:	.byte  2
 2298 1049 2353     		.ascii "#S"
 2299 104b 00       		.p2align 2 	
 2300              	DIGS:
 2301 104c 404700BF 		_NEST
 2302              	DIGS1:
 2303 1050 2D100000 	    _ADR	DIG
 2304 1054 91060000 		_ADR	DUPP
 2305 1058 A9050000 		_QBRAN 	DIGS2
 2305      68100000 
 2306 1060 BB050000 		_BRAN	DIGS1
 2306      50100000 
 2307              	DIGS2:
 2308 1068 1B040000 		  _UNNEST
 2309              	
 2310              	//    SIGN	( n -- )
 2311              	// 	Add a minus sign to the numeric output string.
 2312              	
 2313 106c 48100000 		.word	_DIGS
 2314 1070 04       	_SIGN:	.byte  4
 2315 1071 5349474E 		.ascii "SIGN"
 2316 1075 0000BF   		.p2align 2 	
ARM GAS  stm32eforth-fl.s 			page 45


 2317              	SIGN:
 2318 1078 404700BF 		_NEST
 2319 107c C5060000 		_ADR	ZLESS
 2320 1080 A9050000 		_QBRAN	SIGN1
 2320      94100000 
 2321 1088 6D050000 		_DOLIT '-'
 2321      2D000000 
 2322 1090 01100000 		_ADR	HOLD
 2323              	SIGN1:
 2324 1094 1B040000 		  _UNNEST
 2325              	
 2326              	//    #>	  ( w -- b u )
 2327              	// 	Prepare the output word to be TYPE'd.
 2328              	
 2329 1098 70100000 		.word	_SIGN
 2330 109c 02       	_EDIGS:	.byte  2
 2331 109d 233E     		.ascii "#>"
 2332 109f 00       		.p2align 2 	
 2333              	EDIGS:
 2334 10a0 404700BF 		_NEST
 2335 10a4 81060000 		_ADR	DROP
 2336 10a8 F50A0000 		_ADR	HLD
 2337 10ac E9050000 		_ADR	AT
 2338 10b0 290E0000 		_ADR	PAD
 2339 10b4 B5060000 		_ADR	OVER
 2340 10b8 65070000 		_ADR	SUBB
 2341 10bc 1B040000 		_UNNEST
 2342              	
 2343              	//    str	 ( n -- b u )
 2344              	// 	Convert a signed integer to a numeric string.
 2345              	
 2346              	// 	.word	_EDIGS
 2347              	// _STRR	.byte  3
 2348              	// 	.ascii "str"
 2349              	// 	.p2align 2 	
 2350              	STRR:
 2351 10c0 404700BF 		_NEST
 2352 10c4 91060000 		_ADR	DUPP
 2353 10c8 39060000 		_ADR	TOR
 2354 10cc F5080000 		_ADR	ABSS
 2355 10d0 E10F0000 		_ADR	BDIGS
 2356 10d4 4D100000 		_ADR	DIGS
 2357 10d8 15060000 		_ADR	RFROM
 2358 10dc 79100000 		_ADR	SIGN
 2359 10e0 A1100000 		_ADR	EDIGS
 2360 10e4 1B040000 		_UNNEST
 2361              	
 2362              	//    HEX	 ( -- )
 2363              	// 	Use radix 16 as base for numeric conversions.
 2364              	
 2365 10e8 9C100000 		.word	_EDIGS
 2366 10ec 03       	_HEX:	.byte  3
 2367 10ed 484558   		.ascii "HEX"
 2368              		.p2align 2 	
 2369              	HEX:
 2370 10f0 404700BF 		_NEST
 2371 10f4 6D050000 		_DOLIT 16
ARM GAS  stm32eforth-fl.s 			page 46


 2371      10000000 
 2372 10fc 850A0000 		_ADR	BASE
 2373 1100 D5050000 		_ADR	STORE
 2374 1104 1B040000 		_UNNEST
 2375              	
 2376              	//    DECIMAL	( -- )
 2377              	// 	Use radix 10 as base for numeric conversions.
 2378              	
 2379 1108 EC100000 		.word	_HEX
 2380 110c 07       	_DECIM:	.byte  7
 2381 110d 44454349 		.ascii "DECIMAL"
 2381      4D414C
 2382              		.p2align 2 	
 2383              	DECIM:
 2384 1114 404700BF 		_NEST
 2385 1118 6D050000 		_DOLIT 10
 2385      0A000000 
 2386 1120 850A0000 		_ADR	BASE
 2387 1124 D5050000 		_ADR	STORE
 2388 1128 1B040000 		_UNNEST
 2389              	
 2390              	// **************************************************************************
 2391              	//  Numeric input, single precision
 2392              	
 2393              	//    DIGIT?	( c base -- u t )
 2394              	// 	Convert a character to its numeric value. A flag indicates success.
 2395              	
 2396 112c 0C110000 		.word	_DECIM
 2397 1130 06       	_DIGTQ:	.byte  6
 2398 1131 44494749 		.ascii "DIGIT?"
 2398      543F
 2399 1137 00       		.p2align 2 	
 2400              	DIGTQ:
 2401 1138 404700BF 		_NEST
 2402 113c 39060000 		_ADR	TOR
 2403 1140 6D050000 		_DOLIT 	'0'
 2403      30000000 
 2404 1148 65070000 		_ADR	SUBB
 2405 114c 6D050000 		_DOLIT 9
 2405      09000000 
 2406 1154 B5060000 		_ADR	OVER
 2407 1158 4D090000 		_ADR	LESS
 2408 115c A9050000 		_QBRAN	DGTQ1
 2408      84110000 
 2409 1164 6D050000 		_DOLIT 7
 2409      07000000 
 2410 116c 65070000 		_ADR	SUBB
 2411 1170 91060000 		_ADR	DUPP
 2412 1174 6D050000 		_DOLIT	10
 2412      0A000000 
 2413 117c 4D090000 		_ADR	LESS
 2414 1180 E9060000 		_ADR	ORR
 2415              	DGTQ1:
 2416 1184 91060000 		_ADR	DUPP
 2417 1188 15060000 		_ADR	RFROM
 2418 118c 35090000 		_ADR	ULESS
 2419 1190 1B040000 		_UNNEST
ARM GAS  stm32eforth-fl.s 			page 47


 2420              	
 2421              	//    NUMBER?	( a -- n T | a F )
 2422              	// 	Convert a number word to integer. Push a flag on tos.
 2423              	
 2424 1194 30110000 		.word	_DIGTQ
 2425 1198 07       	_NUMBQ:	.byte  7
 2426 1199 4E554D42 		.ascii "NUMBER?"
 2426      45523F
 2427              		.p2align 2 	
 2428              	NUMBQ:
 2429 11a0 404700BF 		_NEST
 2430 11a4 850A0000 		_ADR	BASE
 2431 11a8 E9050000 		_ADR	AT
 2432 11ac 39060000 		_ADR	TOR
 2433 11b0 6D050000 		_DOLIT	0
 2433      00000000 
 2434 11b8 B5060000 		_ADR	OVER
 2435 11bc ED090000 		_ADR	COUNT
 2436 11c0 B5060000 		_ADR	OVER
 2437 11c4 09060000 		_ADR	CAT
 2438 11c8 6D050000 		_DOLIT '$'
 2438      24000000 
 2439 11d0 1D090000 		_ADR	EQUAL
 2440 11d4 A9050000 		_QBRAN	NUMQ1
 2440      F0110000 
 2441 11dc F1100000 		_ADR	HEX
 2442 11e0 A1060000 		_ADR	SWAP
 2443 11e4 B1070000 		_ADR	ONEP
 2444 11e8 A1060000 		_ADR	SWAP
 2445 11ec C1070000 		_ADR	ONEM
 2446              	NUMQ1:
 2447 11f0 B5060000 		_ADR	OVER
 2448 11f4 09060000 		_ADR	CAT
 2449 11f8 6D050000 		_DOLIT	'-'
 2449      2D000000 
 2450 1200 1D090000 		_ADR	EQUAL
 2451 1204 39060000 		_ADR	TOR
 2452 1208 A1060000 		_ADR	SWAP
 2453 120c 29060000 		_ADR	RAT
 2454 1210 65070000 		_ADR	SUBB
 2455 1214 A1060000 		_ADR	SWAP
 2456 1218 29060000 		_ADR	RAT
 2457 121c 55070000 		_ADR	PLUS
 2458 1220 65080000 		_ADR	QDUP
 2459 1224 A9050000 		_QBRAN	NUMQ6
 2459      B8120000 
 2460 122c C1070000 		_ADR	ONEM
 2461 1230 39060000 		_ADR	TOR
 2462              	NUMQ2:
 2463 1234 91060000 		_ADR	DUPP
 2464 1238 39060000 		_ADR	TOR
 2465 123c 09060000 		_ADR	CAT
 2466 1240 850A0000 		_ADR	BASE
 2467 1244 E9050000 		_ADR	AT
 2468 1248 39110000 		_ADR	DIGTQ
 2469 124c A9050000 		_QBRAN	NUMQ4
 2469      9C120000 
ARM GAS  stm32eforth-fl.s 			page 48


 2470 1254 A1060000 		_ADR	SWAP
 2471 1258 850A0000 		_ADR	BASE
 2472 125c E9050000 		_ADR	AT
 2473 1260 75070000 		_ADR	STAR
 2474 1264 55070000 		_ADR	PLUS
 2475 1268 15060000 		_ADR	RFROM
 2476 126c B1070000 		_ADR	ONEP
 2477 1270 91050000 		_DONXT	NUMQ2
 2477      34120000 
 2478 1278 29060000 		_ADR	RAT
 2479 127c A1060000 		_ADR	SWAP
 2480 1280 81060000 		_ADR	DROP
 2481 1284 A9050000 		_QBRAN	NUMQ3
 2481      90120000 
 2482 128c E5080000 		_ADR	NEGAT
 2483              	NUMQ3:
 2484 1290 A1060000 		_ADR	SWAP
 2485 1294 BB050000 		_BRAN	NUMQ5
 2485      B4120000 
 2486              	NUMQ4:
 2487 129c 15060000 		_ADR	RFROM
 2488 12a0 15060000 		_ADR	RFROM
 2489 12a4 8D080000 		_ADR	DDROP
 2490 12a8 8D080000 		_ADR	DDROP
 2491 12ac 6D050000 		_DOLIT	0
 2491      00000000 
 2492              	NUMQ5:
 2493 12b4 91060000 		_ADR	DUPP
 2494              	NUMQ6:
 2495 12b8 15060000 		_ADR	RFROM
 2496 12bc 8D080000 		_ADR	DDROP
 2497 12c0 15060000 		_ADR	RFROM
 2498 12c4 850A0000 		_ADR	BASE
 2499 12c8 D5050000 		_ADR	STORE
 2500 12cc 1B040000 		_UNNEST
 2501              	
 2502              	// **************************************************************************
 2503              	//  Basic I/O
 2504              	
 2505              	//    KEY	 ( -- c )
 2506              	// 	Wait for and return an input character.
 2507              	
 2508 12d0 98110000 		.word	_NUMBQ
 2509 12d4 03       	_KEY:	.byte  3
 2510 12d5 4B4559   		.ascii "KEY"
 2511              		.p2align 2 	
 2512              	KEY:
 2513 12d8 404700BF 		_NEST
 2514              	KEY1:
 2515 12dc 19050000 		_ADR	QRX
 2516 12e0 A9050000 		_QBRAN	KEY1
 2516      DC120000 
 2517              	// CTRL-C reboot
 2518 12e8 91060000 		_ADR DUPP 
 2519 12ec 6D050000 		_DOLIT	3 
 2519      03000000 
 2520 12f4 FD060000 		_ADR XORR
ARM GAS  stm32eforth-fl.s 			page 49


 2521 12f8 A9050000 		_QBRAN	GO_REBOOT 
 2521      04130000 
 2522 1300 1B040000 		_UNNEST
 2523              	GO_REBOOT: 
 2524 1304 31000000 		_ADR REBOOT 
 2525              	
 2526              	//    SPACE	( -- )
 2527              	// 	Send the blank character to the output device.
 2528              	
 2529 1308 D4120000 		.word	_KEY
 2530 130c 05       	_SPACE:	.byte  5
 2531 130d 53504143 		.ascii "SPACE"
 2531      45
 2532 1312 00BF     		.p2align 2 	
 2533              	SPACE:
 2534 1314 404700BF 		_NEST
 2535 1318 11080000 		_ADR	BLANK
 2536 131c 49050000 		_ADR	EMIT
 2537 1320 1B040000 		_UNNEST
 2538              	
 2539              	//    SPACES	( +n -- )
 2540              	// 	Send n spaces to the output device.
 2541              	
 2542 1324 0C130000 		.word	_SPACE
 2543 1328 06       	_SPACS:	.byte  6
 2544 1329 53504143 		.ascii "SPACES"
 2544      4553
 2545 132f 00       		.p2align 2 	
 2546              	SPACS:
 2547 1330 404700BF 		_NEST
 2548 1334 6D050000 		_DOLIT	0
 2548      00000000 
 2549 133c 7D090000 		_ADR	MAX
 2550 1340 39060000 		_ADR	TOR
 2551 1344 BB050000 		_BRAN	CHAR2
 2551      50130000 
 2552              	CHAR1:
 2553 134c 15130000 		_ADR	SPACE
 2554              	CHAR2:
 2555 1350 91050000 		_DONXT	CHAR1
 2555      4C130000 
 2556 1358 1B040000 		_UNNEST
 2557              	
 2558              	//    TYPE	( b u -- )
 2559              	// 	Output u characters from b.
 2560              	
 2561 135c 28130000 		.word	_SPACS
 2562 1360 04       	_TYPEE:	.byte	4
 2563 1361 54595045 		.ascii "TYPE"
 2564 1365 0000BF   		.p2align 2 	
 2565              	TYPEE:
 2566 1368 404700BF 		_NEST
 2567 136c 39060000 		_ADR  TOR   // ( a+1 -- R: u )
 2568 1370 BB050000 		_BRAN	TYPE2
 2568      84130000 
 2569              	TYPE1:  
 2570 1378 ED090000 		_ADR  COUNT
ARM GAS  stm32eforth-fl.s 			page 50


 2571 137c 790D0000 		_ADR TCHAR
 2572 1380 49050000 		_ADR EMIT
 2573              	TYPE2:  
 2574 1384 91050000 		_DONXT	TYPE1
 2574      78130000 
 2575 138c 81060000 		_ADR	DROP
 2576 1390 1B040000 		_UNNEST
 2577              	
 2578              	//    CR	  ( -- )
 2579              	// 	Output a carriage return and a line feed.
 2580              	
 2581 1394 60130000 		.word	_TYPEE
 2582 1398 02       	_CR:	.byte  2
 2583 1399 4352     		.ascii "CR"
 2584 139b 00       		.p2align 2 	
 2585              	CR:
 2586 139c 404700BF 		_NEST
 2587 13a0 6D050000 		_DOLIT	CRR
 2587      0D000000 
 2588 13a8 49050000 		_ADR	EMIT
 2589 13ac 6D050000 		_DOLIT	LF
 2589      0A000000 
 2590 13b4 49050000 		_ADR	EMIT
 2591 13b8 1B040000 		_UNNEST
 2592              	
 2593              	//    do_$	( -- a )
 2594              	// 	Return the address of a compiled string.
 2595              	//  adjust return address to skip over it.
 2596              	
 2597              	// 	.word	_CR
 2598              	// _DOSTR	.byte  COMPO+3
 2599              	// 	.ascii "do$$"
 2600              	// 	.p2align 2 	
 2601              	DOSTR:
 2602 13bc 404700BF 		_NEST     
 2603              	/* compiled string address is 2 levels deep */
 2604 13c0 15060000 		_ADR	RFROM	// { -- a1 }
 2605 13c4 15060000 		_ADR	RFROM	//  {a1 -- a1 a2 } 
 2606 13c8 91060000 		_ADR	DUPP	// {a1 a2 -- a1 a2 a2 }
 2607 13cc ED090000 		_ADR	COUNT	//  get addr+1 count  { a1 a2 -- a1 a2 a2+1 c }
 2608 13d0 55070000 		_ADR	PLUS	// { -- a1 a2 a2+1+c }
 2609 13d4 5D0D0000 		_ADR	ALGND	//  end of string
 2610              	//	_ADR	ONEP	//  restore b0, this result in return address 2 level deep.
 2611 13d8 39060000 		_ADR	TOR		//  address after string { -- a1 a2 }
 2612 13dc A1060000 		_ADR	SWAP	//  count tugged
 2613 13e0 39060000 		_ADR	TOR     //  ( -- a2) is string address
 2614 13e4 1B040000 		_UNNEST
 2615              	
 2616              	//    $"|	( -- a )
 2617              	// 	Run time routine compiled by _". Return address of a compiled string.
 2618              	
 2619              	// 	.word	_DOSTR
 2620              	// _STRQP	.byte  COMPO+3
 2621              	// 	.ascii "$\"|"
 2622              	// 	.p2align 2 	
 2623              	STRQP:
 2624 13e8 404700BF 		_NEST
ARM GAS  stm32eforth-fl.s 			page 51


 2625 13ec BD130000 		_ADR	DOSTR
 2626 13f0 1B040000 		_UNNEST			// force a call to dostr
 2627              	
 2628              	//    .$	( a -- )
 2629              	// 	Run time routine of ." . Output a compiled string.
 2630              	
 2631              	// 	.word	_STRQP
 2632              	// _DOTST	.byte  COMPO+2
 2633              	// 	.ascii ".$$"
 2634              	// 	.p2align 2 	
 2635              	DOTST:
 2636 13f4 404700BF 		_NEST
 2637 13f8 ED090000 		_ADR	COUNT // ( -- a+1 c )
 2638 13fc 69130000 		_ADR	TYPEE
 2639 1400 1B040000 		_UNNEST
 2640              	
 2641              	//    ."|	( -- )
 2642              	// 	Run time routine of ." . Output a compiled string.
 2643              	
 2644              	// 	.word	_DOTST
 2645              	// _DOTQP	.byte  COMPO+3
 2646              	// 	.ascii ".""|"
 2647              	// 	.p2align 2 	
 2648              	DOTQP:
 2649 1404 404700BF 		_NEST
 2650 1408 BD130000 		_ADR	DOSTR
 2651 140c F5130000 		_ADR	DOTST
 2652 1410 1B040000 		_UNNEST
 2653              	
 2654              	//    .R	  ( n +n -- )
 2655              	// 	Display an integer in a field of n columns, right justified.
 2656              	
 2657 1414 98130000 		.word	_CR
 2658 1418 02       	_DOTR:	.byte  2
 2659 1419 2E52     		.ascii ".R"
 2660 141b 00       		.p2align 2 	
 2661              	DOTR:
 2662 141c 404700BF 		_NEST
 2663 1420 39060000 		_ADR	TOR
 2664 1424 C1100000 		_ADR	STRR
 2665 1428 15060000 		_ADR	RFROM
 2666 142c B5060000 		_ADR	OVER
 2667 1430 65070000 		_ADR	SUBB
 2668 1434 31130000 		_ADR	SPACS
 2669 1438 69130000 		_ADR	TYPEE
 2670 143c 1B040000 		_UNNEST
 2671              	
 2672              	//    U.R	 ( u +n -- )
 2673              	// 	Display an unsigned integer in n column, right justified.
 2674              	
 2675 1440 18140000 		.word	_DOTR
 2676 1444 03       	_UDOTR:	.byte  3
 2677 1445 552E52   		.ascii "U.R"
 2678              		.p2align 2 	
 2679              	UDOTR:
 2680 1448 404700BF 		_NEST
 2681 144c 39060000 		_ADR	TOR
ARM GAS  stm32eforth-fl.s 			page 52


 2682 1450 E10F0000 		_ADR	BDIGS
 2683 1454 4D100000 		_ADR	DIGS
 2684 1458 A1100000 		_ADR	EDIGS
 2685 145c 15060000 		_ADR	RFROM
 2686 1460 B5060000 		_ADR	OVER
 2687 1464 65070000 		_ADR	SUBB
 2688 1468 31130000 		_ADR	SPACS
 2689 146c 69130000 		_ADR	TYPEE
 2690 1470 1B040000 		_UNNEST
 2691              	
 2692              	//    U.	  ( u -- )
 2693              	// 	Display an unsigned integer in free format.
 2694              	
 2695 1474 44140000 		.word	_UDOTR
 2696 1478 02       	_UDOT:	.byte  2
 2697 1479 552E     		.ascii "U."
 2698 147b 00       		.p2align 2 	
 2699              	UDOT:
 2700 147c 404700BF 		_NEST
 2701 1480 E10F0000 		_ADR	BDIGS
 2702 1484 4D100000 		_ADR	DIGS
 2703 1488 A1100000 		_ADR	EDIGS
 2704 148c 15130000 		_ADR	SPACE
 2705 1490 69130000 		_ADR	TYPEE
 2706 1494 1B040000 		_UNNEST
 2707              	
 2708              	//    .	   ( w -- )
 2709              	// 	Display an integer in free format, preceeded by a space.
 2710              	
 2711 1498 78140000 		.word	_UDOT
 2712 149c 01       	_DOT:	.byte  1
 2713 149d 2E       		.ascii "."
 2714 149e 00BF     		.p2align 2 	
 2715              	DOT:
 2716 14a0 404700BF 		_NEST
 2717 14a4 850A0000 		_ADR	BASE
 2718 14a8 E9050000 		_ADR	AT
 2719 14ac 6D050000 		_DOLIT 10
 2719      0A000000 
 2720 14b4 FD060000 		_ADR	XORR			// ?decimal
 2721 14b8 A9050000 		_QBRAN	DOT1
 2721      C8140000 
 2722 14c0 7D140000 		_ADR	UDOT
 2723 14c4 1B040000 		_UNNEST			// no,display unsigned
 2724              	DOT1:
 2725 14c8 C1100000 	    _ADR	STRR
 2726 14cc 15130000 		_ADR	SPACE
 2727 14d0 69130000 		_ADR	TYPEE
 2728 14d4 1B040000 		_UNNEST			// yes, display signed
 2729              	
 2730              	//    ?	   ( a -- )
 2731              	// 	Display the contents in a memory cell.
 2732              	
 2733 14d8 9C140000 		.word	_DOT
 2734 14dc 01       	_QUEST:	.byte  1
 2735 14dd 3F       		.ascii "?"
 2736 14de 00BF     		.p2align 2 	
ARM GAS  stm32eforth-fl.s 			page 53


 2737              	QUEST:
 2738 14e0 404700BF 		_NEST
 2739 14e4 E9050000 		_ADR	AT
 2740 14e8 A1140000 		_ADR	DOT
 2741 14ec 1B040000 		_UNNEST
 2742              	
 2743              	// **************************************************************************
 2744              	//  Parsing
 2745              	
 2746              	//    parse	( b u c -- b u delta //  string> )
 2747              	// 	Scan word delimited by c. Return found string and its offset.
 2748              	
 2749              	// 	.word	_QUEST
 2750              	// _PARS	.byte  5
 2751              	// 	.ascii "parse"
 2752              	// 	.p2align 2 	
 2753              	PARS:
 2754 14f0 404700BF 		_NEST
 2755 14f4 8F0A0000 		_ADR	TEMP
 2756 14f8 D5050000 		_ADR	STORE
 2757 14fc B5060000 		_ADR	OVER
 2758 1500 39060000 		_ADR	TOR
 2759 1504 91060000 		_ADR	DUPP
 2760 1508 A9050000 		_QBRAN	PARS8
 2760      04160000 
 2761 1510 C1070000 		_ADR	ONEM
 2762 1514 8F0A0000 		_ADR	TEMP
 2763 1518 E9050000 		_ADR	AT
 2764 151c 11080000 		_ADR	BLANK
 2765 1520 1D090000 		_ADR	EQUAL
 2766 1524 A9050000 		_QBRAN	PARS3
 2766      78150000 
 2767 152c 39060000 		_ADR	TOR
 2768              	PARS1:
 2769 1530 11080000 		_ADR	BLANK
 2770 1534 B5060000 		_ADR	OVER
 2771 1538 09060000 		_ADR	CAT			// skip leading blanks 
 2772 153c 65070000 		_ADR	SUBB
 2773 1540 C5060000 		_ADR	ZLESS
 2774 1544 D1080000 		_ADR	INVER
 2775 1548 A9050000 		_QBRAN	PARS2
 2775      74150000 
 2776 1550 B1070000 		_ADR	ONEP
 2777 1554 91050000 		_DONXT	PARS1
 2777      30150000 
 2778 155c 15060000 		_ADR	RFROM
 2779 1560 81060000 		_ADR	DROP
 2780 1564 6D050000 		_DOLIT	0
 2780      00000000 
 2781 156c 91060000 		_ADR	DUPP
 2782 1570 1B040000 		_UNNEST
 2783              	PARS2:
 2784 1574 15060000 		_ADR	RFROM
 2785              	PARS3:
 2786 1578 B5060000 		_ADR	OVER
 2787 157c A1060000 		_ADR	SWAP
 2788 1580 39060000 		_ADR	TOR
ARM GAS  stm32eforth-fl.s 			page 54


 2789              	PARS4:
 2790 1584 8F0A0000 		_ADR	TEMP
 2791 1588 E9050000 		_ADR	AT
 2792 158c B5060000 		_ADR	OVER
 2793 1590 09060000 		_ADR	CAT
 2794 1594 65070000 		_ADR	SUBB			// scan for delimiter
 2795 1598 8F0A0000 		_ADR	TEMP
 2796 159c E9050000 		_ADR	AT
 2797 15a0 11080000 		_ADR	BLANK
 2798 15a4 1D090000 		_ADR	EQUAL
 2799 15a8 A9050000 		_QBRAN	PARS5
 2799      B4150000 
 2800 15b0 C5060000 		_ADR	ZLESS
 2801              	PARS5:
 2802 15b4 A9050000 		_QBRAN	PARS6
 2802      D8150000 
 2803 15bc B1070000 		_ADR	ONEP
 2804 15c0 91050000 		_DONXT	PARS4
 2804      84150000 
 2805 15c8 91060000 		_ADR	DUPP
 2806 15cc 39060000 		_ADR	TOR
 2807 15d0 BB050000 		_BRAN	PARS7
 2807      EC150000 
 2808              	PARS6:
 2809 15d8 15060000 		_ADR	RFROM
 2810 15dc 81060000 		_ADR	DROP
 2811 15e0 91060000 		_ADR	DUPP
 2812 15e4 B1070000 		_ADR	ONEP
 2813 15e8 39060000 		_ADR	TOR
 2814              	PARS7:
 2815 15ec B5060000 		_ADR	OVER
 2816 15f0 65070000 		_ADR	SUBB
 2817 15f4 15060000 		_ADR	RFROM
 2818 15f8 15060000 		_ADR	RFROM
 2819 15fc 65070000 		_ADR	SUBB
 2820 1600 1B040000 		_UNNEST
 2821              	PARS8:
 2822 1604 B5060000 		_ADR	OVER
 2823 1608 15060000 		_ADR	RFROM
 2824 160c 65070000 		_ADR	SUBB
 2825 1610 1B040000 		_UNNEST
 2826              	
 2827              	//    PARSE	( c -- b u //  string> )
 2828              	// 	Scan input stream and return counted string delimited by c.
 2829              	
 2830 1614 DC140000 		.word	_QUEST
 2831 1618 05       	_PARSE:	.byte  5
 2832 1619 50415253 		.ascii "PARSE"
 2832      45
 2833 161e 00BF     		.p2align 2 	
 2834              	PARSE:
 2835 1620 404700BF 		_NEST
 2836 1624 39060000 		_ADR	TOR
 2837 1628 490E0000 		_ADR	TIB
 2838 162c B90A0000 		_ADR	INN
 2839 1630 E9050000 		_ADR	AT
 2840 1634 55070000 		_ADR	PLUS			// current input buffer pointer
ARM GAS  stm32eforth-fl.s 			page 55


 2841 1638 CD0A0000 		_ADR	NTIB
 2842 163c E9050000 		_ADR	AT
 2843 1640 B90A0000 		_ADR	INN
 2844 1644 E9050000 		_ADR	AT
 2845 1648 65070000 		_ADR	SUBB			// remaining count
 2846 164c 15060000 		_ADR	RFROM
 2847 1650 F1140000 		_ADR	PARS
 2848 1654 B90A0000 		_ADR	INN
 2849 1658 A5090000 		_ADR	PSTOR
 2850 165c 1B040000 		_UNNEST
 2851              	
 2852              	//    .(	  ( -- )
 2853              	// 	Output following string up to next ) .
 2854              	
 2855 1660 18160000 		.word	_PARSE
 2856 1664 82       	_DOTPR:	.byte  IMEDD+2
 2857 1665 2E28     		.ascii ".("
 2858 1667 00       		.p2align 2 	
 2859              	DOTPR:
 2860 1668 404700BF 		_NEST
 2861 166c 6D050000 		_DOLIT	')'
 2861      29000000 
 2862 1674 21160000 		_ADR	PARSE
 2863 1678 69130000 		_ADR	TYPEE
 2864 167c 1B040000 		_UNNEST
 2865              	
 2866              	//    (	   ( -- )
 2867              	// 	Ignore following string up to next ) . A comment.
 2868              	
 2869 1680 64160000 		.word	_DOTPR
 2870 1684 81       	_PAREN:	.byte  IMEDD+1
 2871 1685 28       		.ascii "("
 2872 1686 00BF     		.p2align 2 	
 2873              	PAREN:
 2874 1688 404700BF 		_NEST
 2875 168c 6D050000 		_DOLIT	')'
 2875      29000000 
 2876 1694 21160000 		_ADR	PARSE
 2877 1698 8D080000 		_ADR	DDROP
 2878 169c 1B040000 		_UNNEST
 2879              	
 2880              	//    \	   ( -- )
 2881              	// 	Ignore following text till the end of line.
 2882              	
 2883 16a0 84160000 		.word	_PAREN
 2884 16a4 81       	_BKSLA:	.byte  IMEDD+1
 2885 16a5 5C       		.byte	'\\'
 2886 16a6 00BF     		.p2align 2 	
 2887              	BKSLA:
 2888 16a8 404700BF 		_NEST
 2889 16ac CD0A0000 		_ADR	NTIB
 2890 16b0 E9050000 		_ADR	AT
 2891 16b4 B90A0000 		_ADR	INN
 2892 16b8 D5050000 		_ADR	STORE
 2893 16bc 1B040000 		_UNNEST
 2894              	
 2895              	//    CHAR	( -- c )
ARM GAS  stm32eforth-fl.s 			page 56


 2896              	// 	Parse next word and return its first character.
 2897              	
 2898 16c0 A4160000 		.word	_BKSLA
 2899 16c4 04       	_CHAR:	.byte  4
 2900 16c5 43484152 		.ascii "CHAR"
 2901 16c9 0000BF   		.p2align 2 	
 2902              	CHAR:
 2903 16cc 404700BF 		_NEST
 2904 16d0 11080000 		_ADR	BLANK
 2905 16d4 21160000 		_ADR	PARSE
 2906 16d8 81060000 		_ADR	DROP
 2907 16dc 09060000 		_ADR	CAT
 2908 16e0 1B040000 		_UNNEST
 2909              	
 2910              	//    WORD	( c -- a //  string> )
 2911              	// 	Parse a word from input stream and copy it to code dictionary.
 2912              	
 2913 16e4 C4160000 		.word	_CHAR
 2914 16e8 04       	_WORDD:	.byte  4
 2915 16e9 574F5244 		.ascii "WORD"
 2916 16ed 0000BF   		.p2align 2 	
 2917              	WORDD:
 2918 16f0 404700BF 		_NEST
 2919 16f4 21160000 		_ADR	PARSE
 2920 16f8 110E0000 		_ADR	HERE
 2921 16fc F1070000 		_ADR	CELLP
 2922 1700 150F0000 		_ADR	PACKS
 2923 1704 1B040000 		_UNNEST
 2924              	
 2925              	//    TOKEN	( -- a //  string> )
 2926              	// 	Parse a word from input stream and copy it to name dictionary.
 2927              	
 2928 1708 E8160000 		.word	_WORDD
 2929 170c 05       	_TOKEN:	.byte  5
 2930 170d 544F4B45 		.ascii "TOKEN"
 2930      4E
 2931 1712 00BF     		.p2align 2 	
 2932              	TOKEN:
 2933 1714 404700BF 		_NEST
 2934 1718 11080000 		_ADR	BLANK
 2935 171c F1160000 		_ADR	WORDD
 2936 1720 1B040000 		_UNNEST
 2937              	
 2938              	// **************************************************************************
 2939              	//  Dictionary search
 2940              	
 2941              	//    NAME>	( na -- ca )
 2942              	// 	Return a code address given a name address.
 2943              	
 2944 1724 0C170000 		.word	_TOKEN
 2945 1728 05       	_NAMET:	.byte  5
 2946 1729 4E414D45 		.ascii "NAME>"
 2946      3E
 2947 172e 00BF     		.p2align 2 	
 2948              	NAMET:
 2949 1730 404700BF 		_NEST
 2950 1734 ED090000 		_ADR	COUNT
ARM GAS  stm32eforth-fl.s 			page 57


 2951 1738 6D050000 		_DOLIT	0x1F
 2951      1F000000 
 2952 1740 D5060000 		_ADR	ANDD
 2953 1744 55070000 		_ADR	PLUS
 2954 1748 5D0D0000 		_ADR	ALGND
 2955 174c 1B040000 		_UNNEST
 2956              	
 2957              	//    SAME?	( a1 a2 u -- a1 a2 f | -0+ )
 2958              	// 	Compare u bytes in two strings. Return 0 if identical.
 2959              	//
 2960              	//  Picatout 2020-12-01, 
 2961              	//      Because of problem with .align directive that
 2962              	// 		doesn't fill with zero's I had to change the "SAME?" and "FIND" 
 2963              	// 		words  to do a byte by byte comparison. 
 2964              	//
 2965 1750 28170000 		.word	_NAMET
 2966 1754 05       	_SAMEQ:	.byte  5
 2967 1755 53414D45 		.ascii "SAME?"
 2967      3F
 2968 175a 00BF     		.p2align 2	
 2969              	SAMEQ:
 2970 175c 404700BF 		_NEST
 2971 1760 39060000 		_ADR	TOR
 2972 1764 BB050000 		_BRAN	SAME2
 2972      A8170000 
 2973              	SAME1:
 2974 176c B5060000 		_ADR	OVER  // ( a1 a2 -- a1 a2 a1 )
 2975 1770 29060000 		_ADR	RAT   // a1 a2 a1 u 
 2976 1774 55070000 		_ADR	PLUS  // a1 a2 a1+u 
 2977 1778 09060000 		_ADR	CAT	   // a1 a2 c1    		
 2978 177c B5060000 		_ADR	OVER  // a1 a2 c1 a2 
 2979 1780 29060000 		_ADR	RAT    
 2980 1784 55070000 		_ADR	PLUS    
 2981 1788 09060000 		_ADR	CAT	  // a1 a2 c1 c2
 2982 178c 65070000 		_ADR	SUBB  
 2983 1790 65080000 		_ADR	QDUP
 2984 1794 A9050000 		_QBRAN	SAME2
 2984      A8170000 
 2985 179c 15060000 		_ADR	RFROM
 2986 17a0 81060000 		_ADR	DROP
 2987 17a4 1B040000 		_UNNEST	// strings not equal
 2988              	SAME2:
 2989 17a8 91050000 		_DONXT	SAME1
 2989      6C170000 
 2990 17b0 6D050000 		_DOLIT	0
 2990      00000000 
 2991 17b8 1B040000 		_UNNEST	// strings equal
 2992              	
 2993              	//    find	( a na -- ca na | a F )
 2994              	// 	Search a vocabulary for a string. Return ca and na if succeeded.
 2995              	
 2996              	//  Picatout 2020-12-01,  
 2997              	//		Modified from original. See comment for word "SAME?" 
 2998              	
 2999              	// 	.word	_SAMEQ
 3000              	// _FIND	.byte  4
 3001              	// 	.ascii "find"
ARM GAS  stm32eforth-fl.s 			page 58


 3002              	// 	.p2align 2 	
 3003              	FIND:
 3004 17bc 404700BF 		_NEST
 3005 17c0 A1060000 		_ADR	SWAP			// na a	
 3006 17c4 ED090000 		_ADR	COUNT			// na a+1 count
 3007 17c8 91060000 		_ADR	DUPP 
 3008 17cc 8F0A0000 		_ADR	TEMP
 3009 17d0 D5050000 		_ADR	STORE			// na a+1 count 
 3010 17d4 39060000 		_ADR  TOR		// na a+1  R: count  
 3011 17d8 A1060000 		_ADR	SWAP			// a+1 na
 3012              	FIND1:
 3013 17dc 91060000 		_ADR	DUPP			// a+1 na na
 3014 17e0 A9050000 		_QBRAN	FIND6	// end of vocabulary
 3014      34180000 
 3015 17e8 91060000 		_ADR	DUPP			// a+1 na na
 3016 17ec 09060000 		_ADR	CAT			// a+1 na name1
 3017 17f0 6D050000 		_DOLIT	MASKK
 3017      1FFFFFFF 
 3018 17f8 D5060000 		_ADR	ANDD
 3019 17fc 29060000 		_ADR	RAT			// a+1 na name1 count 
 3020 1800 FD060000 		_ADR	XORR			// a+1 na,  same length?
 3021 1804 A9050000 		_QBRAN	FIND2
 3021      1C180000 
 3022 180c 01080000 		_ADR	CELLM			// a+1 la
 3023 1810 E9050000 		_ADR	AT			// a+1 next_na
 3024 1814 BB050000 		_BRAN	FIND1			// try next word
 3024      DC170000 
 3025              	FIND2:   
 3026 181c B1070000 		_ADR	ONEP			// a+1 na+1
 3027 1820 8F0A0000 		_ADR	TEMP
 3028 1824 E9050000 		_ADR	AT			// a+1 na+1 count
 3029 1828 5D170000 		_ADR	SAMEQ		// a+1 na+1 ? 
 3030              	FIND3:	
 3031 182c BB050000 		_BRAN	FIND4
 3031      4C180000 
 3032              	FIND6:	
 3033 1834 15060000 		_ADR	RFROM			// a+1 0 name1 -- , no match
 3034 1838 81060000 		_ADR	DROP			// a+1 0
 3035 183c A1060000 		_ADR	SWAP			// 0 a+1
 3036 1840 C1070000 		_ADR	ONEM			// 0 a
 3037 1844 A1060000 		_ADR	SWAP			// a 0 
 3038 1848 1B040000 		_UNNEST			// return without a match
 3039              	FIND4:	
 3040 184c A9050000 		_QBRAN	FIND5			// a+1 na+1
 3040      68180000 
 3041 1854 C1070000 		_ADR	ONEM			// a+1 na
 3042 1858 01080000 		_ADR	CELLM			// a+4 la
 3043 185c E9050000 		_ADR	AT			// a+1 next_na
 3044 1860 BB050000 		_BRAN	FIND1			// compare next name
 3044      DC170000 
 3045              	FIND5:	
 3046 1868 15060000 		_ADR	RFROM			// a+1 na+1 count
 3047 186c 81060000 		_ADR	DROP			// a+1 na+1
 3048 1870 A1060000 		_ADR	SWAP			// na+1 a+1
 3049 1874 81060000 		_ADR	DROP			// na+1
 3050 1878 C1070000 		_ADR	ONEM			// na
 3051 187c 91060000 		_ADR	DUPP			// na na
ARM GAS  stm32eforth-fl.s 			page 59


 3052 1880 31170000 		_ADR	NAMET			// na ca
 3053 1884 A1060000 		_ADR	SWAP			// ca na
 3054 1888 1B040000 		_UNNEST			//  return with a match
 3055              	
 3056              	//    NAME?	( a -- ca na | a F )
 3057              	// 	Search all context vocabularies for a string.
 3058              	
 3059 188c 54170000 		.word	_SAMEQ
 3060 1890 05       	_NAMEQ:	.byte  5
 3061 1891 4E414D45 		.ascii "NAME?"
 3061      3F
 3062 1896 00BF     		.p2align 2 	
 3063              	NAMEQ:
 3064 1898 404700BF 		_NEST
 3065 189c 0D0B0000 		_ADR	CNTXT
 3066 18a0 E9050000 		_ADR	AT
 3067 18a4 BD170000 		_ADR	FIND
 3068 18a8 1B040000 		_UNNEST
 3069              	
 3070              	// **************************************************************************
 3071              	//  Terminal input
 3072              	
 3073              	//    	  ( bot eot cur -- bot eot cur )
 3074              	// 	Backup the cursor by one character.
 3075              	
 3076              	// 	.word	_NAMEQ
 3077              	// _BKSP	.byte  2
 3078              	// 	.ascii "^H"
 3079              	// 	.p2align 2 	
 3080              	BKSP:
 3081 18ac 404700BF 		_NEST
 3082 18b0 39060000 		_ADR	TOR
 3083 18b4 B5060000 		_ADR	OVER
 3084 18b8 15060000 		_ADR	RFROM
 3085 18bc A1060000 		_ADR	SWAP
 3086 18c0 B5060000 		_ADR	OVER
 3087 18c4 FD060000 		_ADR	XORR
 3088 18c8 A9050000 		_QBRAN	BACK1
 3088      F4180000 
 3089 18d0 6D050000 		_DOLIT	BKSPP
 3089      08000000 
 3090 18d8 49050000 		_ADR	TECHO
 3091 18dc C1070000 		_ADR	ONEM
 3092 18e0 11080000 		_ADR	BLANK
 3093 18e4 49050000 		_ADR	TECHO
 3094 18e8 6D050000 		_DOLIT	BKSPP
 3094      08000000 
 3095 18f0 49050000 		_ADR	TECHO
 3096              	BACK1:
 3097 18f4 1B040000 		  _UNNEST
 3098              	
 3099              	//    TAP	 ( bot eot cur c -- bot eot cur )
 3100              	// 	Accept and echo the key stroke and bump the cursor.
 3101              	
 3102              	// 	.word	_BKSP
 3103              	// _TAP	.byte  3
 3104              	// 	.ascii "TAP"
ARM GAS  stm32eforth-fl.s 			page 60


 3105              	// 	.p2align 2 	
 3106              	TAP:
 3107 18f8 404700BF 		_NEST
 3108 18fc 91060000 		_ADR	DUPP
 3109 1900 49050000 		_ADR	TECHO
 3110 1904 B5060000 		_ADR	OVER
 3111 1908 F5050000 		_ADR	CSTOR
 3112 190c B1070000 		_ADR	ONEP
 3113 1910 1B040000 		_UNNEST
 3114              	
 3115              	//    kTAP	( bot eot cur c -- bot eot cur )
 3116              	// 	Process a key stroke, CR or backspace.
 3117              	
 3118              	// 	.word	_TAP
 3119              	// _KTAP	.byte  4
 3120              	// 	.ascii "kTAP"
 3121              	// 	.p2align 2 	
 3122              	KTAP:
 3123              	TTAP:
 3124 1914 404700BF 		_NEST
 3125 1918 91060000 		_ADR	DUPP
 3126 191c 6D050000 		_DOLIT	CRR
 3126      0D000000 
 3127 1924 FD060000 		_ADR	XORR
 3128 1928 A9050000 		_QBRAN  KTAP2
 3128      58190000 
 3129 1930 6D050000 		_DOLIT	BKSPP
 3129      08000000 
 3130 1938 FD060000 		_ADR	XORR
 3131 193c A9050000 		_QBRAN	KTAP1
 3131      50190000 
 3132 1944 11080000 		_ADR	BLANK
 3133 1948 F9180000 		_ADR	TAP
 3134 194c 1B040000 		_UNNEST
 3135              	//	.word	0			// patch
 3136              	KTAP1:
 3137 1950 AD180000 		_ADR	BKSP
 3138 1954 1B040000 		_UNNEST
 3139              	KTAP2:
 3140 1958 81060000 		_ADR	DROP
 3141 195c A1060000 		_ADR	SWAP
 3142 1960 81060000 		_ADR	DROP
 3143 1964 91060000 		_ADR	DUPP
 3144 1968 1B040000 		_UNNEST
 3145              	
 3146              	//    ACCEPT	( b u -- b u )
 3147              	// 	Accept characters to input buffer. Return with actual count.
 3148              	
 3149 196c 90180000 		.word	_NAMEQ
 3150 1970 06       	_ACCEP:	.byte  6
 3151 1971 41434345 		.ascii "ACCEPT"
 3151      5054
 3152 1977 00       		.p2align 2 	
 3153              	ACCEP:
 3154 1978 404700BF 		_NEST
 3155 197c B5060000 		_ADR	OVER
 3156 1980 55070000 		_ADR	PLUS
ARM GAS  stm32eforth-fl.s 			page 61


 3157 1984 B5060000 		_ADR	OVER
 3158              	ACCP1:
 3159 1988 A1080000 		_ADR	DDUP
 3160 198c FD060000 		_ADR	XORR
 3161 1990 A9050000 		_QBRAN	ACCP4
 3161      D0190000 
 3162 1998 D9120000 		_ADR	KEY
 3163 199c 91060000 		_ADR	DUPP
 3164 19a0 11080000 		_ADR	BLANK
 3165 19a4 6D050000 		_DOLIT 127
 3165      7F000000 
 3166 19ac E50B0000 		_ADR	WITHI
 3167 19b0 A9050000 		_QBRAN	ACCP2
 3167      C4190000 
 3168 19b8 F9180000 		_ADR	TAP
 3169 19bc BB050000 		_BRAN	ACCP3
 3169      C8190000 
 3170              	ACCP2:
 3171 19c4 15190000 		_ADR	KTAP
 3172              	ACCP3:	  
 3173 19c8 BB050000 		_BRAN	ACCP1
 3173      88190000 
 3174              	ACCP4:
 3175 19d0 81060000 		_ADR	DROP
 3176 19d4 B5060000 		_ADR	OVER
 3177 19d8 65070000 		_ADR	SUBB
 3178 19dc 1B040000 		_UNNEST
 3179              	
 3180              	//    QUERY	( -- )
 3181              	// 	Accept input stream to terminal input buffer.
 3182              	
 3183 19e0 70190000 		.word	_ACCEP
 3184 19e4 05       	_QUERY:	.byte  5
 3185 19e5 51554552 		.ascii "QUERY"
 3185      59
 3186 19ea 00BF     		.p2align 2 	
 3187              	QUERY:
 3188 19ec 404700BF 		_NEST
 3189 19f0 490E0000 		_ADR	TIB
 3190 19f4 6D050000 		_DOLIT 80
 3190      50000000 
 3191 19fc 79190000 		_ADR	ACCEP
 3192 1a00 CD0A0000 		_ADR	NTIB
 3193 1a04 D5050000 		_ADR	STORE
 3194 1a08 81060000 		_ADR	DROP
 3195 1a0c 6D050000 		_DOLIT	0
 3195      00000000 
 3196 1a14 B90A0000 		_ADR	INN
 3197 1a18 D5050000 		_ADR	STORE
 3198 1a1c 1B040000 		_UNNEST
 3199              	
 3200              	// **************************************************************************
 3201              	//  Error handling
 3202              	
 3203              	//    ABORT	( a -- )
 3204              	// 	Reset data stack and jump to QUIT.
 3205              	
ARM GAS  stm32eforth-fl.s 			page 62


 3206 1a20 E4190000 		.word	_QUERY
 3207 1a24 05       	_ABORT:	.byte  5
 3208 1a25 41424F52 		.ascii "ABORT"
 3208      54
 3209 1a2a 00BF     		.p2align 2 	
 3210              	ABORT:
 3211 1a2c 404700BF 		_NEST
 3212              	ABORT1:
 3213 1a30 15130000 		_ADR	SPACE
 3214 1a34 ED090000 		_ADR	COUNT
 3215 1a38 69130000 		_ADR	TYPEE
 3216 1a3c 6D050000 		_DOLIT	0X3F
 3216      3F000000 
 3217 1a44 49050000 		_ADR	EMIT
 3218 1a48 9D130000 		_ADR	CR
 3219 1a4c B51B0000 		_ADR	PRESE
 3220 1a50 BB050000 		_BRAN	QUIT
 3220      D41B0000 
 3221              	
 3222              	//    _abort"	( f -- )
 3223              	// 	Run time routine of ABORT" . Abort with a message.
 3224              	
 3225              	// 	.word	_ABORT
 3226              	// _ABORQ	.byte  COMPO+6
 3227              	// 	.ascii "abort\""
 3228              	// 	.p2align 2 	
 3229              	ABORQ:
 3230 1a58 404700BF 		_NEST
 3231 1a5c BD130000 		_ADR	DOSTR
 3232 1a60 A1060000 		_ADR	SWAP 
 3233 1a64 A9050000 		_QBRAN	1f	// text flag
 3233      741A0000 
 3234 1a6c BB050000 		_BRAN	ABORT1
 3234      301A0000 
 3235              	1:
 3236 1a74 81060000 		_ADR	DROP
 3237 1a78 1B040000 		_UNNEST			// drop error
 3238              	
 3239              	// **************************************************************************
 3240              	//  The text interpreter
 3241              	
 3242              	//    $INTERPRET  ( a -- )
 3243              	// 	Interpret a word. If failed, try to convert it to an integer.
 3244              	
 3245 1a7c 241A0000 		.word	_ABORT
 3246 1a80 0A       	_INTER:	.byte  10
 3247 1a81 2424494E 		.ascii "$$INTERPRET"
 3247      54455250 
 3247      524554
 3248              		.p2align 2 	
 3249              	INTER:
 3250 1a8c 404700BF 		_NEST
 3251 1a90 99180000 		_ADR	NAMEQ
 3252 1a94 65080000 		_ADR	QDUP	// ?defined
 3253 1a98 A9050000 		_QBRAN	INTE1
 3253      CC1A0000 
 3254 1aa0 E9050000 		_ADR	AT
ARM GAS  stm32eforth-fl.s 			page 63


 3255 1aa4 6D050000 		_DOLIT	COMPO
 3255      40000000 
 3256 1aac D5060000 		_ADR	ANDD	// ?compile only lexicon bits
 3257 1ab0 591A0000 		_ABORQ	13," compile only"
 3257      0D20636F 
 3257      6D70696C 
 3257      65206F6E 
 3257      6C7900BF 
 3258 1ac4 85050000 		_ADR	EXECU
 3259 1ac8 1B040000 		_UNNEST			// execute defined word
 3260              	INTE1:
 3261 1acc A1110000 		_ADR	NUMBQ
 3262 1ad0 A9050000 		_QBRAN	INTE2
 3262      DC1A0000 
 3263 1ad8 1B040000 		_UNNEST
 3264              	INTE2:
 3265 1adc 2D1A0000 		_ADR	ABORT	// error
 3266              	
 3267              	//    [	   ( -- )
 3268              	// 	Start the text interpreter.
 3269              	
 3270 1ae0 801A0000 		.word	_INTER
 3271 1ae4 81       	_LBRAC:	.byte  IMEDD+1
 3272 1ae5 5B       		.ascii "["
 3273 1ae6 00BF     		.p2align 2 	
 3274              	LBRAC:
 3275 1ae8 404700BF 		_NEST
 3276 1aec 6D050000 		_DOLIT	INTER
 3276      8C1A0000 
 3277 1af4 E10A0000 		_ADR	TEVAL
 3278 1af8 D5050000 		_ADR	STORE
 3279 1afc 1B040000 		_UNNEST
 3280              	
 3281              	//    .OK	 ( -- )
 3282              	// 	Display "ok" only while interpreting.
 3283              	
 3284 1b00 E41A0000 		.word	_LBRAC
 3285 1b04 03       	_DOTOK:	.byte  3
 3286 1b05 2E4F4B   		.ascii ".OK"
 3287              		.p2align 2 	
 3288              	DOTOK:
 3289 1b08 404700BF 		_NEST
 3290 1b0c 6D050000 		_DOLIT	INTER
 3290      8C1A0000 
 3291 1b14 E10A0000 		_ADR	TEVAL
 3292 1b18 E9050000 		_ADR	AT
 3293 1b1c 1D090000 		_ADR	EQUAL
 3294 1b20 A9050000 		_QBRAN	DOTO1
 3294      301B0000 
 3295 1b28 05140000 		_DOTQP	3," ok"
 3295      03206F6B 
 3296              	DOTO1:
 3297 1b30 9D130000 		_ADR	CR
 3298 1b34 1B040000 		_UNNEST
 3299              	
 3300              	//    ?STACK	( -- )
 3301              	// 	Abort if the data stack underflows.
ARM GAS  stm32eforth-fl.s 			page 64


 3302              	
 3303 1b38 041B0000 		.word	_DOTOK
 3304 1b3c 06       	_QSTAC:	.byte  6
 3305 1b3d 3F535441 		.ascii "?STACK"
 3305      434B
 3306 1b43 00       		.p2align 2 	
 3307              	QSTAC:
 3308 1b44 404700BF 		_NEST
 3309 1b48 C50D0000 		_ADR	DEPTH
 3310 1b4c C5060000 		_ADR	ZLESS	// check only for underflow
 3311 1b50 591A0000 		_ABORQ	9,"underflow"
 3311      09756E64 
 3311      6572666C 
 3311      6F7700BF 
 3312 1b60 1B040000 		_UNNEST
 3313              	
 3314              	//    EVAL	( -- )
 3315              	// 	Interpret the input stream.
 3316              	
 3317 1b64 3C1B0000 		.word	_QSTAC
 3318 1b68 04       	_EVAL:	.byte  4
 3319 1b69 4556414C 		.ascii "EVAL"
 3320 1b6d 0000BF   		.p2align 2 	
 3321              	EVAL:
 3322 1b70 404700BF 		_NEST
 3323              	EVAL1:
 3324 1b74 15170000 	    _ADR	TOKEN
 3325 1b78 91060000 		_ADR	DUPP
 3326 1b7c 09060000 		_ADR	CAT	// ?input stream empty
 3327 1b80 A9050000 		_QBRAN	EVAL2
 3327      9C1B0000 
 3328 1b88 E10A0000 		_ADR	TEVAL
 3329 1b8c 610E0000 		_ADR	ATEXE
 3330 1b90 451B0000 		_ADR	QSTAC	// evaluate input, check stack
 3331 1b94 BB050000 		_BRAN	EVAL1
 3331      741B0000 
 3332              	EVAL2:
 3333 1b9c 81060000 		_ADR	DROP
 3334 1ba0 091B0000 		_ADR	DOTOK
 3335 1ba4 1B040000 		_UNNEST	// prompt
 3336              	
 3337              	//    PRESET	( -- )
 3338              	// 	Reset data stack pointer and the terminal input buffer.
 3339              	
 3340 1ba8 681B0000 		.word	_EVAL
 3341 1bac 06       	_PRESE:	.byte  6
 3342 1bad 50524553 		.ascii "PRESET"
 3342      4554
 3343 1bb3 00       		.p2align 2 	
 3344              	PRESE:
 3345 1bb4 404700BF 		_NEST 
 3346 1bb8 6D050000 		_DOLIT SPP 
 3346      804E0020 
 3347 1bc0 5D060000 		_ADR SPSTOR 
 3348 1bc4 1B040000 		_UNNEST 
 3349              	
 3350              	//    QUIT	( -- )
ARM GAS  stm32eforth-fl.s 			page 65


 3351              	// 	Reset return stack pointer and start text interpreter.
 3352              	
 3353 1bc8 AC1B0000 		.word	_PRESE
 3354 1bcc 04       	_QUIT:	.byte  4
 3355 1bcd 51554954 		.ascii "QUIT"
 3356 1bd1 0000BF   		.p2align 2 	
 3357              	QUIT:
 3358 1bd4 6D050000 		_DOLIT RPP 
 3358      804F0020 
 3359 1bdc 4D060000 		_ADR RPSTOR 
 3360              	QUIT1:
 3361 1be0 E91A0000 		_ADR	LBRAC			// start interpretation
 3362              	QUIT2:
 3363 1be4 ED190000 		_ADR	QUERY			// get input
 3364 1be8 711B0000 		_ADR	EVAL
 3365 1bec BB050000 		_BRAN	QUIT2	// continue till error
 3365      E41B0000 
 3366              	
 3367              	/***************************
 3368              	//  Flash memory interface
 3369              	***************************/
 3370              		.p2align 2 
 3371              	unlock:	//  unlock flash memory	
 3372 1bf4 DFF81474 		ldr	r7, flash_regs 
 3373 1bf8 4FF03406 		mov r6,#(0xD<<2) // clear EOP|WRPRTERR|PGERR bits 
 3374 1bfc FE60     		str r6,[r7,#FLASH_SR]
 3375 1bfe 3E69     		ldr r6,[r7,#FLASH_CR]
 3376 1c00 16F0800F 		tst r6,#(1<<7)
 3377 1c04 06D0     		beq 1f 
 3378 1c06 DFF80864 		ldr	r6, flash_regs+4 // key1
 3379 1c0a 7E60     		str	r6, [r7, #FLASH_KEYR]
 3380 1c0c DFF80464 		ldr	r6, flash_regs+8 // key2 
 3381 1c10 7E60     		str	r6, [r7, #FLASH_KEYR]
 3382 1c12 EFE7     		b unlock 
 3383              		/* unlock option registers */
 3384              	/*	
 3385              		ldr	r6, flash_regs+4 
 3386              		str	r6, [r7, #FLASH_OPTKEYR]
 3387              		ldr	r6, flash_regs+8
 3388              		str	r6, [r7, #FLASH_OPTKEYR]
 3389              	*/
 3390 1c14 7047     	1:	bx lr 
 3391              	
 3392 1c16 00BF     		.p2align 2 
 3393              	WAIT_BSY:
 3394 1c18 FC4F     		ldr	r7,flash_regs
 3395              	WAIT1:
 3396 1c1a FE68     		ldr	r6, [r7, #FLASH_SR]	//  FLASH_SR
 3397 1c1c 16F00106 		ands	r6, #0x1	//  BSY
 3398 1c20 FBD1     		bne	WAIT1
 3399 1c22 7047     		_RET 
 3400              		
 3401              		.p2align 2
 3402              	
 3403              	//    ERASE_PAGE	   ( adr -- F )
 3404              	// 	  Erase one page of flash memory.
 3405              	//    stm32f103 page size is 1024 bytes 
ARM GAS  stm32eforth-fl.s 			page 66


 3406              	//    adr is any address inside page to erase 
 3407              	//	  return success|fail flag 
 3408              	
 3409 1c24 CC1B0000 		.word _QUIT  
 3410 1c28 0A       	_EPAGE:	.byte  10
 3411 1c29 45524153 		.ascii "ERASE_PAGE"
 3411      455F5041 
 3411      4745
 3412 1c33 00       		.p2align 2 	
 3413              	
 3414              	EPAGE: 	//  page --
 3415 1c34 F54F     		ldr r7,flash_regs 	 
 3416 1c36 4FF00206 		mov r6,#2 // set PER bit 
 3417 1c3a 3E61     		str r6,[r7,#FLASH_CR]
 3418 1c3c 7D61     		str r5,[r7,#FLASH_AR] // page to erase address 
 3419 1c3e 3E69     		ldr	r6,[r7, #FLASH_CR]	
 3420 1c40 46F04006 		orr	R6,#0x40	//  set STRT bit   
 3421 1c44 3E61     		str	r6,[r7, #FLASH_CR]	//  start erasing
 3422 1c46 00B5FFF7 	 	_CALL	WAIT_BSY // wait until done
 3422      E6FF5DF8 
 3422      04EB
 3423 1c50 FD68     		ldr r5,[r7,#FLASH_SR] // check for errors 
 3424 1c52 05F01405 		and r5,r5,#(5<<2)
 3425 1c56 FEF7DDBB 		_NEXT 
 3426              	
 3427 1c5a 00BF     		.p2align 2 
 3428              	// store 16 bit word
 3429              	// expect flash unlocked
 3430              	// return success|fail flag   
 3431              	HWORD_WRITE: // ( hword address -- f  )
 3432 1c5c EB4F     		ldr r7,flash_regs 
 3433 1c5e 3C69     		ldr	r4, [r7, #FLASH_CR]	//  FLASH_CR
 3434 1c60 4FF00104 		mov r4,#1 // set PG 
 3435 1c64 3C61     		str r4,[r7,#FLASH_CR]
 3436 1c66 2E46     		mov r6,r5 
 3437 1c68 51F8045B 		_POP 
 3438 1c6c 3580     		strh r5,[r6] 
 3439 1c6e 00B5FFF7 		_CALL WAIT_BSY 
 3439      D2FF5DF8 
 3439      04EB
 3440 1c78 FD68     		ldr r5,[r7,#FLASH_SR]
 3441 1c7a 05F01405 		and r5,r5,#(5<<2) 
 3442 1c7e FEF7C9BB 		_NEXT 
 3443              	
 3444 1c82 00BF     		.p2align 2 
 3445              	//    I!	   ( data address -- )
 3446              	// 	   Write one word into flash memory
 3447              	//	   address must even 
 3448              	
 3449 1c84 281C0000 		.word	_EPAGE
 3450 1c88 02       	_ISTOR:	.byte  2
 3451 1c89 4921     		.ascii "I!"
 3452 1c8b 00       		.p2align 2 	
 3453              	ISTOR:	//  data address --
 3454 1c8c 404700BF 		_NEST 
 3455 1c90 A1080000 		_ADR DDUP 
 3456 1c94 39060000 		_ADR TOR 
ARM GAS  stm32eforth-fl.s 			page 67


 3457 1c98 39060000 		_ADR TOR 
 3458 1c9c 5D1C0000 		_ADR HWORD_WRITE
 3459 1ca0 A9050000 		_QBRAN 1f 
 3459      BC1C0000 
 3460 1ca8 591A0000 	0:	_ABORQ 10, "write failed"
 3460      0A777269 
 3460      74652066 
 3460      61696C65 
 3460      640000BF 
 3461 1cbc 15060000 	1:	_ADR RFROM
 3462 1cc0 6D050000 		_DOLIT 65536 
 3462      00000100 
 3463 1cc8 FD0C0000 		_ADR  SLASH
 3464 1ccc 15060000 		_ADR RFROM 
 3465 1cd0 6D050000 		_DOLIT 2 
 3465      02000000 
 3466 1cd8 55070000 		_ADR PLUS 
 3467 1cdc 5D1C0000 		_ADR HWORD_WRITE 
 3468 1ce0 A9050000 		_QBRAN 2f
 3468      F01C0000 
 3469 1ce8 BB050000 		_BRAN 0b 
 3469      A81C0000 
 3470 1cf0 1B040000 	2:	_UNNEST
 3471              	
 3472              	// IMG_SIZE ( -- u )
 3473              	// return flash pages required to save 
 3474              	// user ram  
 3475 1cf4 881C0000 		.word _ISTOR 
 3476 1cf8 08       	_IMG_SIZE: .byte 8
 3477 1cf9 494D475F 		.ascii "IMG_SIZE" 
 3477      53495A45 
 3478 1d01 0000BF   		.p2align 2
 3479              	IMG_SIZE: 
 3480 1d04 404700BF 		_NEST
 3481 1d08 6D050000 		_DOLIT VARS_END_OFS-IMG_SIGN_OFS 
 3481      38000000 
 3482 1d10 990B0000 		_ADR USER_END 
 3483 1d14 7D0B0000 		_ADR USER_BEGIN 
 3484 1d18 65070000 		_ADR SUBB 
 3485 1d1c 55070000 		_ADR PLUS 
 3486 1d20 6D050000 		_DOLIT PAGE_SIZE 
 3486      00040000 
 3487 1d28 C50C0000 		_ADR SLMOD 
 3488 1d2c A1060000 		_ADR SWAP 
 3489 1d30 A9050000 		_QBRAN 1f 
 3489      3C1D0000 
 3490 1d38 B1070000 		_ADR ONEP
 3491              	1:
 3492 1d3c 1B040000 		_UNNEST  
 3493              	
 3494              	// IMG? (  -- T|F )
 3495              	// check if an image has been saved in FLASH  
 3496 1d40 F81C0000 		.word _IMG_SIZE 
 3497 1d44 04       	_IMGQ: .byte 4
 3498 1d45 494D473F 		.ascii "IMG?"
 3499 1d49 0000BF   		.p2align 2
 3500              	IMGQ:
ARM GAS  stm32eforth-fl.s 			page 68


 3501 1d4c 404700BF 		_NEST 
 3502 1d50 B10B0000 		_ADR IMG_ADR 
 3503 1d54 E9050000 		_ADR AT 
 3504 1d58 CD0B0000 		_ADR IMG_SIGN  
 3505 1d5c E9050000 		_ADR AT 
 3506 1d60 FD060000 		_ADR XORR  
 3507 1d64 09090000 		_ADR ZEQUAL
 3508 1d68 1B040000 		_UNNEST
 3509              	
 3510              	// LOAD_IMG (  -- )
 3511              	// Load saved image into RAM. 
 3512 1d6c 441D0000 		.word _IMGQ
 3513 1d70 08       	_LOAD_IMG: .byte 8 
 3514 1d71 4C4F4144 		.ascii "LOAD_IMG" 
 3514      5F494D47 
 3515 1d79 0000BF   		.p2align 2 
 3516              	LOAD_IMG:
 3517 1d7c 404700BF 		_NEST 
 3518 1d80 4D1D0000 		_ADR IMGQ 
 3519 1d84 A9050000 		_QBRAN 1f
 3519      D01D0000 
 3520              	/* copy system variables to RAM */
 3521 1d8c B10B0000 		_ADR IMG_ADR 
 3522 1d90 91060000 		_ADR DUPP 
 3523 1d94 39060000 		_ADR TOR   // save source address 
 3524 1d98 CD0B0000 		_ADR IMG_SIGN 
 3525 1d9c 6D050000 		_DOLIT (VARS_END_OFS-IMG_SIGN_OFS) 
 3525      38000000 
 3526 1da4 91060000 		_ADR DUPP 
 3527 1da8 39060000 		_ADR TOR 
 3528 1dac B10E0000 		_ADR MOVE // ( src dest count -- ) R: src count 
 3529              	/* copy user definitions */
 3530 1db0 15060000 		_ADR RFROM 
 3531 1db4 15060000 		_ADR RFROM  
 3532 1db8 55070000 		_ADR PLUS // source address  
 3533 1dbc 7D0B0000 		_ADR USER_BEGIN // destination address
 3534 1dc0 110E0000 		_ADR HERE  
 3535 1dc4 B5060000 		_ADR OVER 
 3536 1dc8 65070000 		_ADR SUBB  // byte count 
 3537 1dcc B10E0000 		_ADR MOVE
 3538 1dd0 1B040000 	1:	_UNNEST  
 3539              	
 3540              	// ERASE_MPG ( u1 u2 -- )
 3541              	// erase many pages 
 3542              	// u1 first page number 
 3543              	// u2 how many pages  
 3544 1dd4 701D0000 		.word _LOAD_IMG
 3545 1dd8 09       	_ERASE_MPG: .byte 9 
 3546 1dd9 45524153 		.ascii "ERASE_MPG"	
 3546      455F4D50 
 3546      47
 3547 1de2 00BF     		.p2align 2 
 3548              	ERASE_MPG:
 3549 1de4 404700BF 		_NEST 
 3550 1de8 39060000 		_ADR TOR 
 3551 1dec B91E0000 		_ADR PG_TO_ADR 
 3552 1df0 BB050000 		_BRAN 3f 
ARM GAS  stm32eforth-fl.s 			page 69


 3552      301E0000 
 3553              	1:
 3554 1df8 91060000 		_ADR DUPP 
 3555 1dfc 39060000 		_ADR TOR 
 3556 1e00 351C0000 		_ADR EPAGE
 3557 1e04 A9050000 		_QBRAN 2f 
 3557      201E0000 
 3558 1e0c 591A0000 		_ABORQ 12,"erase failed"
 3558      0C657261 
 3558      73652066 
 3558      61696C65 
 3558      640000BF 
 3559 1e20 15060000 	2:	_ADR RFROM
 3560 1e24 6D050000 		_DOLIT PAGE_SIZE 
 3560      00040000 
 3561 1e2c 55070000 		_ADR PLUS 
 3562              	3:
 3563 1e30 91050000 		_DONXT 1b 
 3563      F81D0000 
 3564 1e38 07040000 		_ADR TPOP 
 3565 1e3c 1B040000 		_UNNEST 
 3566              	
 3567              	// FLSH_WR ( src dest u -- dest+u )
 3568              	// write u words to flash memory 
 3569 1e40 D81D0000 		.word _ERASE_MPG
 3570 1e44 07       	_FLSH_WR: .byte 7 
 3571 1e45 464C5348 		.ascii "FLSH_WR"
 3571      5F5752
 3572              		.p2align  
 3573              	FLSH_WR: 
 3574 1e4c 404700BF 		_NEST 
 3575 1e50 39060000 		_ADR TOR
 3576 1e54 BB050000 		_BRAN 3f  
 3576      7C1E0000 
 3577              	/* write system variables to FLASH */
 3578 1e5c 39060000 	2:  _ADR TOR  // destination address 
 3579 1e60 91060000 		_ADR DUPP 
 3580 1e64 E9050000 		_ADR AT   // get data 
 3581 1e68 29060000 		_ADR RAT  // get destination address 
 3582 1e6c 8D1C0000 		_ADR ISTOR
 3583 1e70 F1070000 		_ADR CELLP  // increment source address 
 3584 1e74 15060000 		_ADR RFROM 
 3585 1e78 F1070000 		_ADR CELLP  // increment dest address 
 3586 1e7c 91050000 	3:	_DONXT 2b
 3586      5C1E0000 
 3587 1e84 39060000 		_ADR TOR 
 3588 1e88 81060000 		_ADR DROP 
 3589 1e8c 15060000 		_ADR RFROM 
 3590 1e90 1B040000 		_UNNEST 
 3591              	
 3592              	// ADR>PG ( a -- n )
 3593              	// convert address to page number, {0..127} 
 3594 1e94 441E0000 		.word _FLSH_WR
 3595 1e98 06       	_ADR_TO_PG: .byte 6 
 3596 1e99 4144523E 		.ascii "ADR>PG" 
 3596      5047
 3597 1e9f 00       		.p2align 2 
ARM GAS  stm32eforth-fl.s 			page 70


 3598              	ADR_TO_PG: 
 3599 1ea0 4FEA9525 		lsr r5,#10 
 3600 1ea4 05F07F05 		and r5,#127 
 3601 1ea8 FEF7B4BA 		_NEXT  
 3602              	
 3603              	// PG>ADR ( n -- a )
 3604              	// convert page# to address 
 3605 1eac 981E0000 		.word _ADR_TO_PG
 3606 1eb0 06       	_PG_TO_ADR: .byte 6 
 3607 1eb1 50473E41 		.ascii "PG>ADR" 
 3607      4452
 3608 1eb7 00       		.p2align 2 
 3609              	PG_TO_ADR:
 3610 1eb8 C0F20205 		movt r5,#2
 3611 1ebc 4FEA8525 		lsl r5,#10 
 3612 1ec0 FEF7A8BA 		_NEXT 
 3613              	
 3614              	// ERASE_IMG (  -- )
 3615              	// erase saved image  
 3616 1ec4 B01E0000 		.word _PG_TO_ADR 
 3617 1ec8 09       	_ERASE_IMG: .byte 9
 3618 1ec9 45524153 		.ascii "ERASE_IMG"
 3618      455F494D 
 3618      47
 3619 1ed2 00BF     		.p2align 2
 3620              	ERASE_IMG:
 3621 1ed4 404700BF 		_NEST
 3622 1ed8 B10B0000 		_ADR IMG_ADR 
 3623 1edc 051D0000 		_ADR IMG_SIZE // in page count 
 3624 1ee0 39060000 		_ADR TOR 
 3625 1ee4 BB050000 		_BRAN 2f 
 3625      001F0000 
 3626 1eec 91060000 	1:	_ADR DUPP 
 3627 1ef0 351C0000 		_ADR EPAGE
 3628 1ef4 6D050000 		_DOLIT PAGE_SIZE
 3628      00040000 
 3629 1efc 55070000 		_ADR PLUS  
 3630 1f00 91050000 	2:	_DONXT 1b 
 3630      EC1E0000 
 3631 1f08 81060000 		_ADR DROP 
 3632 1f0c 1B040000 		_UNNEST 
 3633              	
 3634              	// SAVE_IMG (  -- )
 3635              	// save in flash memory system variables and user defintitions.
 3636 1f10 C81E0000 		.word _ERASE_IMG	
 3637 1f14 08       	_SAVE_IMG: .byte 8 
 3638 1f15 53415645 		.ascii "SAVE_IMG"
 3638      5F494D47 
 3639 1f1d 0000BF   		.p2align 2
 3640              	SAVE_IMG:
 3641 1f20 404700BF 		_NEST 
 3642 1f24 110E0000 		_ADR HERE 
 3643 1f28 7D0B0000 		_ADR USER_BEGIN
 3644 1f2c 1D090000 		_ADR EQUAL 
 3645 1f30 A9050000 		_QBRAN 1f
 3645      3C1F0000 
 3646 1f38 1B040000 		_UNNEST  
ARM GAS  stm32eforth-fl.s 			page 71


 3647 1f3c 4D1D0000 	1:	_ADR IMGQ 
 3648 1f40 A9050000 		_QBRAN 2f
 3648      4C1F0000 
 3649              	/* delete saved image */
 3650 1f48 D51E0000 		_ADR ERASE_IMG 
 3651              	/* save system variables */
 3652 1f4c CD0B0000 	2:	_ADR IMG_SIGN // src address
 3653 1f50 B10B0000 		_ADR IMG_ADR // dest address
 3654 1f54 6D050000 		_DOLIT (VARS_END_OFS-IMG_SIGN_OFS) 
 3654      38000000 
 3655 1f5c 35080000 		_ADR CELLSL  // word count 
 3656 1f60 4D1E0000 		_ADR FLSH_WR  // ( src dest count -- dest+u )
 3657              	/* write user definitions */
 3658 1f64 7D0B0000 		_ADR USER_BEGIN
 3659 1f68 A1060000 		_ADR SWAP  // ( src dest+ -- )
 3660 1f6c 110E0000 		_ADR HERE   
 3661 1f70 7D0B0000 		_ADR USER_BEGIN 
 3662 1f74 65070000 		_ADR SUBB 
 3663 1f78 35080000 		_ADR CELLSL  // src dest+ count -- 
 3664 1f7c 4D1E0000 		_ADR FLSH_WR  
 3665 1f80 1B040000 	9:	_UNNEST 
 3666              	
 3667              	// TURNKEY ( -- "WORD") 
 3668              	// set autorun program in 'BOOT variable 
 3669              	// and save image 
 3670 1f84 141F0000 		.word _SAVE_IMG
 3671 1f88 07       	_TURNKEY: .byte 7
 3672 1f89 5455524E 		.ascii "TURNKEY"
 3672      4B4559
 3673              		.p2align 2 
 3674              	TURNKEY:
 3675 1f90 404700BF 		_NEST 
 3676 1f94 21200000 		_ADR TICK 
 3677 1f98 6D050000 		_DOLIT 1 
 3677      01000000 
 3678 1fa0 E9060000 		_ADR ORR 		
 3679 1fa4 710A0000 		_ADR TBOOT 
 3680 1fa8 D5050000 		_ADR STORE 
 3681 1fac 211F0000 		_ADR SAVE_IMG 
 3682 1fb0 1B040000 		_UNNEST
 3683              	
 3684 1fb4 881F0000 		.word _TURNKEY
 3685 1fb8 06       	_FORGET: .byte 6 
 3686 1fb9 464F5247 		.ascii "FORGET"
 3686      4554
 3687 1fbf 00       		.p2align 2
 3688              	FORGET:
 3689 1fc0 404700BF 		_NEST 
 3690 1fc4 15170000 		_ADR TOKEN 
 3691 1fc8 91060000 		_ADR DUPP 
 3692 1fcc A9050000 		_QBRAN 9f 
 3692      08200000 
 3693 1fd4 99180000 		_ADR NAMEQ // ( a -- ca na | a 0 )
 3694 1fd8 65080000 		_ADR QDUP 
 3695 1fdc A9050000 		_QBRAN 8f
 3695      04200000 
 3696 1fe4 01080000 		_ADR CELLM // ( ca la )
ARM GAS  stm32eforth-fl.s 			page 72


 3697 1fe8 91060000 		_ADR DUPP 
 3698 1fec 210B0000 		_ADR CPP   
 3699 1ff0 D5050000 		_ADR STORE
 3700 1ff4 E9050000 		_ADR AT 
 3701 1ff8 490B0000 		_ADR LAST 
 3702 1ffc D5050000 		_ADR STORE
 3703 2000 81240000 		_ADR OVERT 
 3704 2004 81060000 	8:  _ADR DROP 
 3705 2008 1B040000 	9:	_UNNEST 
 3706              	
 3707              		.p2align 2 
 3708              	flash_regs:
 3709 200c 00200240 		.word FLASH_BASE_ADR // 0 
 3710 2010 23016745 		.word FLASH_KEY1   // 4 
 3711 2014 AB89EFCD 		.word FLASH_KEY2   // 8
 3712              	
 3713              	// **************************************************************************
 3714              	//  The compiler
 3715              	
 3716              	//    '	   ( -- ca )
 3717              	// 	Search context vocabularies for the next word in input stream.
 3718              	
 3719 2018 B81F0000 		.word	_FORGET
 3720 201c 01       	_TICK:	.byte  1
 3721 201d 27       		.ascii "'"
 3722 201e 00BF     		.p2align 2 	
 3723              	TICK:
 3724 2020 404700BF 		_NEST
 3725 2024 15170000 		_ADR	TOKEN
 3726 2028 99180000 		_ADR	NAMEQ	// ?defined
 3727 202c A9050000 		_QBRAN	TICK1
 3727      38200000 
 3728 2034 1B040000 		_UNNEST	// yes, push code address
 3729              	TICK1:	
 3730 2038 BB050000 		_BRAN	ABORT	// no, error
 3730      2C1A0000 
 3731              	
 3732              	//    ALLOT	( n -- )
 3733              	// 	Allocate n bytes to the ram area.
 3734              	
 3735 2040 1C200000 		.word	_TICK
 3736 2044 05       	_ALLOT:	.byte  5
 3737 2045 414C4C4F 		.ascii "ALLOT"
 3737      54
 3738 204a 00BF     		.p2align 2 	
 3739              	ALLOT:
 3740 204c 404700BF 		_NEST
 3741 2050 210B0000 		_ADR	CPP
 3742 2054 A5090000 		_ADR	PSTOR
 3743 2058 1B040000 		_UNNEST			// adjust code pointer
 3744              	
 3745              	//    ,	   ( w -- )
 3746              	// 	Compile an integer into the code dictionary.
 3747              	
 3748 205c 44200000 		.word	_ALLOT
 3749 2060 012C     	_COMMA:	.byte  1,','
 3750 2062 00BF     		.p2align 2 	
ARM GAS  stm32eforth-fl.s 			page 73


 3751              	COMMA:
 3752 2064 404700BF 		_NEST
 3753 2068 110E0000 		_ADR	HERE
 3754 206c 91060000 		_ADR	DUPP
 3755 2070 F1070000 		_ADR	CELLP	// cell boundary
 3756 2074 210B0000 		_ADR	CPP
 3757 2078 D5050000 		_ADR	STORE
 3758 207c D5050000 		_ADR	STORE
 3759 2080 1B040000 		_UNNEST	// adjust code pointer, compile
 3760              		.p2align 2 
 3761              	//    [COMPILE]   ( -- //  string> )
 3762              	// 	Compile the next immediate word into code dictionary.
 3763              	
 3764 2084 60200000 		.word	_COMMA
 3765 2088 89       	_BCOMP:	.byte  IMEDD+9
 3766 2089 5B434F4D 		.ascii "[COMPILE]"
 3766      50494C45 
 3766      5D
 3767 2092 00BF     		.p2align 2 	
 3768              	BCOMP:
 3769 2094 404700BF 		_NEST
 3770 2098 21200000 		_ADR	TICK
 3771 209c 65200000 		_ADR	COMMA
 3772 20a0 1B040000 		_UNNEST
 3773              	
 3774              	//    COMPILE	( -- )
 3775              	// 	Compile the next address in colon list to code dictionary.
 3776              	
 3777 20a4 88200000 		.word	_BCOMP
 3778 20a8 47       	_COMPI:	.byte  COMPO+7
 3779 20a9 434F4D50 		.ascii "COMPILE"
 3779      494C45
 3780              		.p2align 2 	
 3781              	COMPI:
 3782 20b0 404700BF 		_NEST
 3783 20b4 15060000 		_ADR	RFROM
 3784 20b8 91060000 		_ADR	DUPP 
 3785 20bc E9050000 		_ADR	AT
 3786 20c0 6D050000 		_DOLIT 1 
 3786      01000000 
 3787 20c8 E9060000 		_ADR	ORR 
 3788 20cc 65200000 		_ADR	COMMA 
 3789 20d0 F1070000 		_ADR	CELLP 
 3790 20d4 39060000 		_ADR	TOR 
 3791 20d8 1B040000 		_UNNEST			// adjust return address
 3792              	
 3793              	//    LITERAL	( w -- )
 3794              	// 	Compile tos to code dictionary as an integer literal.
 3795              	
 3796 20dc A8200000 		.word	_COMPI
 3797 20e0 87       	_LITER:	.byte  IMEDD+7
 3798 20e1 4C495445 		.ascii "LITERAL"
 3798      52414C
 3799              		.p2align 2 	
 3800              	LITER:
 3801 20e8 404700BF 		_NEST
 3802 20ec 6D050000 		_COMPI	DOLIT
ARM GAS  stm32eforth-fl.s 			page 74


 3802      6C050000 
 3802      DD240000 
 3803 20f8 65200000 		_ADR	COMMA
 3804 20fc 1B040000 		_UNNEST
 3805              	
 3806              	//    $,"	( -- )
 3807              	// 	Compile a literal string up to next " .
 3808              	
 3809              	// 	.word	_LITER
 3810              	// _STRCQ	.byte  3
 3811              	// 	.ascii "$,\""
 3812              	// 	.p2align 2 	
 3813              	STRCQ:
 3814 2100 404700BF 		_NEST
 3815 2104 6D050000 		_DOLIT -4
 3815      FCFFFFFF 
 3816 210c 210B0000 		_ADR	CPP
 3817 2110 A5090000 		_ADR	PSTOR
 3818 2114 6D050000 		_DOLIT	'\"'
 3818      22000000 
 3819 211c F1160000 		_ADR	WORDD			// move word to code dictionary
 3820 2120 ED090000 		_ADR	COUNT
 3821 2124 55070000 		_ADR	PLUS
 3822 2128 5D0D0000 		_ADR	ALGND			// calculate aligned end of string
 3823 212c 210B0000 		_ADR	CPP
 3824 2130 D5050000 		_ADR	STORE
 3825 2134 1B040000 		_UNNEST 			// adjust the code pointer
 3826              	
 3827              	/*******************
 3828              	//  Structures
 3829              	*******************/
 3830              	//    FOR	 ( -- a )
 3831              	// 	Start a FOR-NEXT loop structure in a colon definition.
 3832              	
 3833 2138 E0200000 		.word	_LITER
 3834 213c C3       	_FOR:	.byte  COMPO+IMEDD+3
 3835 213d 464F52   		.ascii "FOR"
 3836              		.p2align 2 	
 3837              	FOR:
 3838 2140 404700BF 		_NEST
 3839 2144 6D050000 		_COMPI	TOR
 3839      38060000 
 3839      DD240000 
 3840 2150 110E0000 		_ADR	HERE
 3841 2154 1B040000 		_UNNEST
 3842              	
 3843              	//    BEGIN	( -- a )
 3844              	// 	Start an infinite or indefinite loop structure.
 3845              	
 3846 2158 3C210000 		.word	_FOR
 3847 215c C5       	_BEGIN:	.byte  COMPO+IMEDD+5
 3848 215d 42454749 		.ascii "BEGIN"
 3848      4E
 3849 2162 00BF     		.p2align 2 	
 3850              	BEGIN:
 3851 2164 404700BF 		_NEST
 3852 2168 110E0000 		_ADR	HERE
ARM GAS  stm32eforth-fl.s 			page 75


 3853 216c 1B040000 		_UNNEST
 3854              		.p2align 2 
 3855              	
 3856              	//    NEXT	( a -- )
 3857              	// 	Terminate a FOR-NEXT loop structure.
 3858 2170 5C210000 		.word	_BEGIN
 3859 2174 C4       	_FNEXT:	.byte  COMPO+IMEDD+4
 3860 2175 4E455854 		.ascii "NEXT"
 3861 2179 0000BF   		.p2align 2 	
 3862              	FNEXT:
 3863 217c 404700BF 		_NEST
 3864 2180 6D050000 		_COMPI	DONXT
 3864      90050000 
 3864      DD240000 
 3865 218c 65200000 		_ADR	COMMA
 3866 2190 1B040000 		_UNNEST
 3867              	
 3868              	//    UNTIL	( a -- )
 3869              	// 	Terminate a BEGIN-UNTIL indefinite loop structure.
 3870              	
 3871 2194 74210000 		.word	_FNEXT
 3872 2198 C5       	_UNTIL:	.byte  COMPO+IMEDD+5
 3873 2199 554E5449 		.ascii "UNTIL"
 3873      4C
 3874 219e 00BF     		.p2align 2 	
 3875              	UNTIL:
 3876 21a0 404700BF 		_NEST
 3877 21a4 6D050000 		_COMPI	QBRAN
 3877      A8050000 
 3877      DD240000 
 3878 21b0 65200000 		_ADR	COMMA
 3879 21b4 1B040000 		_UNNEST
 3880              	
 3881              	//    AGAIN	( a -- )
 3882              	// 	Terminate a BEGIN-AGAIN infinite loop structure.
 3883              	
 3884 21b8 98210000 		.word	_UNTIL
 3885 21bc C5       	_AGAIN:	.byte  COMPO+IMEDD+5
 3886 21bd 41474149 		.ascii "AGAIN"
 3886      4E
 3887 21c2 00BF     		.p2align 2 	
 3888              	AGAIN:
 3889 21c4 404700BF 		_NEST
 3890 21c8 6D050000 		_COMPI	BRAN
 3890      BA050000 
 3890      DD240000 
 3891 21d4 65200000 		_ADR	COMMA
 3892 21d8 1B040000 		_UNNEST
 3893              	
 3894              	//    IF	  ( -- A )
 3895              	// 	Begin a conditional branch structure.
 3896              	
 3897 21dc BC210000 		.word	_AGAIN
 3898 21e0 C2       	_IFF:	.byte  COMPO+IMEDD+2
 3899 21e1 4946     		.ascii "IF"
 3900 21e3 00       		.p2align 2 	
 3901              	IFF:
ARM GAS  stm32eforth-fl.s 			page 76


 3902 21e4 404700BF 		_NEST
 3903 21e8 6D050000 		_COMPI	QBRAN
 3903      A8050000 
 3903      DD240000 
 3904 21f4 110E0000 		_ADR	HERE
 3905 21f8 6D050000 		_DOLIT	4
 3905      04000000 
 3906 2200 210B0000 		_ADR	CPP
 3907 2204 A5090000 		_ADR	PSTOR
 3908 2208 1B040000 		_UNNEST
 3909              	
 3910              	//    AHEAD	( -- A )
 3911              	// 	Compile a forward branch instruction.
 3912              	
 3913 220c E0210000 		.word	_IFF
 3914 2210 C5       	_AHEAD:	.byte  COMPO+IMEDD+5
 3915 2211 41484541 		.ascii "AHEAD"
 3915      44
 3916 2216 00BF     		.p2align 2 	
 3917              	AHEAD:
 3918 2218 404700BF 		_NEST
 3919 221c 6D050000 		_COMPI	BRAN
 3919      BA050000 
 3919      DD240000 
 3920 2228 110E0000 		_ADR	HERE
 3921 222c 6D050000 		_DOLIT	4
 3921      04000000 
 3922 2234 210B0000 		_ADR	CPP
 3923 2238 A5090000 		_ADR	PSTOR
 3924 223c 1B040000 		_UNNEST
 3925              	
 3926              	//    REPEAT	( A a -- )
 3927              	// 	Terminate a BEGIN-WHILE-REPEAT indefinite loop.
 3928              	
 3929 2240 10220000 		.word	_AHEAD
 3930 2244 C6       	_REPEA:	.byte  COMPO+IMEDD+6
 3931 2245 52455045 		.ascii "REPEAT"
 3931      4154
 3932 224b 00       		.p2align 2 	
 3933              	REPEA:
 3934 224c 404700BF 		_NEST
 3935 2250 C5210000 		_ADR	AGAIN
 3936 2254 110E0000 		_ADR	HERE
 3937 2258 A1060000 		_ADR	SWAP
 3938 225c D5050000 		_ADR	STORE
 3939 2260 1B040000 		_UNNEST
 3940              	
 3941              	//    THEN	( A -- )
 3942              	// 	Terminate a conditional branch structure.
 3943              	
 3944 2264 44220000 		.word	_REPEA
 3945 2268 C4       	_THENN:	.byte  COMPO+IMEDD+4
 3946 2269 5448454E 		.ascii "THEN"
 3947 226d 0000BF   		.p2align 2 	
 3948              	THENN:
 3949 2270 404700BF 		_NEST
 3950 2274 110E0000 		_ADR	HERE
ARM GAS  stm32eforth-fl.s 			page 77


 3951 2278 A1060000 		_ADR	SWAP
 3952 227c D5050000 		_ADR	STORE
 3953 2280 1B040000 		_UNNEST
 3954              	
 3955              	//    AFT	 ( a -- a A )
 3956              	// 	Jump to THEN in a FOR-AFT-THEN-NEXT loop the first time through.
 3957              	
 3958 2284 68220000 		.word	_THENN
 3959 2288 C3       	_AFT:	.byte  COMPO+IMEDD+3
 3960 2289 414654   		.ascii "AFT"
 3961              		.p2align 2 	
 3962              	AFT:
 3963 228c 404700BF 		_NEST
 3964 2290 81060000 		_ADR	DROP
 3965 2294 19220000 		_ADR	AHEAD
 3966 2298 65210000 		_ADR	BEGIN
 3967 229c A1060000 		_ADR	SWAP
 3968 22a0 1B040000 		_UNNEST
 3969              	
 3970              	//    ELSE	( A -- A )
 3971              	// 	Start the false clause in an IF-ELSE-THEN structure.
 3972              	
 3973 22a4 88220000 		.word	_AFT
 3974 22a8 C4       	_ELSEE:	.byte  COMPO+IMEDD+4
 3975 22a9 454C5345 		.ascii "ELSE"
 3976 22ad 0000BF   		.p2align 2 	
 3977              	ELSEE:
 3978 22b0 404700BF 		_NEST
 3979 22b4 19220000 		_ADR	AHEAD
 3980 22b8 A1060000 		_ADR	SWAP
 3981 22bc 71220000 		_ADR	THENN
 3982 22c0 1B040000 		_UNNEST
 3983              	
 3984              	//    WHILE	( a -- A a )
 3985              	// 	Conditional branch out of a BEGIN-WHILE-REPEAT loop.
 3986              	
 3987 22c4 A8220000 		.word	_ELSEE
 3988 22c8 C5       	_WHILE:	.byte  COMPO+IMEDD+5
 3989 22c9 5748494C 		.ascii "WHILE"
 3989      45
 3990 22ce 00BF     		.p2align 2 	
 3991              	WHILE:
 3992 22d0 404700BF 		_NEST
 3993 22d4 E5210000 		_ADR	IFF
 3994 22d8 A1060000 		_ADR	SWAP
 3995 22dc 1B040000 		_UNNEST
 3996              	
 3997              	//    ABORT"	( -- //  string> )
 3998              	// 	Conditional abort with an error message.
 3999              	
 4000 22e0 C8220000 		.word	_WHILE
 4001 22e4 86       	_ABRTQ:	.byte  IMEDD+6
 4002 22e5 41424F52 		.ascii "ABORT\""
 4002      5422
 4003 22eb 00       		.p2align 2 	
 4004              	ABRTQ:
 4005 22ec 404700BF 		_NEST
ARM GAS  stm32eforth-fl.s 			page 78


 4006 22f0 6D050000 		_COMPI	ABORQ
 4006      581A0000 
 4006      DD240000 
 4007 22fc 01210000 		_ADR	STRCQ
 4008 2300 1B040000 		_UNNEST
 4009              	
 4010              	//    $"	( -- //  string> )
 4011              	// 	Compile an inline word literal.
 4012              	
 4013 2304 E4220000 		.word	_ABRTQ
 4014 2308 82       	_STRQ:	.byte  IMEDD+2
 4015 2309 2422     		.ascii	"$\""
 4016 230b 00       		.p2align 2 	
 4017              	STRQ:
 4018 230c 404700BF 		_NEST
 4019 2310 6D050000 		_COMPI	STRQP
 4019      E8130000 
 4019      DD240000 
 4020 231c 01210000 		_ADR	STRCQ
 4021 2320 1B040000 		_UNNEST
 4022              	
 4023              	//    ."	( -- //  string> )
 4024              	// 	Compile an inline word  literal to be typed out at run time.
 4025              	
 4026 2324 08230000 		.word	_STRQ
 4027 2328 C2       	_DOTQ:	.byte  IMEDD+COMPO+2
 4028 2329 2E22     		.byte	'.','"'
 4029 232b 00       		.p2align 2 	
 4030              	DOTQ:
 4031 232c 404700BF 		_NEST
 4032 2330 6D050000 		_COMPI	DOTQP
 4032      04140000 
 4032      DD240000 
 4033 233c 01210000 		_ADR	STRCQ
 4034 2340 1B040000 		_UNNEST
 4035              	
 4036              	// **************************************************************************
 4037              	//  Name compiler
 4038              	
 4039              	//    ?UNIQUE	( a -- a )
 4040              	// 	Display a warning message if the word already exists.
 4041              	
 4042 2344 28230000 		.word	_DOTQ
 4043 2348 07       	_UNIQU:	.byte  7
 4044 2349 3F554E49 		.ascii "?UNIQUE"
 4044      515545
 4045              		.p2align 2 	
 4046              	UNIQU:
 4047 2350 404700BF 		_NEST
 4048 2354 91060000 		_ADR	DUPP
 4049 2358 99180000 		_ADR	NAMEQ			// ?name exists
 4050 235c A9050000 		_QBRAN	UNIQ1	// redefinitions are OK
 4050      7C230000 
 4051 2364 05140000 		_DOTQP	7," reDef "		// but warn the user
 4051      07207265 
 4051      44656620 
 4052 2370 B5060000 		_ADR	OVER
ARM GAS  stm32eforth-fl.s 			page 79


 4053 2374 ED090000 		_ADR	COUNT
 4054 2378 69130000 		_ADR	TYPEE			// just in case its not planned
 4055              	UNIQ1:
 4056 237c 81060000 		_ADR	DROP
 4057 2380 1B040000 		_UNNEST
 4058              	
 4059              	//    $,n	 ( na -- )
 4060              	// 	Build a new dictionary name using the data at na.
 4061              	
 4062              	// 	.word	_UNIQU
 4063              	// _SNAME	.byte  3
 4064              	// 	.ascii "$$,n"
 4065              	// 	.p2align 2 	
 4066              	SNAME:
 4067 2384 404700BF 		_NEST
 4068 2388 91060000 		_ADR	DUPP			//  na na
 4069 238c 09060000 		_ADR	CAT			//  ?null input
 4070 2390 A9050000 		_QBRAN	SNAM1
 4070      CC230000 
 4071 2398 51230000 		_ADR	UNIQU			//  na
 4072 239c 490B0000 		_ADR	LAST			//  na last
 4073 23a0 E9050000 		_ADR	AT			//  na la
 4074 23a4 65200000 		_ADR	COMMA			//  na
 4075 23a8 91060000 		_ADR	DUPP			//  na na
 4076 23ac 490B0000 		_ADR	LAST			//  na na last
 4077 23b0 D5050000 		_ADR	STORE			//  na , save na for vocabulary link
 4078 23b4 ED090000 		_ADR	COUNT			//  na+1 count
 4079 23b8 55070000 		_ADR	PLUS			//  na+1+count
 4080 23bc 5D0D0000 		_ADR	ALGND			//  word boundary
 4081 23c0 210B0000 		_ADR	CPP
 4082 23c4 D5050000 		_ADR	STORE			//  top of dictionary now
 4083 23c8 1B040000 		_UNNEST
 4084              	SNAM1:
 4085 23cc E9130000 		_ADR	STRQP
 4086 23d0 07       		.byte	7
 4087 23d1 206E616D 		.ascii " name? "
 4087      653F20
 4088 23d8 BB050000 		_BRAN	ABORT
 4088      2C1A0000 
 4089              	
 4090              	//    $COMPILE	( a -- )
 4091              	// 	Compile next word to code dictionary as a token or literal.
 4092              	
 4093 23e0 48230000 		.word	_UNIQU
 4094 23e4 08       	_SCOMP:	.byte  8
 4095 23e5 2424434F 		.ascii "$$COMPILE"
 4095      4D50494C 
 4095      45
 4096 23ee 00BF     		.p2align 2 	
 4097              	SCOMP:
 4098 23f0 404700BF 		_NEST
 4099 23f4 99180000 		_ADR	NAMEQ
 4100 23f8 65080000 		_ADR	QDUP	// defined?
 4101 23fc A9050000 		_QBRAN	SCOM2
 4101      2C240000 
 4102 2404 E9050000 		_ADR	AT
 4103 2408 6D050000 		_DOLIT	IMEDD
ARM GAS  stm32eforth-fl.s 			page 80


 4103      80000000 
 4104 2410 D5060000 		_ADR	ANDD	// immediate?
 4105 2414 A9050000 		_QBRAN	SCOM1
 4105      24240000 
 4106 241c 85050000 		_ADR	EXECU
 4107 2420 1B040000 		_UNNEST			// it's immediate, execute
 4108              	SCOM1:
 4109 2424 DD240000 		_ADR	CALLC			// it's not immediate, compile
 4110 2428 1B040000 		_UNNEST	
 4111              	SCOM2:
 4112 242c A1110000 		_ADR	NUMBQ
 4113 2430 A9050000 		_QBRAN	SCOM3
 4113      40240000 
 4114 2438 E9200000 		_ADR	LITER
 4115 243c 1B040000 		_UNNEST			// compile number as integer
 4116              	SCOM3: // compilation abort 
 4117 2440 49240000 		_ADR COLON_ABORT 
 4118 2444 2D1A0000 		_ADR	ABORT			// error
 4119              	
 4120              	// before aborting a compilation 
 4121              	// reset HERE and LAST
 4122              	// to previous values. 
 4123              	COLON_ABORT:
 4124 2448 404700BF 		_NEST 
 4125 244c 490B0000 		_ADR LAST 
 4126 2450 E9050000 		_ADR AT 
 4127 2454 01080000 		_ADR CELLM 
 4128 2458 91060000 		_ADR DUPP 
 4129 245c 210B0000 		_ADR CPP  
 4130 2460 D5050000 		_ADR STORE 
 4131 2464 E9050000 		_ADR AT 
 4132 2468 490B0000 		_ADR LAST 
 4133 246c D5050000 		_ADR STORE 
 4134 2470 1B040000 		_UNNEST 
 4135              	
 4136              	//    OVERT	( -- )
 4137              	// 	Link a new word into the current vocabulary.
 4138              	
 4139 2474 E4230000 		.word	_SCOMP
 4140 2478 05       	_OVERT:	.byte  5
 4141 2479 4F564552 		.ascii "OVERT"
 4141      54
 4142 247e 00BF     		.p2align 2 	
 4143              	OVERT:
 4144 2480 404700BF 		_NEST
 4145 2484 490B0000 		_ADR	LAST
 4146 2488 E9050000 		_ADR	AT
 4147 248c 0D0B0000 		_ADR	CNTXT
 4148 2490 D5050000 		_ADR	STORE
 4149 2494 1B040000 		_UNNEST
 4150              	
 4151              	//    ; 	   ( -- )
 4152              	// 	Terminate a colon definition.
 4153              	
 4154 2498 78240000 		.word	_OVERT
 4155 249c C1       	_SEMIS:	.byte  IMEDD+COMPO+1
 4156 249d 3B       		.ascii ";"
ARM GAS  stm32eforth-fl.s 			page 81


 4157 249e 00BF     		.p2align 2 	
 4158              	SEMIS:
 4159 24a0 404700BF 		_NEST
 4160 24a4 6D050000 		_DOLIT	UNNEST
 4160      1A040000 
 4161 24ac DD240000 		_ADR	CALLC
 4162 24b0 E91A0000 		_ADR	LBRAC
 4163 24b4 81240000 		_ADR	OVERT
 4164 24b8 1B040000 		_UNNEST
 4165              	
 4166              	//    ]	   ( -- )
 4167              	// 	Start compiling the words in the input stream.
 4168              	
 4169 24bc 9C240000 		.word	_SEMIS
 4170 24c0 01       	_RBRAC:	.byte  1
 4171 24c1 5D       		.ascii "]"
 4172 24c2 00BF     		.p2align 2 	
 4173              	RBRAC:
 4174 24c4 404700BF 		_NEST
 4175 24c8 6D050000 		_DOLIT	SCOMP
 4175      F0230000 
 4176 24d0 E10A0000 		_ADR	TEVAL
 4177 24d4 D5050000 		_ADR	STORE
 4178 24d8 1B040000 		_UNNEST
 4179              	
 4180              	//    BL.W	( ca -- )
 4181              	// 	compile ca.
 4182              	
 4183              	// 	.word	_RBRAC
 4184              	// _CALLC	.byte  5
 4185              	// 	.ascii "call,"
 4186              	// 	.p2align 2 	
 4187              	CALLC:
 4188 24dc 404700BF 		_NEST
 4189 24e0 6D050000 		_DOLIT 1 
 4189      01000000 
 4190 24e8 E9060000 		_ADR ORR 
 4191 24ec 65200000 		_ADR COMMA  
 4192 24f0 1B040000 		_UNNEST 
 4193              	
 4194              	
 4195              	// 	:	( -- //  string> )
 4196              	// 	Start a new colon definition using next word as its name.
 4197              	
 4198 24f4 C0240000 		.word	_RBRAC
 4199 24f8 01       	_COLON:	.byte  1
 4200 24f9 3A       		.ascii ":"
 4201 24fa 00BF     		.p2align 2 	
 4202              	COLON:
 4203 24fc 404700BF 		_NEST
 4204 2500 15170000 		_ADR	TOKEN
 4205 2504 85230000 		_ADR	SNAME
 4206 2508 21040000 		_ADR	COMPI_NEST 
 4207 250c C5240000 		_ADR	RBRAC
 4208 2510 1B040000 		_UNNEST
 4209              	
 4210              	//    IMMEDIATE   ( -- )
ARM GAS  stm32eforth-fl.s 			page 82


 4211              	// 	Make the last compiled word an immediate word.
 4212              	
 4213 2514 F8240000 		.word	_COLON
 4214 2518 09       	_IMMED:	.byte  9
 4215 2519 494D4D45 		.ascii "IMMEDIATE"
 4215      44494154 
 4215      45
 4216 2522 00BF     		.p2align 2 	
 4217              	IMMED:
 4218 2524 404700BF 		_NEST
 4219 2528 6D050000 		_DOLIT	IMEDD
 4219      80000000 
 4220 2530 490B0000 		_ADR	LAST
 4221 2534 E9050000 		_ADR	AT
 4222 2538 E9050000 		_ADR	AT
 4223 253c E9060000 		_ADR	ORR
 4224 2540 490B0000 		_ADR	LAST
 4225 2544 E9050000 		_ADR	AT
 4226 2548 D5050000 		_ADR	STORE
 4227 254c 1B040000 		_UNNEST
 4228              	
 4229              	// **************************************************************************
 4230              	//  Defining words
 4231              	
 4232              	//    CONSTANT	( u -- //  string> )
 4233              	// 	Compile a new constant.
 4234              	
 4235 2550 18250000 		.word	_IMMED
 4236 2554 08       	_CONST:	.byte  8
 4237 2555 434F4E53 		.ascii "CONSTANT"
 4237      54414E54 
 4238 255d 0000BF   		.p2align 2 	
 4239              	CONST:
 4240 2560 404700BF 		_NEST 
 4241 2564 15170000 		_ADR	TOKEN
 4242 2568 85230000 		_ADR	SNAME
 4243 256c 81240000 		_ADR	OVERT
 4244 2570 21040000 		_ADR	COMPI_NEST
 4245 2574 6D050000 		_DOLIT	DOCON
 4245      200A0000 
 4246 257c DD240000 		_ADR	CALLC
 4247 2580 65200000 		_ADR	COMMA
 4248 2584 6D050000 		_DOLIT	UNNEST 
 4248      1A040000 
 4249 258c DD240000 		_ADR	CALLC  
 4250 2590 1B040000 		_UNNEST
 4251              	
 4252              	// doDOES> ( -- a )
 4253              	// runtime action of DOES> 
 4254              	// leave parameter field address on stack 
 4255              	DODOES:
 4256 2594 404700BF 		_NEST 
 4257 2598 15060000 		_ADR	RFROM
 4258 259c F1070000 		_ADR	CELLP 
 4259 25a0 B1070000 		_ADR	ONEP  
 4260 25a4 490B0000 		_ADR LAST 
 4261 25a8 E9050000 		_ADR AT
ARM GAS  stm32eforth-fl.s 			page 83


 4262 25ac 31170000 		_ADR NAMET 
 4263 25b0 F1070000 		_ADR CELLP 
 4264              	//	_ADR DUPP  
 4265              	//	_ADR TOR 
 4266 25b4 D5050000 		_ADR STORE  
 4267              	//	_ADR RFROM
 4268              	//	_ADR CELLP 
 4269 25b8 1B040000 		_UNNEST 
 4270              	
 4271              	//  DOES> ( -- )
 4272              	//  compile time action 
 4273 25bc 54250000 		.word _CONST   
 4274 25c0 C5       	_DOES: .byte IMEDD+COMPO+5 
 4275 25c1 444F4553 		.ascii "DOES>"
 4275      3E
 4276 25c6 00BF     		.p2align 2
 4277              	DOES: 
 4278 25c8 404700BF 		_NEST 
 4279 25cc 6D050000 		_DOLIT DODOES 
 4279      94250000 
 4280 25d4 DD240000 		_ADR CALLC 
 4281 25d8 6D050000 		_DOLIT	UNNEST
 4281      1A040000 
 4282 25e0 DD240000 		_ADR	CALLC
 4283 25e4 21040000 		_ADR COMPI_NEST 
 4284 25e8 1B040000 		_UNNEST 
 4285              	
 4286              	//  DEFER@ ( "name" -- a )
 4287              	//  return value of code field of defered function. 
 4288 25ec C0250000 		.word _DOES 
 4289 25f0 06       	_DEFERAT: .byte 6 
 4290 25f1 44454645 		.ascii "DEFER@"
 4290      5240
 4291 25f7 00       		.p2align 2 
 4292              	DEFERAT: 
 4293 25f8 404700BF 		_NEST 
 4294 25fc 21200000 		_ADR TICK
 4295 2600 F1070000 		_ADR CELLP 
 4296 2604 E9050000 		_ADR AT 
 4297 2608 C1070000 		_ADR ONEM 
 4298 260c 1B040000 		_UNNEST 
 4299              	
 4300              	// DEFER! ( "name1" "name2" -- )
 4301              	// assign an action to a defered word 
 4302 2610 F0250000 		.word _DEFERAT 
 4303 2614 06       	_DEFERSTO: .byte 6 
 4304 2615 44454645 		.ascii "DEFER!" 
 4304      5221
 4305 261b 00       		.p2align 2 
 4306              	DEFERSTO:
 4307 261c 404700BF 		_NEST 
 4308 2620 21200000 		_ADR TICK 
 4309 2624 B1070000 		_ADR ONEP 
 4310 2628 21200000 		_ADR TICK 
 4311 262c F1070000 		_ADR CELLP 
 4312 2630 D5050000 		_ADR STORE 
 4313 2634 1B040000 		_UNNEST
ARM GAS  stm32eforth-fl.s 			page 84


 4314              	
 4315              	//  DEFER ( "name" -- )
 4316              	//  create a defered definition
 4317 2638 14260000 		.word _DEFERSTO  
 4318 263c 05       	_DEFER: .byte 5 
 4319 263d 44454645 		.ascii "DEFER"
 4319      52
 4320 2642 00BF     		.p2align 2
 4321              	DEFER:
 4322 2644 404700BF 		_NEST 
 4323 2648 95260000 		_ADR CREAT 
 4324 264c 6D050000 		_DOLIT UNNEST 
 4324      1A040000 
 4325 2654 DD240000 		_ADR CALLC 
 4326 2658 6D050000 		_DOLIT DEFER_NOP
 4326      7C260000 
 4327 2660 B1070000 		_ADR ONEP 
 4328 2664 490B0000 		_ADR LAST 
 4329 2668 E9050000 		_ADR AT 
 4330 266c 31170000 		_ADR NAMET 
 4331 2670 F1070000 		_ADR CELLP 
 4332 2674 D5050000 		_ADR STORE 
 4333 2678 1B040000 		_UNNEST 
 4334              	DEFER_NOP:
 4335 267c 404700BF 		_NEST  
 4336 2680 69050000 		_ADR NOP 
 4337 2684 1B040000 		_UNNEST 
 4338              	
 4339              	//    CREATE	( -- //  string> )
 4340              	// 	Compile a new array entry without allocating code space.
 4341              	
 4342 2688 3C260000 		.word	_DEFER 
 4343 268c 06       	_CREAT:	.byte  6
 4344 268d 43524541 		.ascii "CREATE"
 4344      5445
 4345 2693 00       		.p2align 2 	
 4346              	CREAT:
 4347 2694 404700BF 		_NEST 
 4348 2698 15170000 		_ADR	TOKEN
 4349 269c 85230000 		_ADR	SNAME
 4350 26a0 81240000 		_ADR	OVERT
 4351 26a4 21040000 		_ADR	COMPI_NEST 
 4352 26a8 6D050000 		_DOLIT	DOVAR
 4352      140A0000 
 4353 26b0 DD240000 		_ADR	CALLC
 4354 26b4 1B040000 		_UNNEST
 4355              	
 4356              	//    VARIABLE	( -- //  string> )
 4357              	// 	Compile a new variable initialized to 0.
 4358              	
 4359 26b8 8C260000 		.word	_CREAT
 4360 26bc 08       	_VARIA:	.byte  8
 4361 26bd 56415249 		.ascii "VARIABLE"
 4361      41424C45 
 4362 26c5 0000BF   		.p2align 2 	
 4363              	VARIA:
 4364 26c8 404700BF 		_NEST
ARM GAS  stm32eforth-fl.s 			page 85


 4365 26cc 95260000 		_ADR	CREAT
 4366 26d0 6D050000 		_DOLIT	0
 4366      00000000 
 4367 26d8 65200000 		_ADR	COMMA
 4368 26dc 6D050000 		_DOLIT UNNEST
 4368      1A040000 
 4369 26e4 DD240000 		_ADR	CALLC  
 4370 26e8 1B040000 		_UNNEST
 4371              	
 4372              	// **************************************************************************
 4373              	//  Tools
 4374              	
 4375              	//  TRACE ( f -- )
 4376              	// enable or disable tracing 
 4377 26ec BC260000 		.word _VARIA 
 4378 26f0 05       	_TRACE: .byte 5
 4379 26f1 54524143 		.ascii "TRACE"
 4379      45
 4380 26f6 00BF     		.p2align 2
 4381              	TRACE: 
 4382 26f8 404700BF 		_NEST 
 4383 26fc 610B0000 		_ADR FTRACE 
 4384 2700 D5050000 		_ADR STORE 
 4385 2704 1B040000 		_UNNEST 
 4386              	
 4387              	// TR_PRINT ( ca -- )
 4388              	// print name from ca  
 4389 2708 F0260000 		.word _TRACE 
 4390 270c 07       	_DBG_PRT: .byte 7 
 4391 270d 4442475F 		.ascii "DBG_PRT"
 4391      505254
 4392              	DBG_PRT:
 4393 2714 404700BF 		_NEST 
 4394 2718 45280000 		_ADR TNAME 
 4395 271c 65080000 		_ADR QDUP 
 4396 2720 A9050000 		_QBRAN 1f 
 4396      34270000 
 4397 2728 ED090000 		_ADR COUNT 
 4398 272c 69130000 		_ADR TYPEE 
 4399 2730 9D130000 		_ADR CR
 4400              	1:  	
 4401 2734 1B040000 		_UNNEST 
 4402              	
 4403              	//    dm+	 ( a u -- a )
 4404              	// 	Dump u bytes from , leaving a+u on the stack.
 4405              	
 4406              	// 	.word	_TRACE
 4407              	// _DMP	.byte  3
 4408              	// 	.ascii "dm+"
 4409              	// 	.p2align 2 	
 4410              	DMP:
 4411 2738 404700BF 		_NEST
 4412 273c B5060000 		_ADR	OVER
 4413 2740 6D050000 		_DOLIT	4
 4413      04000000 
 4414 2748 49140000 		_ADR	UDOTR			// display address
 4415 274c 15130000 		_ADR	SPACE
ARM GAS  stm32eforth-fl.s 			page 86


 4416 2750 39060000 		_ADR	TOR			// start count down loop
 4417 2754 BB050000 		_BRAN	PDUM2			// skip first pass
 4417      74270000 
 4418              	PDUM1:
 4419 275c 91060000 	  _ADR	DUPP
 4420 2760 09060000 		_ADR	CAT
 4421 2764 6D050000 		_DOLIT	3
 4421      03000000 
 4422 276c 49140000 		_ADR	UDOTR			// display numeric data
 4423 2770 B1070000 		_ADR	ONEP			// increment address
 4424              	PDUM2:
 4425 2774 91050000 	  _ADR	DONXT
 4426 2778 5C270000 		.word	PDUM1	// loop till done
 4427 277c 1B040000 		_UNNEST
 4428              		.p2align 2 
 4429              	//    DUMP	( a u -- )
 4430              	// 	Dump u bytes from a, in a formatted manner.
 4431              	
 4432 2780 BC260000 		.word	_VARIA
 4433 2784 04       	_DUMP:	.byte  4
 4434 2785 44554D50 		.ascii "DUMP"
 4435 2789 0000BF   		.p2align 2 	
 4436              	DUMP:
 4437 278c 404700BF 		_NEST
 4438 2790 850A0000 		_ADR	BASE
 4439 2794 E9050000 		_ADR	AT
 4440 2798 39060000 		_ADR	TOR
 4441 279c F1100000 		_ADR	HEX			// save radix,set hex
 4442 27a0 6D050000 		_DOLIT	16
 4442      10000000 
 4443 27a8 FD0C0000 		_ADR	SLASH			// change count to lines
 4444 27ac 39060000 		_ADR	TOR
 4445 27b0 BB050000 		_BRAN	DUMP4			// start count down loop
 4445      E0270000 
 4446              	DUMP1:
 4447 27b8 9D130000 	  _ADR	CR
 4448 27bc 6D050000 		_DOLIT	16
 4448      10000000 
 4449 27c4 A1080000 		_ADR	DDUP
 4450 27c8 39270000 		_ADR	DMP			// display numeric
 4451 27cc 79080000 		_ADR	ROT
 4452 27d0 79080000 		_ADR	ROT
 4453 27d4 15130000 		_ADR	SPACE
 4454 27d8 15130000 		_ADR	SPACE
 4455 27dc 69130000 		_ADR	TYPEE			// display printable characters
 4456              	DUMP4:
 4457 27e0 91050000 	  _DONXT	DUMP1	// loop till done
 4457      B8270000 
 4458              	DUMP3:
 4459 27e8 81060000 		_ADR	DROP
 4460 27ec 15060000 		_ADR	RFROM
 4461 27f0 850A0000 		_ADR	BASE
 4462 27f4 D5050000 		_ADR	STORE			// restore radix
 4463 27f8 1B040000 		_UNNEST
 4464              	
 4465              	//    .S	  ( ... -- ... )
 4466              	// 	Display the contents of the data stack.
ARM GAS  stm32eforth-fl.s 			page 87


 4467              	
 4468 27fc 84270000 		.word	_DUMP
 4469              	_DOTS:
 4470 2800 02       		.byte  2
 4471 2801 2E53     		.ascii ".S"
 4472 2803 00       		.p2align 2 	
 4473              	DOTS:
 4474 2804 404700BF 		_NEST
 4475 2808 15130000 		_ADR	SPACE
 4476 280c C50D0000 		_ADR	DEPTH			// stack depth
 4477 2810 39060000 		_ADR	TOR			// start count down loop
 4478 2814 BB050000 		_BRAN	DOTS2			// skip first pass
 4478      28280000 
 4479              	DOTS1:
 4480 281c 29060000 		_ADR	RAT
 4481 2820 E90D0000 		_ADR	PICK
 4482 2824 A1140000 		_ADR	DOT			// index stack, display contents
 4483              	DOTS2:
 4484 2828 91050000 		_DONXT	DOTS1	// loop till done
 4484      1C280000 
 4485 2830 15130000 		_ADR	SPACE
 4486 2834 1B040000 		_UNNEST
 4487              	
 4488              	//    >NAME	( ca -- na | F )
 4489              	// 	Convert code address to a name address.
 4490              	
 4491 2838 00280000 		.word	_DOTS
 4492 283c 05       	_TNAME:	.byte  5
 4493 283d 3E4E414D 		.ascii ">NAME"
 4493      45
 4494 2842 00BF     		.p2align 2 	
 4495              	TNAME:
 4496 2844 404700BF 		_NEST
 4497 2848 39060000 		_ADR	TOR			//  
 4498 284c 0D0B0000 		_ADR	CNTXT			//  va
 4499 2850 E9050000 		_ADR	AT			//  na
 4500              	TNAM1:
 4501 2854 91060000 		_ADR	DUPP			//  na na
 4502 2858 A9050000 		_QBRAN	TNAM2	//  vocabulary end, no match
 4502      88280000 
 4503 2860 91060000 		_ADR	DUPP			//  na na
 4504 2864 31170000 		_ADR	NAMET			//  na ca
 4505 2868 29060000 		_ADR	RAT			//  na ca code
 4506 286c FD060000 		_ADR	XORR			//  na f --
 4507 2870 A9050000 		_QBRAN	TNAM2
 4507      88280000 
 4508 2878 01080000 		_ADR	CELLM			//  la 
 4509 287c E9050000 		_ADR	AT			//  next_na
 4510 2880 BB050000 		_BRAN	TNAM1
 4510      54280000 
 4511              	TNAM2:	
 4512 2888 15060000 		_ADR	RFROM
 4513 288c 81060000 		_ADR	DROP			//  0|na --
 4514 2890 1B040000 		_UNNEST			// 0
 4515              	
 4516              	//    .ID	 ( na -- )
 4517              	// 	Display the name at address.
ARM GAS  stm32eforth-fl.s 			page 88


 4518              	
 4519 2894 3C280000 		.word	_TNAME
 4520 2898 03       	_DOTID:	.byte  3
 4521 2899 2E4944   		.ascii ".ID"
 4522              		.p2align 2 	
 4523              	DOTID:
 4524 289c 404700BF 		_NEST
 4525 28a0 65080000 		_ADR	QDUP			// if zero no name
 4526 28a4 A9050000 		_QBRAN	DOTI1
 4526      C4280000 
 4527 28ac ED090000 		_ADR	COUNT
 4528 28b0 6D050000 		_DOLIT	0x1F
 4528      1F000000 
 4529 28b8 D5060000 		_ADR	ANDD			// mask lexicon bits
 4530 28bc 69130000 		_ADR	TYPEE
 4531 28c0 1B040000 		_UNNEST			// display name string
 4532              	DOTI1:
 4533 28c4 05140000 		_DOTQP	9," {noName}"
 4533      09207B6E 
 4533      6F4E616D 
 4533      657D00BF 
 4534 28d4 1B040000 		_UNNEST
 4535              	
 4536              		.equ WANT_SEE, 0  // set to 1 if you want SEE 
 4537              	.if WANT_SEE 
 4538              	//    SEE	 ( -- //  string> )
 4539              	// 	A simple decompiler.
 4540              	
 4541              		.word	_DOTID
 4542              	_SEE:	.byte  3
 4543              		.ascii "SEE"
 4544              		.p2align 2 	
 4545              	SEE:
 4546              		_NEST
 4547              		_ADR	TICK	//  ca --, starting address
 4548              		_ADR	CR	
 4549              		_DOLIT	20
 4550              		_ADR	TOR
 4551              	SEE1:
 4552              		_ADR	CELLP			//  a
 4553              		_ADR	DUPP			//  a a
 4554              		_ADR	DECOMP		//  a
 4555              		_DONXT	SEE1
 4556              		_ADR	DROP
 4557              		_UNNEST
 4558              	
 4559              	// 	DECOMPILE ( a -- )
 4560              	// 	Convert code in a.  Display name of command or as data.
 4561              	
 4562              		.word	_SEE
 4563              	_DECOM:	.byte  9
 4564              		.ascii "DECOMPILE"
 4565              		.p2align 2 
 4566              		
 4567              	DECOMP:	
 4568              		_NEST
 4569              		_ADR	DUPP			//  a a
ARM GAS  stm32eforth-fl.s 			page 89


 4570              	// 	_ADR	TOR			//  a
 4571              		_ADR	AT			//  a code
 4572              		_ADR	DUPP			//  a code code
 4573              		_DOLIT	0xF800D000 //0xF800F800
 4574              		_ADR	ANDD
 4575              		_DOLIT	0xF000D000 //0xF800F000
 4576              		_ADR	EQUAL			//  a code ?
 4577              		_ADR	INVER 
 4578              		_QBRAN	DECOM2	//  not a command
 4579              		//  a valid_code --, extract address and display name
 4580              		MOVW	R0,#0xFFE
 4581              		MOV	R4,R5
 4582              		LSL	R5,R5,#21		//  get bits 22-12
 4583              		ASR	R5,R5,#9		//  with sign extension
 4584              		LSR	R4,R4,#15		//  get bits 11-1
 4585              		AND	R4,R4,R0		//  retain only bits 11-1
 4586              		ORR	R5,R5,R4		//  get bits 22-1
 4587              		NOP
 4588              		_ADR	OVER			//  a offset a
 4589              		_ADR	PLUS			//  a target-4
 4590              		_ADR	CELLP			//  a target
 4591              		_ADR	TNAME			//  a na/0 --, is it a name?
 4592              		_ADR	QDUP			//  name address or zero
 4593              		_QBRAN	DECOM1
 4594              		_ADR	SPACE			//  a na
 4595              		_ADR	DOTID			//  a --, display name
 4596              	// 	_ADR	RFROM			//  a
 4597              		_ADR	DROP
 4598              		_UNNEST
 4599              	DECOM1:	// _ADR	RFROM		//  a
 4600              		_ADR	AT			//  data
 4601              		_ADR	UDOT			//  display data
 4602              		_UNNEST
 4603              	DECOM2:
 4604              		_ADR	UDOT
 4605              	// 	_ADR	RFROM
 4606              		_ADR	DROP
 4607              		_UNNEST
 4608              	
 4609              	//    WORDS	( -- )
 4610              	// 	Display the names in the context vocabulary.
 4611              	
 4612              		.word	_DECOM
 4613              	.else 
 4614 28d8 98280000 		.word _DOTID 
 4615              	.endif 
 4616 28dc 05       	_WORDS:	.byte  5
 4617 28dd 574F5244 		.ascii "WORDS"
 4617      53
 4618 28e2 00BF     		.p2align 2 	
 4619              	WORDS:
 4620 28e4 404700BF 		_NEST
 4621 28e8 9D130000 		_ADR	CR
 4622 28ec 0D0B0000 		_ADR	CNTXT
 4623 28f0 E9050000 		_ADR	AT			// only in context
 4624              	WORS1:
 4625 28f4 65080000 		_ADR	QDUP			// ?at end of list
ARM GAS  stm32eforth-fl.s 			page 90


 4626 28f8 A9050000 		_QBRAN	WORS2
 4626      1C290000 
 4627 2900 91060000 		_ADR	DUPP
 4628 2904 15130000 		_ADR	SPACE
 4629 2908 9D280000 		_ADR	DOTID			// display a name
 4630 290c 01080000 		_ADR	CELLM
 4631 2910 E9050000 		_ADR	AT
 4632 2914 BB050000 		_BRAN	WORS1
 4632      F4280000 
 4633              	WORS2:
 4634 291c 1B040000 		_UNNEST
 4635              	
 4636              	// **************************************************************************
 4637              	//  cold start
 4638              	
 4639              	//    VER	 ( -- n )
 4640              	// 	Return the version number of this implementation.
 4641              	
 4642              	// 	.word	_WORDS
 4643              	// _VERSN	.byte  3
 4644              	// 	.ascii "VER"
 4645              	// 	.p2align 2 	
 4646              	VERSN:
 4647 2920 404700BF 		_NEST
 4648 2924 6D050000 		_DOLIT	VER*256+EXT
 4648      00010000 
 4649 292c 1B040000 		_UNNEST
 4650              	
 4651              	//    hi	  ( -- )
 4652              	// 	Display the sign-on message of eForth.
 4653              	
 4654 2930 DC280000 		.word	_WORDS
 4655 2934 02       	_HI:	.byte  2
 4656 2935 4849     		.ascii "HI"
 4657 2937 00       		.p2align 2 	
 4658              	HI:
 4659 2938 404700BF 		_NEST
 4660 293c 9D130000 		_ADR	CR	// initialize I/O
 4661 2940 05140000 		_DOTQP	26, "blue pill stm32eForth-it v" 
 4661      1A626C75 
 4661      65207069 
 4661      6C6C2073 
 4661      746D3332 
 4662 2960 850A0000 		_ADR	BASE
 4663 2964 E9050000 		_ADR	AT
 4664 2968 F1100000 		_ADR	HEX	// save radix
 4665 296c 21290000 		_ADR	VERSN
 4666 2970 E10F0000 		_ADR	BDIGS
 4667 2974 2D100000 		_ADR	DIG
 4668 2978 2D100000 		_ADR	DIG
 4669 297c 6D050000 		_DOLIT	'.'
 4669      2E000000 
 4670 2984 01100000 		_ADR	HOLD
 4671 2988 4D100000 		_ADR	DIGS
 4672 298c A1100000 		_ADR	EDIGS
 4673 2990 69130000 		_ADR	TYPEE	// format version number
 4674 2994 850A0000 		_ADR	BASE
ARM GAS  stm32eforth-fl.s 			page 91


 4675 2998 D5050000 		_ADR	STORE
 4676 299c 9D130000 		_ADR	CR
 4677 29a0 1B040000 		_UNNEST			// restore radix
 4678              	
 4679              	//    COLD	( -- )
 4680              	// 	The high level cold start sequence.
 4681              	
 4682 29a4 34290000 		.word	_HI
 4683 29a8 04       	LASTN:	.byte  4
 4684 29a9 434F4C44 		.ascii "COLD"
 4685 29ad 000000   		.p2align 2,0	
 4686              	COLD:
 4687              	//  Initiate Forth registers
 4688 29b0 4FF00003 		mov r3,#UPP&0xffff
 4689 29b4 C2F20003 		movt r3,#UPP>>16 
 4690 29b8 03F59F42 		add R2,R3,#RPP&0xffff	// Forth return stack
 4691 29bc 03F59D41 		add R1,R3,#SPP&0xffff // Forth data stack
 4692 29c0 85EA0505 		eor R5,R5,R5			//  tos=0
 4693 29c4 1648     		ldr R0,=COLD1 
 4694 29c6 FDF725BD 		_NEXT
 4695              	COLD1:
 4696 29ca 6D050000 		_DOLIT  0 
 4696      00000000 
 4697 29d2 01000000 		_ADR ULED // turn off user LED 
 4698 29d6 6D050000 		_DOLIT	UZERO
 4698      00020000 
 4699 29de 6D050000 		_DOLIT	UPP
 4699      00000020 
 4700 29e6 6D050000 		_DOLIT	ULAST-UZERO
 4700      54000000 
 4701 29ee B10E0000 		_ADR	MOVE 			// initialize user area
 4702 29f2 B51B0000 		_ADR	PRESE			// initialize stack and TIB
 4703 29f6 4D1D0000 		_ADR IMGQ		// if there is a saved image load it  
 4704 29fa A9050000 		_QBRAN 1f
 4704      062A0000 
 4705 2a02 7D1D0000 		_ADR	LOAD_IMG 
 4706              	1:
 4707 2a06 710A0000 		_ADR	TBOOT
 4708 2a0a 610E0000 		_ADR	ATEXE			// application boot
 4709 2a0e 81240000 		_ADR	OVERT
 4710 2a12 BB050000 		_BRAN	QUIT			// start interpretation
 4710      D41B0000 
 4711              	COLD2:
 4712 2a1a 00BF     		.p2align 2 	
 4713              	CTOP:
 4714 2a1c FFFFFFFF 		.word	0XFFFFFFFF		//  keep CTOP even
 4715              	
 4716              		.section .text.user, "a", %progbits 
 4717              		.p2align 10 
 4718              	USER_SPACE: // save user image here.  
 4719 0000 FFFFFFFF 		.word 0XFFFFFFFF
 4720              	
 4721              	  .end 
ARM GAS  stm32eforth-fl.s 			page 92


DEFINED SYMBOLS
board/blue-pill/stm32f103.inc:5      *ABS*:0000000020000000 RAM_ADR
board/blue-pill/stm32f103.inc:6      *ABS*:0000000000005000 RAM_SIZE
board/blue-pill/stm32f103.inc:7      *ABS*:0000000020005000 RAM_END
board/blue-pill/stm32f103.inc:10     *ABS*:0000000022000000 RAM_BIT_ALIAS
board/blue-pill/stm32f103.inc:14     *ABS*:0000000008000000 FLASH_ADR
board/blue-pill/stm32f103.inc:15     *ABS*:0000000000010000 FLASH_SIZE
board/blue-pill/stm32f103.inc:16     *ABS*:0000000008010000 FLASH_END
board/blue-pill/stm32f103.inc:18     *ABS*:0000000008010000 FLASH_HIDDEN_ADR
board/blue-pill/stm32f103.inc:19     *ABS*:0000000000010000 FLASH_HIDDEN_SIZE
board/blue-pill/stm32f103.inc:20     *ABS*:0000000008020000 FLASH_HIDDEN_END
board/blue-pill/stm32f103.inc:21     *ABS*:0000000000000400 PAGE_SIZE
board/blue-pill/stm32f103.inc:24     *ABS*:000000001ffff000 SYS_MEM
board/blue-pill/stm32f103.inc:25     *ABS*:0000000000000800 SYS_MEM_SIZE
board/blue-pill/stm32f103.inc:28     *ABS*:000000001ffff800 OPTION
board/blue-pill/stm32f103.inc:29     *ABS*:0000000000000010 OPT_SIZE
board/blue-pill/stm32f103.inc:33     *ABS*:0000000040000000 PER_BASE_ADR
board/blue-pill/stm32f103.inc:35     *ABS*:0000000042000000 PER_BIT_ALIAS
board/blue-pill/stm32f103.inc:39     *ABS*:0000000040021000 RCC_BASE_ADR
board/blue-pill/stm32f103.inc:41     *ABS*:0000000000000000 RCC_CR
board/blue-pill/stm32f103.inc:42     *ABS*:0000000000000004 RCC_CFGR
board/blue-pill/stm32f103.inc:43     *ABS*:0000000000000008 RCC_CIR
board/blue-pill/stm32f103.inc:44     *ABS*:000000000000000c RCC_APB2RSTR
board/blue-pill/stm32f103.inc:45     *ABS*:0000000000000010 RCC_APB1RSTR
board/blue-pill/stm32f103.inc:46     *ABS*:0000000000000014 RCC_AHBENR
board/blue-pill/stm32f103.inc:47     *ABS*:0000000000000018 RCC_APB2ENR
board/blue-pill/stm32f103.inc:48     *ABS*:000000000000001c RCC_APB1ENR
board/blue-pill/stm32f103.inc:49     *ABS*:0000000000000020 RCC_BDCR
board/blue-pill/stm32f103.inc:50     *ABS*:0000000000000024 RCC_CSR
board/blue-pill/stm32f103.inc:53     *ABS*:0000000040022000 FLASH_BASE_ADR
board/blue-pill/stm32f103.inc:55     *ABS*:0000000000000000 FLASH_ACR
board/blue-pill/stm32f103.inc:56     *ABS*:0000000000000004 FLASH_KEYR
board/blue-pill/stm32f103.inc:57     *ABS*:0000000000000008 FLASH_OPTKEYR
board/blue-pill/stm32f103.inc:58     *ABS*:000000000000000c FLASH_SR
board/blue-pill/stm32f103.inc:59     *ABS*:0000000000000010 FLASH_CR
board/blue-pill/stm32f103.inc:60     *ABS*:0000000000000014 FLASH_AR
board/blue-pill/stm32f103.inc:61     *ABS*:000000000000001c FLASH_OBR
board/blue-pill/stm32f103.inc:62     *ABS*:0000000000000020 FLASH_WRPR
board/blue-pill/stm32f103.inc:63     *ABS*:00000000000000a5 RDPRT_KEY
board/blue-pill/stm32f103.inc:64     *ABS*:0000000045670123 FLASH_KEY1
board/blue-pill/stm32f103.inc:65     *ABS*:00000000cdef89ab FLASH_KEY2
board/blue-pill/stm32f103.inc:68     *ABS*:0000000040010800 GPIOA_BASE_ADR
board/blue-pill/stm32f103.inc:69     *ABS*:0000000040010c00 GPIOB_BASE_ADR
board/blue-pill/stm32f103.inc:70     *ABS*:0000000040011000 GPIOC_BASE_ADR
board/blue-pill/stm32f103.inc:71     *ABS*:0000000040011400 GPIOD_BASE_ADR
board/blue-pill/stm32f103.inc:72     *ABS*:0000000040011800 GPIOE_BASE_ADR
board/blue-pill/stm32f103.inc:73     *ABS*:0000000040018c00 GPIOF_BASE_ADR
board/blue-pill/stm32f103.inc:74     *ABS*:0000000040012000 GPIOG_BASE_ADR
board/blue-pill/stm32f103.inc:77     *ABS*:0000000000000000 GPIO_CRL
board/blue-pill/stm32f103.inc:78     *ABS*:0000000000000004 GPIO_CRH
board/blue-pill/stm32f103.inc:79     *ABS*:0000000000000008 GPIO_IDR
board/blue-pill/stm32f103.inc:80     *ABS*:000000000000000c GPIO_ODR
board/blue-pill/stm32f103.inc:81     *ABS*:0000000000000010 GPIO_BSRR
board/blue-pill/stm32f103.inc:82     *ABS*:0000000000000014 GPIO_BRR
board/blue-pill/stm32f103.inc:83     *ABS*:0000000000000018 GPIO_LOCKR
board/blue-pill/stm32f103.inc:87     *ABS*:0000000040013800 USART1_BASE_ADR
board/blue-pill/stm32f103.inc:89     *ABS*:0000000000000000 USART_SR
ARM GAS  stm32eforth-fl.s 			page 93


board/blue-pill/stm32f103.inc:90     *ABS*:0000000000000004 USART_DR
board/blue-pill/stm32f103.inc:91     *ABS*:0000000000000008 USART_BRR
board/blue-pill/stm32f103.inc:92     *ABS*:000000000000000c USART_CR1
board/blue-pill/stm32f103.inc:93     *ABS*:0000000000000010 USART_CR2
board/blue-pill/stm32f103.inc:94     *ABS*:0000000000000014 USART_CR3
board/blue-pill/stm32f103.inc:95     *ABS*:0000000000000018 USART_GTPR
board/blue-pill/stm32f103.inc:98     *ABS*:00000000e000e010 STK_BASE_ADR
board/blue-pill/stm32f103.inc:100    *ABS*:0000000000000000 STK_CTL
board/blue-pill/stm32f103.inc:101    *ABS*:0000000000000004 STK_LOAD
board/blue-pill/stm32f103.inc:102    *ABS*:0000000000000008 STK_VAL
board/blue-pill/stm32f103.inc:103    *ABS*:000000000000000c STK_CALIB
board/blue-pill/stm32f103.inc:106    *ABS*:00000000e000ed00 SCB_BASE_ADR
board/blue-pill/stm32f103.inc:108    *ABS*:0000000000000000 SCB_CPUID
board/blue-pill/stm32f103.inc:109    *ABS*:0000000000000004 SCB_ICSR
board/blue-pill/stm32f103.inc:110    *ABS*:0000000000000008 SCB_VTOR
board/blue-pill/stm32f103.inc:111    *ABS*:000000000000000c SCB_AIRCR
board/blue-pill/stm32f103.inc:112    *ABS*:0000000000000010 SCB_SCR
board/blue-pill/stm32f103.inc:113    *ABS*:0000000000000014 SCB_CCR
board/blue-pill/stm32f103.inc:114    *ABS*:0000000000000018 SCB_SHPR1
board/blue-pill/stm32f103.inc:115    *ABS*:000000000000001c SCB_SHPR2
board/blue-pill/stm32f103.inc:116    *ABS*:0000000000000020 SCB_SHPR3
board/blue-pill/stm32f103.inc:117    *ABS*:0000000000000024 SCB_SHCRS
board/blue-pill/stm32f103.inc:118    *ABS*:0000000000000028 SCB_CFSR
board/blue-pill/stm32f103.inc:119    *ABS*:000000000000002c SCB_HFSR
board/blue-pill/stm32f103.inc:120    *ABS*:0000000000000034 SCB_MMAR
board/blue-pill/stm32f103.inc:121    *ABS*:0000000000000038 SCB_BFAR
board/blue-pill/stm32f103.inc:123    *ABS*:00000000000005fa SCB_VECTKEY
    stm32eforth-fl.s:91     *ABS*:0000000040011000 LED_GPIO
    stm32eforth-fl.s:92     *ABS*:000000000000000d LED_PIN
    stm32eforth-fl.s:93     *ABS*:0000000040013800 UART
    stm32eforth-fl.s:96     *ABS*:0000000020004e80 SPP
    stm32eforth-fl.s:97     *ABS*:0000000020004e80 TIBB
    stm32eforth-fl.s:98     *ABS*:0000000020004f80 RPP
    stm32eforth-fl.s:99     *ABS*:0000000020000000 UPP
    stm32eforth-fl.s:100    *ABS*:0000000020000100 DTOP
    stm32eforth-fl.s:101    *ABS*:0000000020004e00 DEND
    stm32eforth-fl.s:102    *ABS*:0000000020000000 RAMOFFSET
    stm32eforth-fl.s:103    *ABS*:0000000020005000 RAMEND
    stm32eforth-fl.s:108    *ABS*:0000000000000004 SEED_OFS
    stm32eforth-fl.s:109    *ABS*:0000000000000008 TICKS_OFS
    stm32eforth-fl.s:110    *ABS*:000000000000000c TIMER_OFS
    stm32eforth-fl.s:111    *ABS*:0000000000000010 FTRACE_OFS
    stm32eforth-fl.s:112    *ABS*:0000000000000014 IMG_SIGN_OFS
    stm32eforth-fl.s:113    *ABS*:0000000000000018 BOOT_OFS
    stm32eforth-fl.s:114    *ABS*:000000000000001c BASE_OFS
    stm32eforth-fl.s:115    *ABS*:0000000000000020 TMP_OFS
    stm32eforth-fl.s:116    *ABS*:0000000000000024 SPAN_OFS
    stm32eforth-fl.s:117    *ABS*:0000000000000028 TOIN_OFS
    stm32eforth-fl.s:118    *ABS*:000000000000002c NTIB_OFS
    stm32eforth-fl.s:119    *ABS*:0000000000000030 TIB_OFS
    stm32eforth-fl.s:120    *ABS*:0000000000000034 EVAL_OFS
    stm32eforth-fl.s:121    *ABS*:0000000000000038 HLD_OFS
    stm32eforth-fl.s:122    *ABS*:000000000000003c CTXT_OFS
    stm32eforth-fl.s:123    *ABS*:0000000000000040 FORTH_CTOP_OFS
    stm32eforth-fl.s:124    *ABS*:0000000000000044 RAM_CTOP_OFS
    stm32eforth-fl.s:125    *ABS*:0000000000000048 LASTN_OFS
    stm32eforth-fl.s:126    *ABS*:000000000000004c VARS_END_OFS
ARM GAS  stm32eforth-fl.s 			page 94


    stm32eforth-fl.s:212    .isr_vector:0000000000000000 isr_vectors
    stm32eforth-fl.s:379    .text:0000000000000060 reset_handler
    stm32eforth-fl.s:326    .text:0000000000000000 default_handler
    stm32eforth-fl.s:358    .text:0000000000000044 systick_handler
    stm32eforth-fl.s:294    .isr_vector:0000000000000130 $d
    stm32eforth-fl.s:296    .isr_vector:0000000000000200 UZERO
    stm32eforth-fl.s:4658   .text:0000000000002938 HI
                            *ABS*:000000000000000a BASEE
    stm32eforth-fl.s:3249   .text:0000000000001a8c INTER
    stm32eforth-fl.s:4683   .text:00000000000029a8 LASTN
    stm32eforth-fl.s:4713   .text:0000000000002a1c CTOP
    stm32eforth-fl.s:317    .isr_vector:0000000000000254 ULAST
    stm32eforth-fl.s:324    .text:0000000000000000 $t
    stm32eforth-fl.s:336    .text:0000000000000018 exception_msg
    stm32eforth-fl.s:717    .text:0000000000000548 EMIT
    stm32eforth-fl.s:341    .text:0000000000000030 REBOOT
    stm32eforth-fl.s:337    .text:0000000000000018 $d
    stm32eforth-fl.s:349    .text:0000000000000040 scb_adr
    stm32eforth-fl.s:350    .text:0000000000000040 $d
    stm32eforth-fl.s:356    .text:0000000000000044 $t
    stm32eforth-fl.s:368    .text:000000000000005e systick_exit
    stm32eforth-fl.s:490    .text:000000000000014c remap
    stm32eforth-fl.s:391    .text:000000000000007c init_devices
    stm32eforth-fl.s:3371   .text:0000000000001bf4 unlock
    stm32eforth-fl.s:386    .text:0000000000000078 nest_adr
    stm32eforth-fl.s:4686   .text:00000000000029b0 COLD
    stm32eforth-fl.s:387    .text:0000000000000078 $d
    stm32eforth-fl.s:576    .text:000000000000040c NEST
    stm32eforth-fl.s:390    .text:000000000000007c $t
    stm32eforth-fl.s:406    .text:000000000000009a wait_hserdy
    stm32eforth-fl.s:426    .text:00000000000000b4 wait_pllrdy
    stm32eforth-fl.s:439    .text:00000000000000d4 wait_sws
    stm32eforth-fl.s:509    .text:000000000000017c remap_dest
    stm32eforth-fl.s:507    .text:0000000000000178 remap_src
    stm32eforth-fl.s:508    .text:0000000000000178 $d
    stm32eforth-fl.s:515    *ABS*:0000000000000001 VER
    stm32eforth-fl.s:516    *ABS*:0000000000000000 EXT
    stm32eforth-fl.s:520    *ABS*:0000000000000040 COMPO
    stm32eforth-fl.s:521    *ABS*:0000000000000080 IMEDD
    stm32eforth-fl.s:522    *ABS*:00000000ffffff1f MASKK
    stm32eforth-fl.s:524    *ABS*:0000000000000004 CELLL
    stm32eforth-fl.s:526    *ABS*:0000000000000008 VOCSS
    stm32eforth-fl.s:528    *ABS*:0000000000000008 BKSPP
    stm32eforth-fl.s:529    *ABS*:000000000000000a LF
    stm32eforth-fl.s:530    *ABS*:000000000000000d CRR
    stm32eforth-fl.s:531    *ABS*:000000000000001b ERR
    stm32eforth-fl.s:532    *ABS*:0000000000000027 TIC
    stm32eforth-fl.s:553    .text:0000000000000180 $t
    stm32eforth-fl.s:565    .text:0000000000000400 TPUSH
    stm32eforth-fl.s:580    .text:0000000000000414 INEXT
    stm32eforth-fl.s:570    .text:0000000000000406 TPOP
    stm32eforth-fl.s:592    .text:000000000000041a UNNEST
    stm32eforth-fl.s:604    .text:0000000000000420 COMPI_NEST
    stm32eforth-fl.s:619    .text:000000000000043e $d
    stm32eforth-fl.s:620    .text:0000000000000442 _RAND
    stm32eforth-fl.s:623    .text:000000000000044c RAND
    stm32eforth-fl.s:625    .text:0000000000000450 $d
ARM GAS  stm32eforth-fl.s 			page 95


    stm32eforth-fl.s:1585   .text:0000000000000a34 SEED
    stm32eforth-fl.s:850    .text:00000000000005e8 AT
    stm32eforth-fl.s:967    .text:0000000000000690 DUPP
    stm32eforth-fl.s:751    .text:000000000000056c DOLIT
    stm32eforth-fl.s:1079   .text:0000000000000744 LSHIFT
    stm32eforth-fl.s:1040   .text:00000000000006fc XORR
    stm32eforth-fl.s:1067   .text:000000000000072c RSHIFT
    stm32eforth-fl.s:837    .text:00000000000005d4 STORE
    stm32eforth-fl.s:1367   .text:00000000000008f4 ABSS
    stm32eforth-fl.s:978    .text:00000000000006a0 SWAP
    stm32eforth-fl.s:1933   .text:0000000000000ce4 MODD
    stm32eforth-fl.s:651    .text:00000000000004b4 _PAUSE
    stm32eforth-fl.s:653    .text:00000000000004ba $t
    stm32eforth-fl.s:654    .text:00000000000004bc PAUSE
    stm32eforth-fl.s:656    .text:00000000000004c0 $d
    stm32eforth-fl.s:1607   .text:0000000000000a5c TIMER
    stm32eforth-fl.s:658    .text:00000000000004c8 PAUSE_LOOP
    stm32eforth-fl.s:799    .text:00000000000005a8 QBRAN
    stm32eforth-fl.s:663    .text:00000000000004e0 PAUSE_EXIT
    stm32eforth-fl.s:816    .text:00000000000005ba BRAN
    stm32eforth-fl.s:669    .text:00000000000004e8 _ULED
    stm32eforth-fl.s:673    .text:00000000000004f0 ULED
    stm32eforth-fl.s:682    .text:0000000000000508 ULED_OFF
    stm32eforth-fl.s:688    .text:000000000000050c $d
    stm32eforth-fl.s:689    .text:0000000000000510 _QRX
    stm32eforth-fl.s:692    .text:0000000000000518 QKEY
    stm32eforth-fl.s:693    .text:0000000000000518 QRX
    stm32eforth-fl.s:704    .text:0000000000000538 QRX1
    stm32eforth-fl.s:712    .text:000000000000053e $d
    stm32eforth-fl.s:713    .text:0000000000000542 _TXSTO
    stm32eforth-fl.s:716    .text:0000000000000548 TXSTO
    stm32eforth-fl.s:718    .text:0000000000000548 TECHO
    stm32eforth-fl.s:721    .text:0000000000000550 TX1
    stm32eforth-fl.s:736    .text:0000000000000560 $d
    stm32eforth-fl.s:737    .text:0000000000000564 _NOP
    stm32eforth-fl.s:739    .text:0000000000000568 $t
    stm32eforth-fl.s:740    .text:0000000000000568 NOP
    stm32eforth-fl.s:759    .text:0000000000000576 $d
    stm32eforth-fl.s:760    .text:000000000000057a _EXECU
    stm32eforth-fl.s:762    .text:0000000000000582 $t
    stm32eforth-fl.s:763    .text:0000000000000584 EXECU
    stm32eforth-fl.s:778    .text:0000000000000590 DONXT
    stm32eforth-fl.s:785    .text:000000000000059e NEXT1
    stm32eforth-fl.s:805    .text:00000000000005b4 QBRAN1
    stm32eforth-fl.s:823    .text:00000000000005be $d
    stm32eforth-fl.s:824    .text:00000000000005c2 _EXIT
    stm32eforth-fl.s:827    .text:00000000000005c8 EXIT
    stm32eforth-fl.s:828    .text:00000000000005c8 $d
    stm32eforth-fl.s:834    .text:00000000000005d0 _STORE
    stm32eforth-fl.s:836    .text:00000000000005d2 $t
    stm32eforth-fl.s:846    .text:00000000000005e0 $d
    stm32eforth-fl.s:847    .text:00000000000005e4 _AT
    stm32eforth-fl.s:849    .text:00000000000005e6 $t
    stm32eforth-fl.s:857    .text:00000000000005ec $d
    stm32eforth-fl.s:858    .text:00000000000005f0 _CSTOR
    stm32eforth-fl.s:861    .text:00000000000005f4 CSTOR
    stm32eforth-fl.s:870    .text:0000000000000600 $d
ARM GAS  stm32eforth-fl.s 			page 96


    stm32eforth-fl.s:871    .text:0000000000000604 _CAT
    stm32eforth-fl.s:874    .text:0000000000000608 CAT
    stm32eforth-fl.s:881    .text:000000000000060c $d
    stm32eforth-fl.s:882    .text:0000000000000610 _RFROM
    stm32eforth-fl.s:885    .text:0000000000000614 RFROM
    stm32eforth-fl.s:893    .text:000000000000061e $d
    stm32eforth-fl.s:894    .text:0000000000000622 _RAT
    stm32eforth-fl.s:897    .text:0000000000000628 RAT
    stm32eforth-fl.s:905    .text:0000000000000630 $d
    stm32eforth-fl.s:906    .text:0000000000000634 _TOR
    stm32eforth-fl.s:909    .text:0000000000000638 TOR
    stm32eforth-fl.s:916    .text:0000000000000642 $d
    stm32eforth-fl.s:917    .text:0000000000000646 _RPSTOR
    stm32eforth-fl.s:919    .text:000000000000064a $t
    stm32eforth-fl.s:920    .text:000000000000064c RPSTOR
    stm32eforth-fl.s:928    .text:0000000000000654 $d
    stm32eforth-fl.s:929    .text:0000000000000658 _SPSTOR
    stm32eforth-fl.s:931    .text:000000000000065c $t
    stm32eforth-fl.s:932    .text:000000000000065c SPSTOR
    stm32eforth-fl.s:940    .text:0000000000000664 $d
    stm32eforth-fl.s:941    .text:0000000000000668 _SPAT
    stm32eforth-fl.s:943    .text:000000000000066c $t
    stm32eforth-fl.s:944    .text:000000000000066c SPAT
    stm32eforth-fl.s:952    .text:0000000000000674 $d
    stm32eforth-fl.s:953    .text:0000000000000678 _DROP
    stm32eforth-fl.s:956    .text:0000000000000680 DROP
    stm32eforth-fl.s:963    .text:0000000000000686 $d
    stm32eforth-fl.s:964    .text:000000000000068a _DUPP
    stm32eforth-fl.s:966    .text:000000000000068e $t
    stm32eforth-fl.s:974    .text:0000000000000696 $d
    stm32eforth-fl.s:975    .text:000000000000069a _SWAP
    stm32eforth-fl.s:987    .text:00000000000006a8 $d
    stm32eforth-fl.s:988    .text:00000000000006ac _OVER
    stm32eforth-fl.s:991    .text:00000000000006b4 OVER
    stm32eforth-fl.s:999    .text:00000000000006bc $d
    stm32eforth-fl.s:1000   .text:00000000000006c0 _ZLESS
    stm32eforth-fl.s:1003   .text:00000000000006c4 ZLESS
    stm32eforth-fl.s:1012   .text:00000000000006ca $d
    stm32eforth-fl.s:1013   .text:00000000000006ce _ANDD
    stm32eforth-fl.s:1015   .text:00000000000006d2 $t
    stm32eforth-fl.s:1016   .text:00000000000006d4 ANDD
    stm32eforth-fl.s:1024   .text:00000000000006de $d
    stm32eforth-fl.s:1025   .text:00000000000006e2 _ORR
    stm32eforth-fl.s:1028   .text:00000000000006e8 ORR
    stm32eforth-fl.s:1036   .text:00000000000006f2 $d
    stm32eforth-fl.s:1037   .text:00000000000006f6 _XORR
    stm32eforth-fl.s:1039   .text:00000000000006fa $t
    stm32eforth-fl.s:1048   .text:0000000000000706 $d
    stm32eforth-fl.s:1049   .text:000000000000070a _UPLUS
    stm32eforth-fl.s:1051   .text:000000000000070e $t
    stm32eforth-fl.s:1052   .text:0000000000000710 UPLUS
    stm32eforth-fl.s:1063   .text:0000000000000720 $d
    stm32eforth-fl.s:1064   .text:0000000000000724 _RSHIFT
    stm32eforth-fl.s:1075   .text:0000000000000736 $d
    stm32eforth-fl.s:1076   .text:000000000000073a _LSHIFT
    stm32eforth-fl.s:1087   .text:000000000000074e $d
    stm32eforth-fl.s:1088   .text:0000000000000752 _PLUS
ARM GAS  stm32eforth-fl.s 			page 97


    stm32eforth-fl.s:1090   .text:0000000000000754 $t
    stm32eforth-fl.s:1091   .text:0000000000000754 PLUS
    stm32eforth-fl.s:1099   .text:000000000000075c $d
    stm32eforth-fl.s:1100   .text:0000000000000760 _SUBB
    stm32eforth-fl.s:1102   .text:0000000000000762 $t
    stm32eforth-fl.s:1103   .text:0000000000000764 SUBB
    stm32eforth-fl.s:1111   .text:000000000000076e $d
    stm32eforth-fl.s:1112   .text:0000000000000772 _STAR
    stm32eforth-fl.s:1114   .text:0000000000000774 $t
    stm32eforth-fl.s:1115   .text:0000000000000774 STAR
    stm32eforth-fl.s:1123   .text:000000000000077e $d
    stm32eforth-fl.s:1124   .text:0000000000000782 _UMSTA
    stm32eforth-fl.s:1126   .text:0000000000000786 $t
    stm32eforth-fl.s:1127   .text:0000000000000788 UMSTA
    stm32eforth-fl.s:1137   .text:0000000000000794 $d
    stm32eforth-fl.s:1138   .text:0000000000000798 _MSTAR
    stm32eforth-fl.s:1141   .text:000000000000079c MSTAR
    stm32eforth-fl.s:1151   .text:00000000000007a8 $d
    stm32eforth-fl.s:1152   .text:00000000000007ac _ONEP
    stm32eforth-fl.s:1155   .text:00000000000007b0 ONEP
    stm32eforth-fl.s:1162   .text:00000000000007b6 $d
    stm32eforth-fl.s:1163   .text:00000000000007ba _ONEM
    stm32eforth-fl.s:1166   .text:00000000000007c0 ONEM
    stm32eforth-fl.s:1173   .text:00000000000007c6 $d
    stm32eforth-fl.s:1174   .text:00000000000007ca _TWOP
    stm32eforth-fl.s:1177   .text:00000000000007d0 TWOP
    stm32eforth-fl.s:1184   .text:00000000000007d6 $d
    stm32eforth-fl.s:1185   .text:00000000000007da _TWOM
    stm32eforth-fl.s:1188   .text:00000000000007e0 TWOM
    stm32eforth-fl.s:1195   .text:00000000000007e6 $d
    stm32eforth-fl.s:1196   .text:00000000000007ea _CELLP
    stm32eforth-fl.s:1198   .text:00000000000007f0 $t
    stm32eforth-fl.s:1199   .text:00000000000007f0 CELLP
    stm32eforth-fl.s:1206   .text:00000000000007f6 $d
    stm32eforth-fl.s:1207   .text:00000000000007fa _CELLM
    stm32eforth-fl.s:1209   .text:0000000000000800 $t
    stm32eforth-fl.s:1210   .text:0000000000000800 CELLM
    stm32eforth-fl.s:1217   .text:0000000000000806 $d
    stm32eforth-fl.s:1218   .text:000000000000080a _BLANK
    stm32eforth-fl.s:1221   .text:0000000000000810 BLANK
    stm32eforth-fl.s:1229   .text:000000000000081a $d
    stm32eforth-fl.s:1230   .text:000000000000081e _CELLS
    stm32eforth-fl.s:1232   .text:0000000000000824 $t
    stm32eforth-fl.s:1233   .text:0000000000000824 CELLS
    stm32eforth-fl.s:1240   .text:000000000000082a $d
    stm32eforth-fl.s:1241   .text:000000000000082e _CELLSL
    stm32eforth-fl.s:1243   .text:0000000000000834 $t
    stm32eforth-fl.s:1244   .text:0000000000000834 CELLSL
    stm32eforth-fl.s:1251   .text:000000000000083a $d
    stm32eforth-fl.s:1252   .text:000000000000083e _TWOST
    stm32eforth-fl.s:1255   .text:0000000000000844 TWOST
    stm32eforth-fl.s:1262   .text:000000000000084a $d
    stm32eforth-fl.s:1263   .text:000000000000084e _TWOSL
    stm32eforth-fl.s:1266   .text:0000000000000854 TWOSL
    stm32eforth-fl.s:1273   .text:000000000000085a $d
    stm32eforth-fl.s:1274   .text:000000000000085e _QDUP
    stm32eforth-fl.s:1277   .text:0000000000000864 QDUP
ARM GAS  stm32eforth-fl.s 			page 98


    stm32eforth-fl.s:1286   .text:000000000000086e $d
    stm32eforth-fl.s:1287   .text:0000000000000872 _ROT
    stm32eforth-fl.s:1289   .text:0000000000000876 $t
    stm32eforth-fl.s:1290   .text:0000000000000878 ROT
    stm32eforth-fl.s:1300   .text:0000000000000882 $d
    stm32eforth-fl.s:1301   .text:0000000000000886 _DDROP
    stm32eforth-fl.s:1303   .text:000000000000088c $t
    stm32eforth-fl.s:1304   .text:000000000000088c DDROP
    stm32eforth-fl.s:1312   .text:0000000000000896 $d
    stm32eforth-fl.s:1313   .text:000000000000089a _DDUP
    stm32eforth-fl.s:1316   .text:00000000000008a0 DDUP
    stm32eforth-fl.s:1325   .text:00000000000008ac $d
    stm32eforth-fl.s:1326   .text:00000000000008b0 _DPLUS
    stm32eforth-fl.s:1329   .text:00000000000008b4 DPLUS
    stm32eforth-fl.s:1341   .text:00000000000008c8 $d
    stm32eforth-fl.s:1342   .text:00000000000008cc _INVER
    stm32eforth-fl.s:1344   .text:00000000000008d0 $t
    stm32eforth-fl.s:1345   .text:00000000000008d0 INVER
    stm32eforth-fl.s:1352   .text:00000000000008d6 $d
    stm32eforth-fl.s:1353   .text:00000000000008da _NEGAT
    stm32eforth-fl.s:1356   .text:00000000000008e4 NEGAT
    stm32eforth-fl.s:1363   .text:00000000000008ea $d
    stm32eforth-fl.s:1364   .text:00000000000008ee _ABSS
    stm32eforth-fl.s:1366   .text:00000000000008f2 $t
    stm32eforth-fl.s:1376   .text:00000000000008fe $d
    stm32eforth-fl.s:1377   .text:0000000000000902 _ZEQUAL
    stm32eforth-fl.s:1380   .text:0000000000000908 ZEQUAL
    stm32eforth-fl.s:1390   .text:0000000000000916 $d
    stm32eforth-fl.s:1391   .text:000000000000091a _EQUAL
    stm32eforth-fl.s:1393   .text:000000000000091c $t
    stm32eforth-fl.s:1394   .text:000000000000091c EQUAL
    stm32eforth-fl.s:1405   .text:000000000000092c $d
    stm32eforth-fl.s:1406   .text:0000000000000930 _ULESS
    stm32eforth-fl.s:1409   .text:0000000000000934 ULESS
    stm32eforth-fl.s:1420   .text:0000000000000944 $d
    stm32eforth-fl.s:1421   .text:0000000000000948 _LESS
    stm32eforth-fl.s:1423   .text:000000000000094a $t
    stm32eforth-fl.s:1424   .text:000000000000094c LESS
    stm32eforth-fl.s:1435   .text:000000000000095c $d
    stm32eforth-fl.s:1436   .text:0000000000000960 _GREAT
    stm32eforth-fl.s:1438   .text:0000000000000962 $t
    stm32eforth-fl.s:1439   .text:0000000000000964 GREAT
    stm32eforth-fl.s:1450   .text:0000000000000974 $d
    stm32eforth-fl.s:1451   .text:0000000000000978 _MAX
    stm32eforth-fl.s:1453   .text:000000000000097c $t
    stm32eforth-fl.s:1454   .text:000000000000097c MAX
    stm32eforth-fl.s:1464   .text:0000000000000988 $d
    stm32eforth-fl.s:1465   .text:000000000000098c _MIN
    stm32eforth-fl.s:1467   .text:0000000000000990 $t
    stm32eforth-fl.s:1468   .text:0000000000000990 MIN
    stm32eforth-fl.s:1478   .text:000000000000099c $d
    stm32eforth-fl.s:1479   .text:00000000000009a0 _PSTOR
    stm32eforth-fl.s:1482   .text:00000000000009a4 PSTOR
    stm32eforth-fl.s:1493   .text:00000000000009b4 $d
    stm32eforth-fl.s:1494   .text:00000000000009b8 _DSTOR
    stm32eforth-fl.s:1497   .text:00000000000009bc DSTOR
    stm32eforth-fl.s:1508   .text:00000000000009d0 $d
ARM GAS  stm32eforth-fl.s 			page 99


    stm32eforth-fl.s:1509   .text:00000000000009d4 _DAT
    stm32eforth-fl.s:1512   .text:00000000000009d8 DAT
    stm32eforth-fl.s:1521   .text:00000000000009e2 $d
    stm32eforth-fl.s:1522   .text:00000000000009e6 _COUNT
    stm32eforth-fl.s:1524   .text:00000000000009ec $t
    stm32eforth-fl.s:1525   .text:00000000000009ec COUNT
    stm32eforth-fl.s:1534   .text:00000000000009f8 $d
    stm32eforth-fl.s:1535   .text:00000000000009fc _DNEGA
    stm32eforth-fl.s:1537   .text:0000000000000a04 $t
    stm32eforth-fl.s:1538   .text:0000000000000a04 DNEGA
    stm32eforth-fl.s:1556   .text:0000000000000a14 DOVAR
    stm32eforth-fl.s:1569   .text:0000000000000a20 DOCON
    stm32eforth-fl.s:1581   .text:0000000000000a2a $d
    stm32eforth-fl.s:1582   .text:0000000000000a2e _SEED
    stm32eforth-fl.s:1592   .text:0000000000000a3e $d
    stm32eforth-fl.s:1593   .text:0000000000000a42 _MSEC
    stm32eforth-fl.s:1596   .text:0000000000000a48 MSEC
    stm32eforth-fl.s:1603   .text:0000000000000a52 $d
    stm32eforth-fl.s:1604   .text:0000000000000a56 _TIMER
    stm32eforth-fl.s:1606   .text:0000000000000a5c $t
    stm32eforth-fl.s:1615   .text:0000000000000a66 $d
    stm32eforth-fl.s:1616   .text:0000000000000a6a _TBOOT
    stm32eforth-fl.s:1618   .text:0000000000000a70 $t
    stm32eforth-fl.s:1619   .text:0000000000000a70 TBOOT
    stm32eforth-fl.s:1627   .text:0000000000000a7a $d
    stm32eforth-fl.s:1628   .text:0000000000000a7e _BASE
    stm32eforth-fl.s:1631   .text:0000000000000a84 BASE
    stm32eforth-fl.s:1643   .text:0000000000000a8e TEMP
    stm32eforth-fl.s:1651   .text:0000000000000a98 $d
    stm32eforth-fl.s:1652   .text:0000000000000a9c _SPAN
    stm32eforth-fl.s:1655   .text:0000000000000aa4 SPAN
    stm32eforth-fl.s:1663   .text:0000000000000aae $d
    stm32eforth-fl.s:1664   .text:0000000000000ab2 _INN
    stm32eforth-fl.s:1666   .text:0000000000000ab6 $t
    stm32eforth-fl.s:1667   .text:0000000000000ab8 INN
    stm32eforth-fl.s:1675   .text:0000000000000ac2 $d
    stm32eforth-fl.s:1676   .text:0000000000000ac6 _NTIB
    stm32eforth-fl.s:1679   .text:0000000000000acc NTIB
    stm32eforth-fl.s:1687   .text:0000000000000ad6 $d
    stm32eforth-fl.s:1688   .text:0000000000000ada _TEVAL
    stm32eforth-fl.s:1690   .text:0000000000000ae0 $t
    stm32eforth-fl.s:1691   .text:0000000000000ae0 TEVAL
    stm32eforth-fl.s:1699   .text:0000000000000aea $d
    stm32eforth-fl.s:1700   .text:0000000000000aee _HLD
    stm32eforth-fl.s:1702   .text:0000000000000af2 $t
    stm32eforth-fl.s:1703   .text:0000000000000af4 HLD
    stm32eforth-fl.s:1711   .text:0000000000000afe $d
    stm32eforth-fl.s:1712   .text:0000000000000b02 _CNTXT
    stm32eforth-fl.s:1714   .text:0000000000000b0a $t
    stm32eforth-fl.s:1715   .text:0000000000000b0c CNTXT
    stm32eforth-fl.s:1716   .text:0000000000000b0c CRRNT
    stm32eforth-fl.s:1724   .text:0000000000000b16 $d
    stm32eforth-fl.s:1725   .text:0000000000000b1a _CP
    stm32eforth-fl.s:1728   .text:0000000000000b20 CPP
    stm32eforth-fl.s:1735   .text:0000000000000b2a $d
    stm32eforth-fl.s:1736   .text:0000000000000b2e _FCP
    stm32eforth-fl.s:1738   .text:0000000000000b32 $t
ARM GAS  stm32eforth-fl.s 			page 100


    stm32eforth-fl.s:1739   .text:0000000000000b34 FCP
    stm32eforth-fl.s:1747   .text:0000000000000b3e $d
    stm32eforth-fl.s:1748   .text:0000000000000b42 _LAST
    stm32eforth-fl.s:1751   .text:0000000000000b48 LAST
    stm32eforth-fl.s:1758   .text:0000000000000b52 $d
    stm32eforth-fl.s:1759   .text:0000000000000b56 _FTRACE
    stm32eforth-fl.s:1762   .text:0000000000000b60 FTRACE
    stm32eforth-fl.s:1773   .text:0000000000000b6a $d
    stm32eforth-fl.s:1774   .text:0000000000000b6e _USER_BGN
    stm32eforth-fl.s:1777   .text:0000000000000b7c USER_BEGIN
    stm32eforth-fl.s:1781   .text:0000000000000b84 USR_BGN_ADR
    stm32eforth-fl.s:1782   .text:0000000000000b84 $d
    stm32eforth-fl.s:1787   .text:0000000000000b8c _USER_END
    stm32eforth-fl.s:1790   .text:0000000000000b98 USER_END
    stm32eforth-fl.s:1794   .text:0000000000000ba0 USER_END_ADR
    stm32eforth-fl.s:1795   .text:0000000000000ba0 $d
    stm32eforth-fl.s:1800   .text:0000000000000ba8 _IMG_ADR
    stm32eforth-fl.s:1802   .text:0000000000000bb0 $t
    stm32eforth-fl.s:1803   .text:0000000000000bb0 IMG_ADR
    stm32eforth-fl.s:1807   .text:0000000000000bb8 USR_IMG_ADR
    stm32eforth-fl.s:1808   .text:0000000000000bb8 $d
    stm32eforth-fl.s:4718   .text.user:0000000000000000 USER_SPACE
    stm32eforth-fl.s:1813   .text:0000000000000bc0 _IMG_SIGN
    stm32eforth-fl.s:1816   .text:0000000000000bcc IMG_SIGN
    stm32eforth-fl.s:1828   .text:0000000000000bd6 $d
    stm32eforth-fl.s:1829   .text:0000000000000bda _WITHI
    stm32eforth-fl.s:1832   .text:0000000000000be4 WITHI
    stm32eforth-fl.s:1834   .text:0000000000000be8 $d
    stm32eforth-fl.s:1848   .text:0000000000000c08 _UMMOD
    stm32eforth-fl.s:1851   .text:0000000000000c10 UMMOD
    stm32eforth-fl.s:1855   .text:0000000000000c1a UMMOD0
    stm32eforth-fl.s:1862   .text:0000000000000c2a UMMOD1
    stm32eforth-fl.s:1868   .text:0000000000000c34 UMMOD2
    stm32eforth-fl.s:1878   .text:0000000000000c40 $d
    stm32eforth-fl.s:1879   .text:0000000000000c44 _MSMOD
    stm32eforth-fl.s:1881   .text:0000000000000c4a $t
    stm32eforth-fl.s:1882   .text:0000000000000c4c MSMOD
    stm32eforth-fl.s:1884   .text:0000000000000c50 $d
    stm32eforth-fl.s:1893   .text:0000000000000c78 MMOD1
    stm32eforth-fl.s:1900   .text:0000000000000c94 MMOD2
    stm32eforth-fl.s:1908   .text:0000000000000cb4 MMOD3
    stm32eforth-fl.s:1915   .text:0000000000000cbc _SLMOD
    stm32eforth-fl.s:1918   .text:0000000000000cc4 SLMOD
    stm32eforth-fl.s:1920   .text:0000000000000cc8 $d
    stm32eforth-fl.s:1930   .text:0000000000000ce0 _MODD
    stm32eforth-fl.s:1932   .text:0000000000000ce4 $t
    stm32eforth-fl.s:1935   .text:0000000000000ce8 $d
    stm32eforth-fl.s:1943   .text:0000000000000cf8 _SLASH
    stm32eforth-fl.s:1945   .text:0000000000000cfa $t
    stm32eforth-fl.s:1946   .text:0000000000000cfc SLASH
    stm32eforth-fl.s:1948   .text:0000000000000d00 $d
    stm32eforth-fl.s:1957   .text:0000000000000d14 _SSMOD
    stm32eforth-fl.s:1959   .text:0000000000000d1a $t
    stm32eforth-fl.s:1960   .text:0000000000000d1c SSMOD
    stm32eforth-fl.s:1962   .text:0000000000000d20 $d
    stm32eforth-fl.s:1972   .text:0000000000000d38 _STASL
    stm32eforth-fl.s:1975   .text:0000000000000d3c STASL
ARM GAS  stm32eforth-fl.s 			page 101


    stm32eforth-fl.s:1977   .text:0000000000000d40 $d
    stm32eforth-fl.s:1989   .text:0000000000000d54 _ALGND
    stm32eforth-fl.s:1991   .text:0000000000000d5c $t
    stm32eforth-fl.s:1992   .text:0000000000000d5c ALGND
    stm32eforth-fl.s:2001   .text:0000000000000d6c $d
    stm32eforth-fl.s:2002   .text:0000000000000d70 _TCHAR
    stm32eforth-fl.s:2004   .text:0000000000000d76 $t
    stm32eforth-fl.s:2005   .text:0000000000000d78 TCHAR
    stm32eforth-fl.s:2007   .text:0000000000000d7c $d
    stm32eforth-fl.s:2017   .text:0000000000000db4 TCHA1
    stm32eforth-fl.s:2024   .text:0000000000000dbc _DEPTH
    stm32eforth-fl.s:2026   .text:0000000000000dc2 $t
    stm32eforth-fl.s:2027   .text:0000000000000dc4 DEPTH
    stm32eforth-fl.s:2038   .text:0000000000000ddc $d
    stm32eforth-fl.s:2039   .text:0000000000000de0 _PICK
    stm32eforth-fl.s:2042   .text:0000000000000de8 PICK
    stm32eforth-fl.s:2044   .text:0000000000000dec $d
    stm32eforth-fl.s:2058   .text:0000000000000e08 _HERE
    stm32eforth-fl.s:2061   .text:0000000000000e10 HERE
    stm32eforth-fl.s:2063   .text:0000000000000e14 $d
    stm32eforth-fl.s:2071   .text:0000000000000e24 _PAD
    stm32eforth-fl.s:2073   .text:0000000000000e28 $t
    stm32eforth-fl.s:2074   .text:0000000000000e28 PAD
    stm32eforth-fl.s:2076   .text:0000000000000e2c $d
    stm32eforth-fl.s:2085   .text:0000000000000e44 _TIB
    stm32eforth-fl.s:2087   .text:0000000000000e48 $t
    stm32eforth-fl.s:2088   .text:0000000000000e48 TIB
    stm32eforth-fl.s:2096   .text:0000000000000e52 $d
    stm32eforth-fl.s:2097   .text:0000000000000e56 _ATEXE
    stm32eforth-fl.s:2100   .text:0000000000000e60 ATEXE
    stm32eforth-fl.s:2112   .text:0000000000000e74 $d
    stm32eforth-fl.s:2113   .text:0000000000000e78 _CMOVE
    stm32eforth-fl.s:2115   .text:0000000000000e7e $t
    stm32eforth-fl.s:2116   .text:0000000000000e80 CMOVE
    stm32eforth-fl.s:2123   .text:0000000000000e92 CMOV1
    stm32eforth-fl.s:2120   .text:0000000000000e8a CMOV0
    stm32eforth-fl.s:2128   .text:0000000000000e9c CMOV2
    stm32eforth-fl.s:2135   .text:0000000000000ea4 $d
    stm32eforth-fl.s:2136   .text:0000000000000ea8 _MOVE
    stm32eforth-fl.s:2139   .text:0000000000000eb0 MOVE
    stm32eforth-fl.s:2147   .text:0000000000000ec6 MOVE1
    stm32eforth-fl.s:2144   .text:0000000000000ebe MOVE0
    stm32eforth-fl.s:2152   .text:0000000000000ed0 MOVE2
    stm32eforth-fl.s:2159   .text:0000000000000ed8 $d
    stm32eforth-fl.s:2160   .text:0000000000000edc _FILL
    stm32eforth-fl.s:2163   .text:0000000000000ee4 FILL
    stm32eforth-fl.s:2166   .text:0000000000000eec FILL0
    stm32eforth-fl.s:2169   .text:0000000000000ef0 FILL1
    stm32eforth-fl.s:2175   .text:0000000000000efe FILL2
    stm32eforth-fl.s:2182   .text:0000000000000f06 $d
    stm32eforth-fl.s:2183   .text:0000000000000f0a _PACKS
    stm32eforth-fl.s:2186   .text:0000000000000f14 PACKS
    stm32eforth-fl.s:2188   .text:0000000000000f18 $d
    stm32eforth-fl.s:2215   .text:0000000000000f70 _DIGIT
    stm32eforth-fl.s:2217   .text:0000000000000f76 $t
    stm32eforth-fl.s:2218   .text:0000000000000f78 DIGIT
    stm32eforth-fl.s:2220   .text:0000000000000f7c $d
ARM GAS  stm32eforth-fl.s 			page 102


    stm32eforth-fl.s:2234   .text:0000000000000fb0 _EXTRC
    stm32eforth-fl.s:2236   .text:0000000000000fb8 $t
    stm32eforth-fl.s:2237   .text:0000000000000fb8 EXTRC
    stm32eforth-fl.s:2239   .text:0000000000000fbc $d
    stm32eforth-fl.s:2250   .text:0000000000000fdc _BDIGS
    stm32eforth-fl.s:2253   .text:0000000000000fe0 BDIGS
    stm32eforth-fl.s:2255   .text:0000000000000fe4 $d
    stm32eforth-fl.s:2264   .text:0000000000000ff8 _HOLD
    stm32eforth-fl.s:2267   .text:0000000000001000 HOLD
    stm32eforth-fl.s:2269   .text:0000000000001004 $d
    stm32eforth-fl.s:2282   .text:0000000000001028 _DIG
    stm32eforth-fl.s:2284   .text:000000000000102a $t
    stm32eforth-fl.s:2285   .text:000000000000102c DIG
    stm32eforth-fl.s:2287   .text:0000000000001030 $d
    stm32eforth-fl.s:2297   .text:0000000000001048 _DIGS
    stm32eforth-fl.s:2300   .text:000000000000104c DIGS
    stm32eforth-fl.s:2302   .text:0000000000001050 DIGS1
    stm32eforth-fl.s:2303   .text:0000000000001050 $d
    stm32eforth-fl.s:2307   .text:0000000000001068 DIGS2
    stm32eforth-fl.s:2314   .text:0000000000001070 _SIGN
    stm32eforth-fl.s:2317   .text:0000000000001078 SIGN
    stm32eforth-fl.s:2319   .text:000000000000107c $d
    stm32eforth-fl.s:2323   .text:0000000000001094 SIGN1
    stm32eforth-fl.s:2330   .text:000000000000109c _EDIGS
    stm32eforth-fl.s:2333   .text:00000000000010a0 EDIGS
    stm32eforth-fl.s:2335   .text:00000000000010a4 $d
    stm32eforth-fl.s:2350   .text:00000000000010c0 STRR
    stm32eforth-fl.s:2351   .text:00000000000010c0 $t
    stm32eforth-fl.s:2352   .text:00000000000010c4 $d
    stm32eforth-fl.s:2366   .text:00000000000010ec _HEX
    stm32eforth-fl.s:2368   .text:00000000000010f0 $t
    stm32eforth-fl.s:2369   .text:00000000000010f0 HEX
    stm32eforth-fl.s:2371   .text:00000000000010f4 $d
    stm32eforth-fl.s:2380   .text:000000000000110c _DECIM
    stm32eforth-fl.s:2382   .text:0000000000001114 $t
    stm32eforth-fl.s:2383   .text:0000000000001114 DECIM
    stm32eforth-fl.s:2385   .text:0000000000001118 $d
    stm32eforth-fl.s:2397   .text:0000000000001130 _DIGTQ
    stm32eforth-fl.s:2400   .text:0000000000001138 DIGTQ
    stm32eforth-fl.s:2402   .text:000000000000113c $d
    stm32eforth-fl.s:2415   .text:0000000000001184 DGTQ1
    stm32eforth-fl.s:2425   .text:0000000000001198 _NUMBQ
    stm32eforth-fl.s:2427   .text:00000000000011a0 $t
    stm32eforth-fl.s:2428   .text:00000000000011a0 NUMBQ
    stm32eforth-fl.s:2430   .text:00000000000011a4 $d
    stm32eforth-fl.s:2446   .text:00000000000011f0 NUMQ1
    stm32eforth-fl.s:2494   .text:00000000000012b8 NUMQ6
    stm32eforth-fl.s:2462   .text:0000000000001234 NUMQ2
    stm32eforth-fl.s:2486   .text:000000000000129c NUMQ4
    stm32eforth-fl.s:2483   .text:0000000000001290 NUMQ3
    stm32eforth-fl.s:2492   .text:00000000000012b4 NUMQ5
    stm32eforth-fl.s:2509   .text:00000000000012d4 _KEY
    stm32eforth-fl.s:2511   .text:00000000000012d8 $t
    stm32eforth-fl.s:2512   .text:00000000000012d8 KEY
    stm32eforth-fl.s:2514   .text:00000000000012dc KEY1
    stm32eforth-fl.s:2515   .text:00000000000012dc $d
    stm32eforth-fl.s:2523   .text:0000000000001304 GO_REBOOT
ARM GAS  stm32eforth-fl.s 			page 103


    stm32eforth-fl.s:2530   .text:000000000000130c _SPACE
    stm32eforth-fl.s:2532   .text:0000000000001312 $t
    stm32eforth-fl.s:2533   .text:0000000000001314 SPACE
    stm32eforth-fl.s:2535   .text:0000000000001318 $d
    stm32eforth-fl.s:2543   .text:0000000000001328 _SPACS
    stm32eforth-fl.s:2546   .text:0000000000001330 SPACS
    stm32eforth-fl.s:2548   .text:0000000000001334 $d
    stm32eforth-fl.s:2554   .text:0000000000001350 CHAR2
    stm32eforth-fl.s:2552   .text:000000000000134c CHAR1
    stm32eforth-fl.s:2562   .text:0000000000001360 _TYPEE
    stm32eforth-fl.s:2565   .text:0000000000001368 TYPEE
    stm32eforth-fl.s:2567   .text:000000000000136c $d
    stm32eforth-fl.s:2573   .text:0000000000001384 TYPE2
    stm32eforth-fl.s:2569   .text:0000000000001378 TYPE1
    stm32eforth-fl.s:2582   .text:0000000000001398 _CR
    stm32eforth-fl.s:2585   .text:000000000000139c CR
    stm32eforth-fl.s:2587   .text:00000000000013a0 $d
    stm32eforth-fl.s:2601   .text:00000000000013bc DOSTR
    stm32eforth-fl.s:2602   .text:00000000000013bc $t
    stm32eforth-fl.s:2604   .text:00000000000013c0 $d
    stm32eforth-fl.s:2623   .text:00000000000013e8 STRQP
    stm32eforth-fl.s:2624   .text:00000000000013e8 $t
    stm32eforth-fl.s:2625   .text:00000000000013ec $d
    stm32eforth-fl.s:2635   .text:00000000000013f4 DOTST
    stm32eforth-fl.s:2636   .text:00000000000013f4 $t
    stm32eforth-fl.s:2637   .text:00000000000013f8 $d
    stm32eforth-fl.s:2648   .text:0000000000001404 DOTQP
    stm32eforth-fl.s:2649   .text:0000000000001404 $t
    stm32eforth-fl.s:2650   .text:0000000000001408 $d
    stm32eforth-fl.s:2658   .text:0000000000001418 _DOTR
    stm32eforth-fl.s:2661   .text:000000000000141c DOTR
    stm32eforth-fl.s:2663   .text:0000000000001420 $d
    stm32eforth-fl.s:2676   .text:0000000000001444 _UDOTR
    stm32eforth-fl.s:2678   .text:0000000000001448 $t
    stm32eforth-fl.s:2679   .text:0000000000001448 UDOTR
    stm32eforth-fl.s:2681   .text:000000000000144c $d
    stm32eforth-fl.s:2696   .text:0000000000001478 _UDOT
    stm32eforth-fl.s:2699   .text:000000000000147c UDOT
    stm32eforth-fl.s:2701   .text:0000000000001480 $d
    stm32eforth-fl.s:2712   .text:000000000000149c _DOT
    stm32eforth-fl.s:2714   .text:000000000000149e $t
    stm32eforth-fl.s:2715   .text:00000000000014a0 DOT
    stm32eforth-fl.s:2717   .text:00000000000014a4 $d
    stm32eforth-fl.s:2724   .text:00000000000014c8 DOT1
    stm32eforth-fl.s:2734   .text:00000000000014dc _QUEST
    stm32eforth-fl.s:2736   .text:00000000000014de $t
    stm32eforth-fl.s:2737   .text:00000000000014e0 QUEST
    stm32eforth-fl.s:2739   .text:00000000000014e4 $d
    stm32eforth-fl.s:2753   .text:00000000000014f0 PARS
    stm32eforth-fl.s:2754   .text:00000000000014f0 $t
    stm32eforth-fl.s:2755   .text:00000000000014f4 $d
    stm32eforth-fl.s:2821   .text:0000000000001604 PARS8
    stm32eforth-fl.s:2785   .text:0000000000001578 PARS3
    stm32eforth-fl.s:2768   .text:0000000000001530 PARS1
    stm32eforth-fl.s:2783   .text:0000000000001574 PARS2
    stm32eforth-fl.s:2789   .text:0000000000001584 PARS4
    stm32eforth-fl.s:2801   .text:00000000000015b4 PARS5
ARM GAS  stm32eforth-fl.s 			page 104


    stm32eforth-fl.s:2808   .text:00000000000015d8 PARS6
    stm32eforth-fl.s:2814   .text:00000000000015ec PARS7
    stm32eforth-fl.s:2831   .text:0000000000001618 _PARSE
    stm32eforth-fl.s:2833   .text:000000000000161e $t
    stm32eforth-fl.s:2834   .text:0000000000001620 PARSE
    stm32eforth-fl.s:2836   .text:0000000000001624 $d
    stm32eforth-fl.s:2856   .text:0000000000001664 _DOTPR
    stm32eforth-fl.s:2859   .text:0000000000001668 DOTPR
    stm32eforth-fl.s:2861   .text:000000000000166c $d
    stm32eforth-fl.s:2870   .text:0000000000001684 _PAREN
    stm32eforth-fl.s:2872   .text:0000000000001686 $t
    stm32eforth-fl.s:2873   .text:0000000000001688 PAREN
    stm32eforth-fl.s:2875   .text:000000000000168c $d
    stm32eforth-fl.s:2884   .text:00000000000016a4 _BKSLA
    stm32eforth-fl.s:2886   .text:00000000000016a6 $t
    stm32eforth-fl.s:2887   .text:00000000000016a8 BKSLA
    stm32eforth-fl.s:2889   .text:00000000000016ac $d
    stm32eforth-fl.s:2899   .text:00000000000016c4 _CHAR
    stm32eforth-fl.s:2902   .text:00000000000016cc CHAR
    stm32eforth-fl.s:2904   .text:00000000000016d0 $d
    stm32eforth-fl.s:2914   .text:00000000000016e8 _WORDD
    stm32eforth-fl.s:2917   .text:00000000000016f0 WORDD
    stm32eforth-fl.s:2919   .text:00000000000016f4 $d
    stm32eforth-fl.s:2929   .text:000000000000170c _TOKEN
    stm32eforth-fl.s:2931   .text:0000000000001712 $t
    stm32eforth-fl.s:2932   .text:0000000000001714 TOKEN
    stm32eforth-fl.s:2934   .text:0000000000001718 $d
    stm32eforth-fl.s:2945   .text:0000000000001728 _NAMET
    stm32eforth-fl.s:2947   .text:000000000000172e $t
    stm32eforth-fl.s:2948   .text:0000000000001730 NAMET
    stm32eforth-fl.s:2950   .text:0000000000001734 $d
    stm32eforth-fl.s:2966   .text:0000000000001754 _SAMEQ
    stm32eforth-fl.s:2968   .text:000000000000175a $t
    stm32eforth-fl.s:2969   .text:000000000000175c SAMEQ
    stm32eforth-fl.s:2971   .text:0000000000001760 $d
    stm32eforth-fl.s:2988   .text:00000000000017a8 SAME2
    stm32eforth-fl.s:2973   .text:000000000000176c SAME1
    stm32eforth-fl.s:3003   .text:00000000000017bc FIND
    stm32eforth-fl.s:3004   .text:00000000000017bc $t
    stm32eforth-fl.s:3005   .text:00000000000017c0 $d
    stm32eforth-fl.s:3012   .text:00000000000017dc FIND1
    stm32eforth-fl.s:3032   .text:0000000000001834 FIND6
    stm32eforth-fl.s:3025   .text:000000000000181c FIND2
    stm32eforth-fl.s:3030   .text:000000000000182c FIND3
    stm32eforth-fl.s:3039   .text:000000000000184c FIND4
    stm32eforth-fl.s:3045   .text:0000000000001868 FIND5
    stm32eforth-fl.s:3060   .text:0000000000001890 _NAMEQ
    stm32eforth-fl.s:3062   .text:0000000000001896 $t
    stm32eforth-fl.s:3063   .text:0000000000001898 NAMEQ
    stm32eforth-fl.s:3065   .text:000000000000189c $d
    stm32eforth-fl.s:3080   .text:00000000000018ac BKSP
    stm32eforth-fl.s:3081   .text:00000000000018ac $t
    stm32eforth-fl.s:3082   .text:00000000000018b0 $d
    stm32eforth-fl.s:3096   .text:00000000000018f4 BACK1
    stm32eforth-fl.s:3106   .text:00000000000018f8 TAP
    stm32eforth-fl.s:3107   .text:00000000000018f8 $t
    stm32eforth-fl.s:3108   .text:00000000000018fc $d
ARM GAS  stm32eforth-fl.s 			page 105


    stm32eforth-fl.s:3122   .text:0000000000001914 KTAP
    stm32eforth-fl.s:3123   .text:0000000000001914 TTAP
    stm32eforth-fl.s:3124   .text:0000000000001914 $t
    stm32eforth-fl.s:3125   .text:0000000000001918 $d
    stm32eforth-fl.s:3139   .text:0000000000001958 KTAP2
    stm32eforth-fl.s:3136   .text:0000000000001950 KTAP1
    stm32eforth-fl.s:3150   .text:0000000000001970 _ACCEP
    stm32eforth-fl.s:3153   .text:0000000000001978 ACCEP
    stm32eforth-fl.s:3155   .text:000000000000197c $d
    stm32eforth-fl.s:3158   .text:0000000000001988 ACCP1
    stm32eforth-fl.s:3174   .text:00000000000019d0 ACCP4
    stm32eforth-fl.s:3170   .text:00000000000019c4 ACCP2
    stm32eforth-fl.s:3172   .text:00000000000019c8 ACCP3
    stm32eforth-fl.s:3184   .text:00000000000019e4 _QUERY
    stm32eforth-fl.s:3186   .text:00000000000019ea $t
    stm32eforth-fl.s:3187   .text:00000000000019ec QUERY
    stm32eforth-fl.s:3189   .text:00000000000019f0 $d
    stm32eforth-fl.s:3207   .text:0000000000001a24 _ABORT
    stm32eforth-fl.s:3209   .text:0000000000001a2a $t
    stm32eforth-fl.s:3210   .text:0000000000001a2c ABORT
    stm32eforth-fl.s:3212   .text:0000000000001a30 ABORT1
    stm32eforth-fl.s:3213   .text:0000000000001a30 $d
    stm32eforth-fl.s:3344   .text:0000000000001bb4 PRESE
    stm32eforth-fl.s:3357   .text:0000000000001bd4 QUIT
    stm32eforth-fl.s:3229   .text:0000000000001a58 ABORQ
    stm32eforth-fl.s:3230   .text:0000000000001a58 $t
    stm32eforth-fl.s:3231   .text:0000000000001a5c $d
    stm32eforth-fl.s:3246   .text:0000000000001a80 _INTER
    stm32eforth-fl.s:3248   .text:0000000000001a8c $t
    stm32eforth-fl.s:3251   .text:0000000000001a90 $d
    stm32eforth-fl.s:3260   .text:0000000000001acc INTE1
    stm32eforth-fl.s:3257   .text:0000000000001ac2 $t
    stm32eforth-fl.s:3258   .text:0000000000001ac4 $d
    stm32eforth-fl.s:3264   .text:0000000000001adc INTE2
    stm32eforth-fl.s:3271   .text:0000000000001ae4 _LBRAC
    stm32eforth-fl.s:3273   .text:0000000000001ae6 $t
    stm32eforth-fl.s:3274   .text:0000000000001ae8 LBRAC
    stm32eforth-fl.s:3276   .text:0000000000001aec $d
    stm32eforth-fl.s:3285   .text:0000000000001b04 _DOTOK
    stm32eforth-fl.s:3287   .text:0000000000001b08 $t
    stm32eforth-fl.s:3288   .text:0000000000001b08 DOTOK
    stm32eforth-fl.s:3290   .text:0000000000001b0c $d
    stm32eforth-fl.s:3296   .text:0000000000001b30 DOTO1
    stm32eforth-fl.s:3297   .text:0000000000001b30 $d
    stm32eforth-fl.s:3304   .text:0000000000001b3c _QSTAC
    stm32eforth-fl.s:3307   .text:0000000000001b44 QSTAC
    stm32eforth-fl.s:3309   .text:0000000000001b48 $d
    stm32eforth-fl.s:3311   .text:0000000000001b5e $t
    stm32eforth-fl.s:3312   .text:0000000000001b60 $d
    stm32eforth-fl.s:3318   .text:0000000000001b68 _EVAL
    stm32eforth-fl.s:3321   .text:0000000000001b70 EVAL
    stm32eforth-fl.s:3323   .text:0000000000001b74 EVAL1
    stm32eforth-fl.s:3324   .text:0000000000001b74 $d
    stm32eforth-fl.s:3332   .text:0000000000001b9c EVAL2
    stm32eforth-fl.s:3341   .text:0000000000001bac _PRESE
    stm32eforth-fl.s:3346   .text:0000000000001bb8 $d
    stm32eforth-fl.s:3354   .text:0000000000001bcc _QUIT
ARM GAS  stm32eforth-fl.s 			page 106


    stm32eforth-fl.s:3358   .text:0000000000001bd4 $d
    stm32eforth-fl.s:3360   .text:0000000000001be0 QUIT1
    stm32eforth-fl.s:3362   .text:0000000000001be4 QUIT2
    stm32eforth-fl.s:3370   .text:0000000000001bf4 $t
    stm32eforth-fl.s:3708   .text:000000000000200c flash_regs
    stm32eforth-fl.s:3393   .text:0000000000001c18 WAIT_BSY
    stm32eforth-fl.s:3395   .text:0000000000001c1a WAIT1
    stm32eforth-fl.s:3409   .text:0000000000001c24 $d
    stm32eforth-fl.s:3410   .text:0000000000001c28 _EPAGE
    stm32eforth-fl.s:3414   .text:0000000000001c34 EPAGE
    stm32eforth-fl.s:3431   .text:0000000000001c5c HWORD_WRITE
    stm32eforth-fl.s:3449   .text:0000000000001c84 $d
    stm32eforth-fl.s:3450   .text:0000000000001c88 _ISTOR
    stm32eforth-fl.s:3453   .text:0000000000001c8c ISTOR
    stm32eforth-fl.s:3455   .text:0000000000001c90 $d
    stm32eforth-fl.s:3461   .text:0000000000001cbc $d
    stm32eforth-fl.s:3476   .text:0000000000001cf8 _IMG_SIZE
    stm32eforth-fl.s:3479   .text:0000000000001d04 IMG_SIZE
    stm32eforth-fl.s:3481   .text:0000000000001d08 $d
    stm32eforth-fl.s:3497   .text:0000000000001d44 _IMGQ
    stm32eforth-fl.s:3500   .text:0000000000001d4c IMGQ
    stm32eforth-fl.s:3502   .text:0000000000001d50 $d
    stm32eforth-fl.s:3513   .text:0000000000001d70 _LOAD_IMG
    stm32eforth-fl.s:3516   .text:0000000000001d7c LOAD_IMG
    stm32eforth-fl.s:3518   .text:0000000000001d80 $d
    stm32eforth-fl.s:3545   .text:0000000000001dd8 _ERASE_MPG
    stm32eforth-fl.s:3547   .text:0000000000001de2 $t
    stm32eforth-fl.s:3548   .text:0000000000001de4 ERASE_MPG
    stm32eforth-fl.s:3550   .text:0000000000001de8 $d
    stm32eforth-fl.s:3609   .text:0000000000001eb8 PG_TO_ADR
    stm32eforth-fl.s:3559   .text:0000000000001e20 $d
    stm32eforth-fl.s:3570   .text:0000000000001e44 _FLSH_WR
    stm32eforth-fl.s:3573   .text:0000000000001e4c FLSH_WR
    stm32eforth-fl.s:3574   .text:0000000000001e4c $t
    stm32eforth-fl.s:3575   .text:0000000000001e50 $d
    stm32eforth-fl.s:3595   .text:0000000000001e98 _ADR_TO_PG
    stm32eforth-fl.s:3598   .text:0000000000001ea0 ADR_TO_PG
    stm32eforth-fl.s:3605   .text:0000000000001eac $d
    stm32eforth-fl.s:3606   .text:0000000000001eb0 _PG_TO_ADR
    stm32eforth-fl.s:3616   .text:0000000000001ec4 $d
    stm32eforth-fl.s:3617   .text:0000000000001ec8 _ERASE_IMG
    stm32eforth-fl.s:3619   .text:0000000000001ed2 $t
    stm32eforth-fl.s:3620   .text:0000000000001ed4 ERASE_IMG
    stm32eforth-fl.s:3622   .text:0000000000001ed8 $d
    stm32eforth-fl.s:3637   .text:0000000000001f14 _SAVE_IMG
    stm32eforth-fl.s:3640   .text:0000000000001f20 SAVE_IMG
    stm32eforth-fl.s:3642   .text:0000000000001f24 $d
    stm32eforth-fl.s:3671   .text:0000000000001f88 _TURNKEY
    stm32eforth-fl.s:3673   .text:0000000000001f90 $t
    stm32eforth-fl.s:3674   .text:0000000000001f90 TURNKEY
    stm32eforth-fl.s:3676   .text:0000000000001f94 $d
    stm32eforth-fl.s:3723   .text:0000000000002020 TICK
    stm32eforth-fl.s:3685   .text:0000000000001fb8 _FORGET
    stm32eforth-fl.s:3688   .text:0000000000001fc0 FORGET
    stm32eforth-fl.s:3690   .text:0000000000001fc4 $d
    stm32eforth-fl.s:4143   .text:0000000000002480 OVERT
    stm32eforth-fl.s:3709   .text:000000000000200c $d
ARM GAS  stm32eforth-fl.s 			page 107


    stm32eforth-fl.s:3720   .text:000000000000201c _TICK
    stm32eforth-fl.s:3722   .text:000000000000201e $t
    stm32eforth-fl.s:3725   .text:0000000000002024 $d
    stm32eforth-fl.s:3729   .text:0000000000002038 TICK1
    stm32eforth-fl.s:3736   .text:0000000000002044 _ALLOT
    stm32eforth-fl.s:3738   .text:000000000000204a $t
    stm32eforth-fl.s:3739   .text:000000000000204c ALLOT
    stm32eforth-fl.s:3741   .text:0000000000002050 $d
    stm32eforth-fl.s:3749   .text:0000000000002060 _COMMA
    stm32eforth-fl.s:3750   .text:0000000000002062 $t
    stm32eforth-fl.s:3751   .text:0000000000002064 COMMA
    stm32eforth-fl.s:3753   .text:0000000000002068 $d
    stm32eforth-fl.s:3764   .text:0000000000002084 $d
    stm32eforth-fl.s:3765   .text:0000000000002088 _BCOMP
    stm32eforth-fl.s:3767   .text:0000000000002092 $t
    stm32eforth-fl.s:3768   .text:0000000000002094 BCOMP
    stm32eforth-fl.s:3770   .text:0000000000002098 $d
    stm32eforth-fl.s:3778   .text:00000000000020a8 _COMPI
    stm32eforth-fl.s:3780   .text:00000000000020b0 $t
    stm32eforth-fl.s:3781   .text:00000000000020b0 COMPI
    stm32eforth-fl.s:3783   .text:00000000000020b4 $d
    stm32eforth-fl.s:3797   .text:00000000000020e0 _LITER
    stm32eforth-fl.s:3799   .text:00000000000020e8 $t
    stm32eforth-fl.s:3800   .text:00000000000020e8 LITER
    stm32eforth-fl.s:3802   .text:00000000000020ec $d
    stm32eforth-fl.s:4187   .text:00000000000024dc CALLC
    stm32eforth-fl.s:3813   .text:0000000000002100 STRCQ
    stm32eforth-fl.s:3814   .text:0000000000002100 $t
    stm32eforth-fl.s:3815   .text:0000000000002104 $d
    stm32eforth-fl.s:3834   .text:000000000000213c _FOR
    stm32eforth-fl.s:3836   .text:0000000000002140 $t
    stm32eforth-fl.s:3837   .text:0000000000002140 FOR
    stm32eforth-fl.s:3839   .text:0000000000002144 $d
    stm32eforth-fl.s:3847   .text:000000000000215c _BEGIN
    stm32eforth-fl.s:3849   .text:0000000000002162 $t
    stm32eforth-fl.s:3850   .text:0000000000002164 BEGIN
    stm32eforth-fl.s:3852   .text:0000000000002168 $d
    stm32eforth-fl.s:3858   .text:0000000000002170 $d
    stm32eforth-fl.s:3859   .text:0000000000002174 _FNEXT
    stm32eforth-fl.s:3862   .text:000000000000217c FNEXT
    stm32eforth-fl.s:3864   .text:0000000000002180 $d
    stm32eforth-fl.s:3872   .text:0000000000002198 _UNTIL
    stm32eforth-fl.s:3874   .text:000000000000219e $t
    stm32eforth-fl.s:3875   .text:00000000000021a0 UNTIL
    stm32eforth-fl.s:3877   .text:00000000000021a4 $d
    stm32eforth-fl.s:3885   .text:00000000000021bc _AGAIN
    stm32eforth-fl.s:3887   .text:00000000000021c2 $t
    stm32eforth-fl.s:3888   .text:00000000000021c4 AGAIN
    stm32eforth-fl.s:3890   .text:00000000000021c8 $d
    stm32eforth-fl.s:3898   .text:00000000000021e0 _IFF
    stm32eforth-fl.s:3901   .text:00000000000021e4 IFF
    stm32eforth-fl.s:3903   .text:00000000000021e8 $d
    stm32eforth-fl.s:3914   .text:0000000000002210 _AHEAD
    stm32eforth-fl.s:3916   .text:0000000000002216 $t
    stm32eforth-fl.s:3917   .text:0000000000002218 AHEAD
    stm32eforth-fl.s:3919   .text:000000000000221c $d
    stm32eforth-fl.s:3930   .text:0000000000002244 _REPEA
ARM GAS  stm32eforth-fl.s 			page 108


    stm32eforth-fl.s:3933   .text:000000000000224c REPEA
    stm32eforth-fl.s:3935   .text:0000000000002250 $d
    stm32eforth-fl.s:3945   .text:0000000000002268 _THENN
    stm32eforth-fl.s:3948   .text:0000000000002270 THENN
    stm32eforth-fl.s:3950   .text:0000000000002274 $d
    stm32eforth-fl.s:3959   .text:0000000000002288 _AFT
    stm32eforth-fl.s:3961   .text:000000000000228c $t
    stm32eforth-fl.s:3962   .text:000000000000228c AFT
    stm32eforth-fl.s:3964   .text:0000000000002290 $d
    stm32eforth-fl.s:3974   .text:00000000000022a8 _ELSEE
    stm32eforth-fl.s:3977   .text:00000000000022b0 ELSEE
    stm32eforth-fl.s:3979   .text:00000000000022b4 $d
    stm32eforth-fl.s:3988   .text:00000000000022c8 _WHILE
    stm32eforth-fl.s:3990   .text:00000000000022ce $t
    stm32eforth-fl.s:3991   .text:00000000000022d0 WHILE
    stm32eforth-fl.s:3993   .text:00000000000022d4 $d
    stm32eforth-fl.s:4001   .text:00000000000022e4 _ABRTQ
    stm32eforth-fl.s:4004   .text:00000000000022ec ABRTQ
    stm32eforth-fl.s:4006   .text:00000000000022f0 $d
    stm32eforth-fl.s:4014   .text:0000000000002308 _STRQ
    stm32eforth-fl.s:4017   .text:000000000000230c STRQ
    stm32eforth-fl.s:4019   .text:0000000000002310 $d
    stm32eforth-fl.s:4027   .text:0000000000002328 _DOTQ
    stm32eforth-fl.s:4030   .text:000000000000232c DOTQ
    stm32eforth-fl.s:4032   .text:0000000000002330 $d
    stm32eforth-fl.s:4043   .text:0000000000002348 _UNIQU
    stm32eforth-fl.s:4045   .text:0000000000002350 $t
    stm32eforth-fl.s:4046   .text:0000000000002350 UNIQU
    stm32eforth-fl.s:4048   .text:0000000000002354 $d
    stm32eforth-fl.s:4055   .text:000000000000237c UNIQ1
    stm32eforth-fl.s:4052   .text:0000000000002370 $d
    stm32eforth-fl.s:4066   .text:0000000000002384 SNAME
    stm32eforth-fl.s:4067   .text:0000000000002384 $t
    stm32eforth-fl.s:4068   .text:0000000000002388 $d
    stm32eforth-fl.s:4084   .text:00000000000023cc SNAM1
    stm32eforth-fl.s:4094   .text:00000000000023e4 _SCOMP
    stm32eforth-fl.s:4096   .text:00000000000023ee $t
    stm32eforth-fl.s:4097   .text:00000000000023f0 SCOMP
    stm32eforth-fl.s:4099   .text:00000000000023f4 $d
    stm32eforth-fl.s:4111   .text:000000000000242c SCOM2
    stm32eforth-fl.s:4108   .text:0000000000002424 SCOM1
    stm32eforth-fl.s:4116   .text:0000000000002440 SCOM3
    stm32eforth-fl.s:4123   .text:0000000000002448 COLON_ABORT
    stm32eforth-fl.s:4124   .text:0000000000002448 $t
    stm32eforth-fl.s:4125   .text:000000000000244c $d
    stm32eforth-fl.s:4140   .text:0000000000002478 _OVERT
    stm32eforth-fl.s:4142   .text:000000000000247e $t
    stm32eforth-fl.s:4145   .text:0000000000002484 $d
    stm32eforth-fl.s:4155   .text:000000000000249c _SEMIS
    stm32eforth-fl.s:4157   .text:000000000000249e $t
    stm32eforth-fl.s:4158   .text:00000000000024a0 SEMIS
    stm32eforth-fl.s:4160   .text:00000000000024a4 $d
    stm32eforth-fl.s:4170   .text:00000000000024c0 _RBRAC
    stm32eforth-fl.s:4172   .text:00000000000024c2 $t
    stm32eforth-fl.s:4173   .text:00000000000024c4 RBRAC
    stm32eforth-fl.s:4175   .text:00000000000024c8 $d
    stm32eforth-fl.s:4188   .text:00000000000024dc $t
ARM GAS  stm32eforth-fl.s 			page 109


    stm32eforth-fl.s:4189   .text:00000000000024e0 $d
    stm32eforth-fl.s:4199   .text:00000000000024f8 _COLON
    stm32eforth-fl.s:4201   .text:00000000000024fa $t
    stm32eforth-fl.s:4202   .text:00000000000024fc COLON
    stm32eforth-fl.s:4204   .text:0000000000002500 $d
    stm32eforth-fl.s:4214   .text:0000000000002518 _IMMED
    stm32eforth-fl.s:4216   .text:0000000000002522 $t
    stm32eforth-fl.s:4217   .text:0000000000002524 IMMED
    stm32eforth-fl.s:4219   .text:0000000000002528 $d
    stm32eforth-fl.s:4236   .text:0000000000002554 _CONST
    stm32eforth-fl.s:4239   .text:0000000000002560 CONST
    stm32eforth-fl.s:4241   .text:0000000000002564 $d
    stm32eforth-fl.s:4255   .text:0000000000002594 DODOES
    stm32eforth-fl.s:4256   .text:0000000000002594 $t
    stm32eforth-fl.s:4257   .text:0000000000002598 $d
    stm32eforth-fl.s:4274   .text:00000000000025c0 _DOES
    stm32eforth-fl.s:4276   .text:00000000000025c6 $t
    stm32eforth-fl.s:4277   .text:00000000000025c8 DOES
    stm32eforth-fl.s:4279   .text:00000000000025cc $d
    stm32eforth-fl.s:4289   .text:00000000000025f0 _DEFERAT
    stm32eforth-fl.s:4292   .text:00000000000025f8 DEFERAT
    stm32eforth-fl.s:4294   .text:00000000000025fc $d
    stm32eforth-fl.s:4303   .text:0000000000002614 _DEFERSTO
    stm32eforth-fl.s:4306   .text:000000000000261c DEFERSTO
    stm32eforth-fl.s:4308   .text:0000000000002620 $d
    stm32eforth-fl.s:4318   .text:000000000000263c _DEFER
    stm32eforth-fl.s:4320   .text:0000000000002642 $t
    stm32eforth-fl.s:4321   .text:0000000000002644 DEFER
    stm32eforth-fl.s:4323   .text:0000000000002648 $d
    stm32eforth-fl.s:4346   .text:0000000000002694 CREAT
    stm32eforth-fl.s:4334   .text:000000000000267c DEFER_NOP
    stm32eforth-fl.s:4335   .text:000000000000267c $t
    stm32eforth-fl.s:4336   .text:0000000000002680 $d
    stm32eforth-fl.s:4343   .text:000000000000268c _CREAT
    stm32eforth-fl.s:4348   .text:0000000000002698 $d
    stm32eforth-fl.s:4360   .text:00000000000026bc _VARIA
    stm32eforth-fl.s:4363   .text:00000000000026c8 VARIA
    stm32eforth-fl.s:4365   .text:00000000000026cc $d
    stm32eforth-fl.s:4378   .text:00000000000026f0 _TRACE
    stm32eforth-fl.s:4380   .text:00000000000026f6 $t
    stm32eforth-fl.s:4381   .text:00000000000026f8 TRACE
    stm32eforth-fl.s:4383   .text:00000000000026fc $d
    stm32eforth-fl.s:4390   .text:000000000000270c _DBG_PRT
    stm32eforth-fl.s:4392   .text:0000000000002714 DBG_PRT
    stm32eforth-fl.s:4393   .text:0000000000002714 $t
    stm32eforth-fl.s:4394   .text:0000000000002718 $d
    stm32eforth-fl.s:4495   .text:0000000000002844 TNAME
    stm32eforth-fl.s:4410   .text:0000000000002738 DMP
    stm32eforth-fl.s:4411   .text:0000000000002738 $t
    stm32eforth-fl.s:4412   .text:000000000000273c $d
    stm32eforth-fl.s:4424   .text:0000000000002774 PDUM2
    stm32eforth-fl.s:4418   .text:000000000000275c PDUM1
    stm32eforth-fl.s:4432   .text:0000000000002780 $d
    stm32eforth-fl.s:4433   .text:0000000000002784 _DUMP
    stm32eforth-fl.s:4436   .text:000000000000278c DUMP
    stm32eforth-fl.s:4438   .text:0000000000002790 $d
    stm32eforth-fl.s:4456   .text:00000000000027e0 DUMP4
ARM GAS  stm32eforth-fl.s 			page 110


    stm32eforth-fl.s:4446   .text:00000000000027b8 DUMP1
    stm32eforth-fl.s:4458   .text:00000000000027e8 DUMP3
    stm32eforth-fl.s:4469   .text:0000000000002800 _DOTS
    stm32eforth-fl.s:4473   .text:0000000000002804 DOTS
    stm32eforth-fl.s:4475   .text:0000000000002808 $d
    stm32eforth-fl.s:4483   .text:0000000000002828 DOTS2
    stm32eforth-fl.s:4479   .text:000000000000281c DOTS1
    stm32eforth-fl.s:4492   .text:000000000000283c _TNAME
    stm32eforth-fl.s:4494   .text:0000000000002842 $t
    stm32eforth-fl.s:4497   .text:0000000000002848 $d
    stm32eforth-fl.s:4500   .text:0000000000002854 TNAM1
    stm32eforth-fl.s:4511   .text:0000000000002888 TNAM2
    stm32eforth-fl.s:4520   .text:0000000000002898 _DOTID
    stm32eforth-fl.s:4522   .text:000000000000289c $t
    stm32eforth-fl.s:4523   .text:000000000000289c DOTID
    stm32eforth-fl.s:4525   .text:00000000000028a0 $d
    stm32eforth-fl.s:4532   .text:00000000000028c4 DOTI1
    stm32eforth-fl.s:4533   .text:00000000000028d2 $t
    stm32eforth-fl.s:4534   .text:00000000000028d4 $d
    stm32eforth-fl.s:4536   *ABS*:0000000000000000 WANT_SEE
    stm32eforth-fl.s:4616   .text:00000000000028dc _WORDS
    stm32eforth-fl.s:4618   .text:00000000000028e2 $t
    stm32eforth-fl.s:4619   .text:00000000000028e4 WORDS
    stm32eforth-fl.s:4621   .text:00000000000028e8 $d
    stm32eforth-fl.s:4624   .text:00000000000028f4 WORS1
    stm32eforth-fl.s:4633   .text:000000000000291c WORS2
    stm32eforth-fl.s:4646   .text:0000000000002920 VERSN
    stm32eforth-fl.s:4647   .text:0000000000002920 $t
    stm32eforth-fl.s:4648   .text:0000000000002924 $d
    stm32eforth-fl.s:4655   .text:0000000000002934 _HI
    stm32eforth-fl.s:4660   .text:000000000000293c $d
    stm32eforth-fl.s:4662   .text:0000000000002960 $d
    stm32eforth-fl.s:4688   .text:00000000000029b0 $t
    stm32eforth-fl.s:4695   .text:00000000000029ca COLD1
    stm32eforth-fl.s:4696   .text:00000000000029ca $d
    stm32eforth-fl.s:4711   .text:0000000000002a1a COLD2
    stm32eforth-fl.s:4712   .text:0000000000002a1a $t
    stm32eforth-fl.s:4714   .text:0000000000002a1c $d
    stm32eforth-fl.s:4719   .text.user:0000000000000000 $d
    stm32eforth-fl.s:4721   .text:0000000000002a20 $d
    stm32eforth-fl.s:340    .text:000000000000002f $d
    stm32eforth-fl.s:340    .text:0000000000000030 $t
    stm32eforth-fl.s:622    .text:0000000000000449 $d
    stm32eforth-fl.s:622    .text:000000000000044a $t
    stm32eforth-fl.s:671    .text:00000000000004ed $d
    stm32eforth-fl.s:671    .text:00000000000004ee $t
    stm32eforth-fl.s:691    .text:0000000000000515 $d
    stm32eforth-fl.s:691    .text:0000000000000516 $t
    stm32eforth-fl.s:715    .text:0000000000000547 $d
    stm32eforth-fl.s:715    .text:0000000000000548 $t
    stm32eforth-fl.s:826    .text:00000000000005c7 $d
    stm32eforth-fl.s:860    .text:00000000000005f3 $d
    stm32eforth-fl.s:860    .text:00000000000005f4 $t
    stm32eforth-fl.s:873    .text:0000000000000607 $d
    stm32eforth-fl.s:873    .text:0000000000000608 $t
    stm32eforth-fl.s:884    .text:0000000000000613 $d
    stm32eforth-fl.s:884    .text:0000000000000614 $t
ARM GAS  stm32eforth-fl.s 			page 111


    stm32eforth-fl.s:896    .text:0000000000000625 $d
    stm32eforth-fl.s:896    .text:0000000000000626 $t
    stm32eforth-fl.s:908    .text:0000000000000637 $d
    stm32eforth-fl.s:908    .text:0000000000000638 $t
    stm32eforth-fl.s:955    .text:000000000000067d $d
    stm32eforth-fl.s:955    .text:000000000000067e $t
    stm32eforth-fl.s:977    .text:000000000000069f $d
    stm32eforth-fl.s:977    .text:00000000000006a0 $t
    stm32eforth-fl.s:990    .text:00000000000006b1 $d
    stm32eforth-fl.s:990    .text:00000000000006b2 $t
    stm32eforth-fl.s:1002   .text:00000000000006c3 $d
    stm32eforth-fl.s:1002   .text:00000000000006c4 $t
    stm32eforth-fl.s:1027   .text:00000000000006e5 $d
    stm32eforth-fl.s:1027   .text:00000000000006e6 $t
    stm32eforth-fl.s:1066   .text:000000000000072b $d
    stm32eforth-fl.s:1066   .text:000000000000072c $t
    stm32eforth-fl.s:1078   .text:0000000000000741 $d
    stm32eforth-fl.s:1078   .text:0000000000000742 $t
    stm32eforth-fl.s:1140   .text:000000000000079b $d
    stm32eforth-fl.s:1140   .text:000000000000079c $t
    stm32eforth-fl.s:1154   .text:00000000000007af $d
    stm32eforth-fl.s:1154   .text:00000000000007b0 $t
    stm32eforth-fl.s:1165   .text:00000000000007bd $d
    stm32eforth-fl.s:1165   .text:00000000000007be $t
    stm32eforth-fl.s:1176   .text:00000000000007cd $d
    stm32eforth-fl.s:1176   .text:00000000000007ce $t
    stm32eforth-fl.s:1187   .text:00000000000007dd $d
    stm32eforth-fl.s:1187   .text:00000000000007de $t
    stm32eforth-fl.s:1220   .text:000000000000080d $d
    stm32eforth-fl.s:1220   .text:000000000000080e $t
    stm32eforth-fl.s:1254   .text:0000000000000841 $d
    stm32eforth-fl.s:1254   .text:0000000000000842 $t
    stm32eforth-fl.s:1265   .text:0000000000000851 $d
    stm32eforth-fl.s:1265   .text:0000000000000852 $t
    stm32eforth-fl.s:1276   .text:0000000000000863 $d
    stm32eforth-fl.s:1276   .text:0000000000000864 $t
    stm32eforth-fl.s:1315   .text:000000000000089f $d
    stm32eforth-fl.s:1315   .text:00000000000008a0 $t
    stm32eforth-fl.s:1328   .text:00000000000008b3 $d
    stm32eforth-fl.s:1328   .text:00000000000008b4 $t
    stm32eforth-fl.s:1355   .text:00000000000008e1 $d
    stm32eforth-fl.s:1355   .text:00000000000008e2 $t
    stm32eforth-fl.s:1379   .text:0000000000000905 $d
    stm32eforth-fl.s:1379   .text:0000000000000906 $t
    stm32eforth-fl.s:1408   .text:0000000000000933 $d
    stm32eforth-fl.s:1408   .text:0000000000000934 $t
    stm32eforth-fl.s:1481   .text:00000000000009a3 $d
    stm32eforth-fl.s:1481   .text:00000000000009a4 $t
    stm32eforth-fl.s:1496   .text:00000000000009bb $d
    stm32eforth-fl.s:1496   .text:00000000000009bc $t
    stm32eforth-fl.s:1511   .text:00000000000009d7 $d
    stm32eforth-fl.s:1511   .text:00000000000009d8 $t
    stm32eforth-fl.s:1584   .text:0000000000000a33 $d
    stm32eforth-fl.s:1584   .text:0000000000000a34 $t
    stm32eforth-fl.s:1595   .text:0000000000000a47 $d
    stm32eforth-fl.s:1595   .text:0000000000000a48 $t
    stm32eforth-fl.s:1630   .text:0000000000000a83 $d
ARM GAS  stm32eforth-fl.s 			page 112


    stm32eforth-fl.s:1630   .text:0000000000000a84 $t
    stm32eforth-fl.s:1654   .text:0000000000000aa1 $d
    stm32eforth-fl.s:1654   .text:0000000000000aa2 $t
    stm32eforth-fl.s:1678   .text:0000000000000acb $d
    stm32eforth-fl.s:1678   .text:0000000000000acc $t
    stm32eforth-fl.s:1727   .text:0000000000000b1d $d
    stm32eforth-fl.s:1727   .text:0000000000000b1e $t
    stm32eforth-fl.s:1750   .text:0000000000000b47 $d
    stm32eforth-fl.s:1750   .text:0000000000000b48 $t
    stm32eforth-fl.s:1761   .text:0000000000000b5d $d
    stm32eforth-fl.s:1761   .text:0000000000000b5e $t
    stm32eforth-fl.s:1776   .text:0000000000000b79 $d
    stm32eforth-fl.s:1776   .text:0000000000000b7a $t
    stm32eforth-fl.s:1789   .text:0000000000000b95 $d
    stm32eforth-fl.s:1789   .text:0000000000000b96 $t
    stm32eforth-fl.s:1815   .text:0000000000000bc9 $d
    stm32eforth-fl.s:1815   .text:0000000000000bca $t
    stm32eforth-fl.s:1831   .text:0000000000000be1 $d
    stm32eforth-fl.s:1831   .text:0000000000000be2 $t
    stm32eforth-fl.s:1850   .text:0000000000000c0f $d
    stm32eforth-fl.s:1850   .text:0000000000000c10 $t
    stm32eforth-fl.s:1917   .text:0000000000000cc1 $d
    stm32eforth-fl.s:1917   .text:0000000000000cc2 $t
    stm32eforth-fl.s:1974   .text:0000000000000d3b $d
    stm32eforth-fl.s:1974   .text:0000000000000d3c $t
    stm32eforth-fl.s:2041   .text:0000000000000de5 $d
    stm32eforth-fl.s:2041   .text:0000000000000de6 $t
    stm32eforth-fl.s:2060   .text:0000000000000e0d $d
    stm32eforth-fl.s:2060   .text:0000000000000e0e $t
    stm32eforth-fl.s:2099   .text:0000000000000e5f $d
    stm32eforth-fl.s:2099   .text:0000000000000e60 $t
    stm32eforth-fl.s:2138   .text:0000000000000ead $d
    stm32eforth-fl.s:2138   .text:0000000000000eae $t
    stm32eforth-fl.s:2162   .text:0000000000000ee1 $d
    stm32eforth-fl.s:2162   .text:0000000000000ee2 $t
    stm32eforth-fl.s:2185   .text:0000000000000f11 $d
    stm32eforth-fl.s:2185   .text:0000000000000f12 $t
    stm32eforth-fl.s:2252   .text:0000000000000fdf $d
    stm32eforth-fl.s:2252   .text:0000000000000fe0 $t
    stm32eforth-fl.s:2266   .text:0000000000000ffd $d
    stm32eforth-fl.s:2266   .text:0000000000000ffe $t
    stm32eforth-fl.s:2299   .text:000000000000104b $d
    stm32eforth-fl.s:2299   .text:000000000000104c $t
    stm32eforth-fl.s:2316   .text:0000000000001075 $d
    stm32eforth-fl.s:2316   .text:0000000000001076 $t
    stm32eforth-fl.s:2332   .text:000000000000109f $d
    stm32eforth-fl.s:2332   .text:00000000000010a0 $t
    stm32eforth-fl.s:2399   .text:0000000000001137 $d
    stm32eforth-fl.s:2399   .text:0000000000001138 $t
    stm32eforth-fl.s:2545   .text:000000000000132f $d
    stm32eforth-fl.s:2545   .text:0000000000001330 $t
    stm32eforth-fl.s:2564   .text:0000000000001365 $d
    stm32eforth-fl.s:2564   .text:0000000000001366 $t
    stm32eforth-fl.s:2584   .text:000000000000139b $d
    stm32eforth-fl.s:2584   .text:000000000000139c $t
    stm32eforth-fl.s:2660   .text:000000000000141b $d
    stm32eforth-fl.s:2660   .text:000000000000141c $t
ARM GAS  stm32eforth-fl.s 			page 113


    stm32eforth-fl.s:2698   .text:000000000000147b $d
    stm32eforth-fl.s:2698   .text:000000000000147c $t
    stm32eforth-fl.s:2858   .text:0000000000001667 $d
    stm32eforth-fl.s:2858   .text:0000000000001668 $t
    stm32eforth-fl.s:2901   .text:00000000000016c9 $d
    stm32eforth-fl.s:2901   .text:00000000000016ca $t
    stm32eforth-fl.s:2916   .text:00000000000016ed $d
    stm32eforth-fl.s:2916   .text:00000000000016ee $t
    stm32eforth-fl.s:3152   .text:0000000000001977 $d
    stm32eforth-fl.s:3152   .text:0000000000001978 $t
    stm32eforth-fl.s:3306   .text:0000000000001b43 $d
    stm32eforth-fl.s:3306   .text:0000000000001b44 $t
    stm32eforth-fl.s:3320   .text:0000000000001b6d $d
    stm32eforth-fl.s:3320   .text:0000000000001b6e $t
    stm32eforth-fl.s:3343   .text:0000000000001bb3 $d
    stm32eforth-fl.s:3343   .text:0000000000001bb4 $t
    stm32eforth-fl.s:3356   .text:0000000000001bd1 $d
    stm32eforth-fl.s:3356   .text:0000000000001bd2 $t
    stm32eforth-fl.s:3412   .text:0000000000001c33 $d
    stm32eforth-fl.s:3412   .text:0000000000001c34 $t
    stm32eforth-fl.s:3452   .text:0000000000001c8b $d
    stm32eforth-fl.s:3452   .text:0000000000001c8c $t
    stm32eforth-fl.s:3460   .text:0000000000001cb9 $d
    stm32eforth-fl.s:3460   .text:0000000000001cba $t
    stm32eforth-fl.s:3478   .text:0000000000001d01 $d
    stm32eforth-fl.s:3478   .text:0000000000001d02 $t
    stm32eforth-fl.s:3499   .text:0000000000001d49 $d
    stm32eforth-fl.s:3499   .text:0000000000001d4a $t
    stm32eforth-fl.s:3515   .text:0000000000001d79 $d
    stm32eforth-fl.s:3515   .text:0000000000001d7a $t
    stm32eforth-fl.s:3558   .text:0000000000001e1d $d
    stm32eforth-fl.s:3558   .text:0000000000001e1e $t
    stm32eforth-fl.s:3597   .text:0000000000001e9f $d
    stm32eforth-fl.s:3597   .text:0000000000001ea0 $t
    stm32eforth-fl.s:3608   .text:0000000000001eb7 $d
    stm32eforth-fl.s:3608   .text:0000000000001eb8 $t
    stm32eforth-fl.s:3639   .text:0000000000001f1d $d
    stm32eforth-fl.s:3639   .text:0000000000001f1e $t
    stm32eforth-fl.s:3687   .text:0000000000001fbf $d
    stm32eforth-fl.s:3687   .text:0000000000001fc0 $t
    stm32eforth-fl.s:3861   .text:0000000000002179 $d
    stm32eforth-fl.s:3861   .text:000000000000217a $t
    stm32eforth-fl.s:3900   .text:00000000000021e3 $d
    stm32eforth-fl.s:3900   .text:00000000000021e4 $t
    stm32eforth-fl.s:3932   .text:000000000000224b $d
    stm32eforth-fl.s:3932   .text:000000000000224c $t
    stm32eforth-fl.s:3947   .text:000000000000226d $d
    stm32eforth-fl.s:3947   .text:000000000000226e $t
    stm32eforth-fl.s:3976   .text:00000000000022ad $d
    stm32eforth-fl.s:3976   .text:00000000000022ae $t
    stm32eforth-fl.s:4003   .text:00000000000022eb $d
    stm32eforth-fl.s:4003   .text:00000000000022ec $t
    stm32eforth-fl.s:4016   .text:000000000000230b $d
    stm32eforth-fl.s:4016   .text:000000000000230c $t
    stm32eforth-fl.s:4029   .text:000000000000232b $d
    stm32eforth-fl.s:4029   .text:000000000000232c $t
    stm32eforth-fl.s:4238   .text:000000000000255d $d
ARM GAS  stm32eforth-fl.s 			page 114


    stm32eforth-fl.s:4238   .text:000000000000255e $t
    stm32eforth-fl.s:4291   .text:00000000000025f7 $d
    stm32eforth-fl.s:4291   .text:00000000000025f8 $t
    stm32eforth-fl.s:4305   .text:000000000000261b $d
    stm32eforth-fl.s:4305   .text:000000000000261c $t
    stm32eforth-fl.s:4345   .text:0000000000002693 $d
    stm32eforth-fl.s:4345   .text:0000000000002694 $t
    stm32eforth-fl.s:4362   .text:00000000000026c5 $d
    stm32eforth-fl.s:4362   .text:00000000000026c6 $t
    stm32eforth-fl.s:4435   .text:0000000000002789 $d
    stm32eforth-fl.s:4435   .text:000000000000278a $t
    stm32eforth-fl.s:4472   .text:0000000000002803 $d
    stm32eforth-fl.s:4472   .text:0000000000002804 $t
    stm32eforth-fl.s:4657   .text:0000000000002937 $d
    stm32eforth-fl.s:4657   .text:0000000000002938 $t
    stm32eforth-fl.s:4661   .text:000000000000295f $d

UNDEFINED SYMBOLS
_mstack
